"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdatemeleelight"]("main",{

/***/ "./src/stages/stagerender.ts":
/*!***********************************!*\
  !*** ./src/stages/stagerender.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.BgStar = exports.backgroundType = exports.boxFillBG = exports.boxFill = void 0;\nexports.drawStageInit = drawStageInit;\nexports.calculateDamageWallColours = calculateDamageWallColours;\nexports.drawDamageLine = drawDamageLine;\nexports.drawStage = drawStage;\nexports.setBackgroundType = setBackgroundType;\nexports.drawBackgroundInit = drawBackgroundInit;\nexports.drawBackground = drawBackground;\nexports.drawTunnel = drawTunnel;\nexports.drawStars = drawStars;\nconst transparency_1 = __webpack_require__(/*! main/vfx/transparency */ \"./src/main/vfx/transparency.js\");\nconst main_1 = __webpack_require__(/*! ../main/main */ \"./src/main/main.ts\");\nconst render_1 = __webpack_require__(/*! ../main/render */ \"./src/main/render.ts\");\nconst activeStage_1 = __webpack_require__(/*! ../stages/activeStage */ \"./src/stages/activeStage.ts\");\nconst Vec2D_1 = __webpack_require__(/*! ../main/util/Vec2D */ \"./src/main/util/Vec2D.ts\");\nconst linAlg_1 = __webpack_require__(/*! ../main/linAlg */ \"./src/main/linAlg.ts\");\nconst bgPos = [[-30, 500, 300, 500, 900, 500, 1230, 450, 358], [-30, 400, 300, 400, 900, 400, 1230, 350, 179]];\nconst direction = [[1, -1, 1, -1, 1, -1, 1, -1, 1], [-1, 1, -1, 1, -1, 1, -1, 1, -1]];\nexports.boxFill = \"rgba(0, 0, 0, 0.1)\";\nexports.boxFillBG = \"rgba(0, 0, 0, 0.1)\";\nconst bgStars = [];\nfor (let p = 0; p < 20; p++) {\n    bgStars[p] = new BgStar();\n    bgStars[p].pos = new Vec2D_1.Vec2D(600 + 100 * Math.random() * bgStars[p].velocity.x, 375 + 100 * Math.random() * bgStars[p].velocity.y);\n}\nlet bgSparkle = 3;\nconst gridGrad = \"rgba(94,173,255,0.2)\";\nconst circleSize = [];\nfor (let i = 0; i < 5; i++) {\n    circleSize[i] = i * 40;\n}\nlet ang = 0;\nexports.backgroundType = 0;\nconst scandypattern = new Image();\nscandypattern.src = \"assets/christmas/scandypattern.png\";\nconst fabric = new Image();\nfabric.src = \"assets/christmas/fabric.png\";\nconst randall = [new Image(), new Image(), new Image()];\nrandall[0].src = \"assets/stage/randall1.png\";\nrandall[1].src = \"assets/stage/randall2.png\";\nrandall[2].src = \"assets/stage/randall3.png\";\nlet randallTimer = 0;\nfunction drawStageInit() {\n    main_1.fg1.strokeStyle = \"#db80cc\";\n    main_1.fg1.lineWidth = 1;\n    for (let j = 0; j < activeStage_1.activeStage.ground.length; j++) {\n        main_1.fg1.beginPath();\n        main_1.fg1.moveTo((activeStage_1.activeStage.ground[j][0].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.ground[j][0].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.lineTo((activeStage_1.activeStage.ground[j][1].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.ground[j][1].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.closePath();\n        main_1.fg1.stroke();\n    }\n    main_1.fg1.strokeStyle = \"#ed6767\";\n    for (let j = 0; j < activeStage_1.activeStage.ceiling.length; j++) {\n        main_1.fg1.beginPath();\n        main_1.fg1.moveTo((activeStage_1.activeStage.ceiling[j][0].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.ceiling[j][0].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.lineTo((activeStage_1.activeStage.ceiling[j][1].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.ceiling[j][1].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.closePath();\n        main_1.fg1.stroke();\n    }\n    main_1.fg1.strokeStyle = \"#4794c6\";\n    for (let j = 0; j < activeStage_1.activeStage.platform.length; j++) {\n        if (activeStage_1.activeStage.movingPlats === null || activeStage_1.activeStage.movingPlats === undefined || activeStage_1.activeStage.movingPlats.indexOf(j) === -1) { // not a moving platform\n            main_1.fg1.beginPath();\n            main_1.fg1.moveTo((activeStage_1.activeStage.platform[j][0].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.platform[j][0].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n            main_1.fg1.lineTo((activeStage_1.activeStage.platform[j][1].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.platform[j][1].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n            main_1.fg1.closePath();\n            main_1.fg1.stroke();\n        }\n    }\n    main_1.fg1.strokeStyle = \"#47c648\";\n    for (let k = 0; k < activeStage_1.activeStage.wallL.length; k++) {\n        main_1.fg1.beginPath();\n        main_1.fg1.moveTo((activeStage_1.activeStage.wallL[k][0].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.wallL[k][0].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.lineTo((activeStage_1.activeStage.wallL[k][1].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.wallL[k][1].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.closePath();\n        main_1.fg1.stroke();\n    }\n    main_1.fg1.strokeStyle = \"#9867de\";\n    for (let l = 0; l < activeStage_1.activeStage.wallR.length; l++) {\n        main_1.fg1.beginPath();\n        main_1.fg1.moveTo((activeStage_1.activeStage.wallR[l][0].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.wallR[l][0].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.lineTo((activeStage_1.activeStage.wallR[l][1].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.wallR[l][1].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.closePath();\n        main_1.fg1.stroke();\n    }\n    main_1.fg1.strokeStyle = \"#E7A44C\";\n    main_1.fg1.lineWidth = 2;\n    for (let i = 0; i < activeStage_1.activeStage.ledge.length; i++) {\n        const e = activeStage_1.activeStage.ledge[i];\n        const pA = activeStage_1.activeStage[e[0]][e[1]][e[2]];\n        const pB = activeStage_1.activeStage[e[0]][e[1]][1 - e[2]];\n        const ang = Math.atan2((pB.y - pA.y), (pB.x - pA.x));\n        const magnitude = (0, linAlg_1.euclideanDist)(pA, pB);\n        const length = Math.min(0.4 * magnitude, 20 / activeStage_1.activeStage.scale);\n        const pC = new Vec2D_1.Vec2D(pA.x + length * Math.cos(ang), pA.y + length * Math.sin(ang));\n        main_1.fg1.beginPath();\n        main_1.fg1.moveTo((pA.x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (pA.y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.lineTo((pC.x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (pC.y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n        main_1.fg1.closePath();\n        main_1.fg1.stroke();\n    }\n}\n;\nconst swirlTimer = 0;\nconst swirlSwitch = false;\nconst wallColour = [\"rgb(255,0,40)\", \"rgb(0,255,255)\", \"rgb(125,125,125)\", \"rgb(125,50,255)\"];\nfunction wallColourFromDamageType(damageType) {\n    if (damageType === \"fire\") {\n        return wallColour[0];\n    }\n    else if (damageType === \"electric\") {\n        return wallColour[1];\n    }\n    else if (damageType === \"slash\") {\n        return wallColour[2];\n    }\n    else if (damageType === \"darkness\") {\n        return wallColour[3];\n    }\n    else {\n        return \"rgb(0,50,180)\";\n    }\n}\n;\nlet wallCycle = 0;\nfunction calculateDamageWallColours() {\n    let a = 0;\n    if (wallCycle < 240) {\n        wallCycle++;\n        if (wallCycle > 120) {\n            a = 240 - wallCycle;\n        }\n        else {\n            a = wallCycle;\n        }\n    }\n    else {\n        wallCycle = 0;\n    }\n    const n = Math.round(255 * a / 120);\n    wallColour[0] = \"rgb(255,\" + n + \",40)\";\n    wallColour[1] = \"rgb(\" + n + \",255,255)\";\n    const m = Math.round(125 + n / 2);\n    wallColour[2] = \"rgb(\" + m + \",\" + m + \",\" + m + \")\";\n    wallColour[3] = \"rgb(\" + Math.round(125 - n / 3) + \",50,\" + Math.round(255 - n / 3) + \")\";\n}\nfunction drawDamageLine(type, can, stage) {\n    for (let i = 0; i < stage[type].length; i++) {\n        const surfaceProperties = stage[type][i][2];\n        if (surfaceProperties !== undefined && surfaceProperties.damageType !== null) {\n            can.strokeStyle = wallColourFromDamageType(surfaceProperties.damageType);\n            can.beginPath();\n            can.moveTo((stage[type][i][0].x * stage.scale) + stage.offset[0], (stage[type][i][0].y * -stage.scale) + stage.offset[1]);\n            can.lineTo((stage[type][i][1].x * stage.scale) + stage.offset[0], (stage[type][i][1].y * -stage.scale) + stage.offset[1]);\n            can.stroke();\n        }\n    }\n}\nfunction drawStage() {\n    calculateDamageWallColours();\n    if (activeStage_1.activeStage.name === \"ystory\") {\n        // Randall\n        randallTimer++;\n        if (randallTimer === 30) {\n            randallTimer = 0;\n        }\n        main_1.bg2.drawImage(randall[Math.floor(randallTimer / 10)], (activeStage_1.activeStage.platform[0][0].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0] - 20, (activeStage_1.activeStage.platform[0][0].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1] - 20, 100, 100);\n    }\n    else if (activeStage_1.activeStage.movingPlats !== null && activeStage_1.activeStage.movingPlats !== undefined && activeStage_1.activeStage.movingPlats.length !== 0) {\n        main_1.fg2.strokeStyle = \"#4794c6\";\n        for (let i = 0; i < activeStage_1.activeStage.movingPlats.length; i++) {\n            if (activeStage_1.activeStage.name !== \"fountain\" || activeStage_1.activeStage.platform[activeStage_1.activeStage.movingPlats[i]][0].y > 0) {\n                main_1.fg2.beginPath();\n                main_1.fg2.moveTo((activeStage_1.activeStage.platform[activeStage_1.activeStage.movingPlats[i]][0].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.platform[activeStage_1.activeStage.movingPlats[i]][0].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n                main_1.fg2.lineTo((activeStage_1.activeStage.platform[activeStage_1.activeStage.movingPlats[i]][1].x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.platform[activeStage_1.activeStage.movingPlats[i]][1].y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1]);\n                main_1.fg2.closePath();\n                main_1.fg2.stroke();\n            }\n        }\n    }\n    main_1.fg2.fillStyle = exports.boxFill;\n    if (activeStage_1.activeStage.box !== null && activeStage_1.activeStage.box !== undefined) {\n        for (let j = 0; j < activeStage_1.activeStage.box.length; j++) {\n            main_1.fg2.fillRect((activeStage_1.activeStage.box[j].min.x * activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[0], (activeStage_1.activeStage.box[j].max.y * -activeStage_1.activeStage.scale) + activeStage_1.activeStage.offset[1], (activeStage_1.activeStage.box[j].max.x - activeStage_1.activeStage.box[j].min.x) * activeStage_1.activeStage.scale, (activeStage_1.activeStage.box[j].max.y - activeStage_1.activeStage.box[j].min.y) * activeStage_1.activeStage.scale);\n        }\n    }\n    if (activeStage_1.activeStage.polygon !== null && activeStage_1.activeStage.polygon !== undefined) {\n        for (let j = 0; j < activeStage_1.activeStage.polygon.length; j++) {\n            const p = activeStage_1.activeStage.polygon[j];\n            main_1.fg2.beginPath();\n            main_1.fg2.moveTo(p[0].x * activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[0], p[0].y * -activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[1]);\n            for (let n = 1; n < p.length; n++) {\n                main_1.fg2.lineTo(p[n].x * activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[0], p[n].y * -activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[1]);\n            }\n            main_1.fg2.closePath();\n            main_1.fg2.fill();\n        }\n    }\n    if (activeStage_1.activeStage.background !== null && activeStage_1.activeStage.background !== undefined) {\n        if (activeStage_1.activeStage.background.polygon !== null && activeStage_1.activeStage.background.polygon !== undefined) {\n            main_1.bg2.save();\n            main_1.bg2.fillStyle = exports.boxFillBG;\n            for (let i = 0; i < activeStage_1.activeStage.background.polygon.length; i++) {\n                const p = activeStage_1.activeStage.background.polygon[i];\n                main_1.bg2.beginPath();\n                main_1.bg2.moveTo(p[0].x * activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[0], p[0].y * -activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[1]);\n                for (let n = 1; n < p.length; n++) {\n                    main_1.bg2.lineTo(p[n].x * activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[0], p[n].y * -activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[1]);\n                }\n                main_1.bg2.closePath();\n                main_1.bg2.fill();\n            }\n        }\n        if (activeStage_1.activeStage.background.line !== null && activeStage_1.activeStage.background.line !== undefined) {\n            main_1.bg2.lineWidth = 3;\n            main_1.bg2.strokeStyle = exports.boxFillBG;\n            for (let i = 0; i < activeStage_1.activeStage.background.line.length; i++) {\n                const lL = activeStage_1.activeStage.background.line[i][0];\n                const lR = activeStage_1.activeStage.background.line[i][1];\n                main_1.bg2.beginPath();\n                main_1.bg2.moveTo(lL.x * activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[0], lL.y * -activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[1]);\n                main_1.bg2.lineTo(lR.x * activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[0], lR.y * -activeStage_1.activeStage.scale + activeStage_1.activeStage.offset[1]);\n                main_1.bg2.closePath();\n                main_1.bg2.stroke();\n            }\n            main_1.bg2.restore();\n        }\n    }\n    main_1.fg2.lineWidth = 4;\n    const types = [\"wallL\", \"wallR\", \"ground\", \"ceiling\"];\n    for (let i = 0; i < types.length; i++) {\n        drawDamageLine(types[i], main_1.fg2, activeStage_1.activeStage);\n    }\n    main_1.fg2.strokeStyle = \"#e7a44c\";\n    const ex = 0;\n}\n;\nfunction setBackgroundType(val) {\n    exports.backgroundType = val;\n}\n;\nclass BgStar {\n    constructor() {\n        const vSeed = Math.random();\n        this.velocity = new Vec2D_1.Vec2D(5 * vSeed * Math.sign(0.5 - Math.random()), 5 * (1 - vSeed) * Math.sign(0.5 - Math.random()));\n        if ((0, transparency_1.getTransparency)()) {\n            this.colour = \"hsl(\" + 358 * Math.random() + \", 100%, 50%)\";\n        }\n        else {\n            this.colour = \"hsl(\" + 358 * Math.random() + \",100%,15%)\";\n        }\n        this.pos = new Vec2D_1.Vec2D(0, 0);\n        this.life = 0;\n    }\n}\nexports.BgStar = BgStar;\n;\nfunction drawBackgroundInit() {\n    var _a, _b, _c, _d;\n    const bgGrad = main_1.bg1.createLinearGradient(0, 0, 0, 500);\n    bgGrad.addColorStop(0, \"rgb(24, 17, 66)\");\n    bgGrad.addColorStop(1, \"black\");\n    main_1.bg1.fillStyle = bgGrad;\n    main_1.bg1.fillRect(-100, -100, (_b = (_a = main_1.layers === null || main_1.layers === void 0 ? void 0 : main_1.layers.BG1) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0 + 200, (_d = (_c = main_1.layers === null || main_1.layers === void 0 ? void 0 : main_1.layers.BG1) === null || _c === void 0 ? void 0 : _c.height) !== null && _d !== void 0 ? _d : 0 + 200);\n    ;\n}\n;\nfunction drawBackground() {\n    if (exports.backgroundType === 0) {\n        drawStars();\n    }\n    else {\n        drawTunnel();\n    }\n}\n;\nfunction drawTunnel() {\n    main_1.bg2.lineWidth = 2;\n    ang += 0.005;\n    let angB = ang;\n    main_1.bg2.beginPath();\n    for (let i = 0; i < 16; i++) {\n        const v = (0, render_1.rotateVector)(0, 800, angB);\n        main_1.bg2.moveTo(600, 375);\n        main_1.bg2.lineTo(600 + v.x, 375 + v.y);\n        angB += Math.PI / 8;\n    }\n    main_1.bg2.stroke();\n    for (let i = 0; i < circleSize.length; i++) {\n        circleSize[i]++;\n        if (circleSize[i] > 200) {\n            circleSize[i] = 0;\n        }\n        main_1.bg2.lineWidth = Math.max(1, Math.round(3 * (circleSize[i] / 60)));\n        main_1.bg2.beginPath();\n        main_1.bg2.arc(600, 375, circleSize[i] * 4, 0, render_1.twoPi);\n        main_1.bg2.closePath();\n        main_1.bg2.stroke();\n    }\n}\n;\nfunction drawStars() {\n    bgSparkle--;\n    for (let p = 0; p < 20; p++) {\n        if (bgStars[p].pos.x > 1250 || bgStars[p].pos.y > 800 || bgStars[p].pos.x < -50 || bgStars[p].pos.y < -50) {\n            bgStars[p].pos = new Vec2D_1.Vec2D(600, 375);\n            bgStars[p].life = 0;\n            const vSeed = Math.random();\n            bgStars[p].velocity = new Vec2D_1.Vec2D(5 * vSeed * Math.sign(0.5 - Math.random()), 5 * (1 - vSeed) * Math.sign(0.5 - Math.random()));\n        }\n        bgStars[p].pos.x += bgStars[p].velocity.x;\n        bgStars[p].pos.y += bgStars[p].velocity.y;\n        bgStars[p].life++;\n        if (bgSparkle === 0) {\n            main_1.bg2.fillStyle = bgStars[p].colour;\n            if ((0, transparency_1.getTransparency)()) {\n                main_1.bg2.globalAlpha = Math.min(bgStars[p].life / 300, 1);\n            }\n            main_1.bg2.beginPath();\n            main_1.bg2.arc(bgStars[p].pos.x, bgStars[p].pos.y, 5, render_1.twoPi, 0);\n            ;\n            main_1.bg2.fill();\n        }\n    }\n    if (bgSparkle === 0) {\n        bgSparkle = 2;\n    }\n    main_1.bg2.globalAlpha = 1;\n    for (let k = 1; k > -1; k--) {\n        for (let j = 0; j < 9; j++) {\n            //bgPos[j] += direction[j]*5*Math.random();\n            if (j === 8) {\n                bgPos[k][j] += direction[k][j] * 0.2 * Math.random();\n            }\n            else {\n                bgPos[k][j] += direction[k][j] * 1 * Math.random();\n            }\n            switch (j) {\n                case 0:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > -10) || (direction[k][j] === -1 && bgPos[k][j] < -200)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                case 1:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > 550 - k * 100) || (direction[k][j] === -1 && bgPos[k][j] < 450 - k * 100)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                case 2:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > 550) || (direction[k][j] === -1 && bgPos[k][j] < 0)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                case 3:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > 550 - k * 100) || (direction[k][j] === -1 && bgPos[k][j] < 450 - k * 100)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                case 4:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > 1150) || (direction[k][j] === -1 && bgPos[k][j] < 600)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                case 5:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > 550 - k * 100) || (direction[k][j] === -1 && bgPos[k][j] < 450 - k * 100)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                case 6:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > 1400) || (direction[k][j] === -1 && bgPos[k][j] < 1210)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                case 7:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > 550 - k * 100) || (direction[k][j] === -1 && bgPos[k][j] < 450 - k * 100)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                case 8:\n                    if ((direction[k][j] === 1 && bgPos[k][j] > 357) || (direction[k][j] === -1 && bgPos[k][j] < 1)) {\n                        direction[k][j] *= -1;\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        if ((0, transparency_1.getTransparency)()) {\n            exports.boxFill = \"hsla(\" + bgPos[k][8] + \", 100%, 50%, \" + (0.15 - k * 0.07) + \")\";\n            exports.boxFillBG = \"hsla(\" + bgPos[k][8] + \", 100%, 50%, \" + (0.13 - k * 0.07) + \")\";\n        }\n        else {\n            exports.boxFill = \"hsl(\" + bgPos[k][8] + \", 100%, 7%)\";\n            exports.boxFillBG = \"hsl(\" + bgPos[k][8] + \", 50%, 7%)\";\n        }\n        main_1.bg2.fillStyle = exports.boxFill;\n        main_1.bg2.beginPath();\n        main_1.bg2.moveTo(bgPos[k][0], bgPos[k][1]);\n        main_1.bg2.bezierCurveTo(bgPos[k][2], bgPos[k][3], bgPos[k][4], bgPos[k][5], bgPos[k][6], bgPos[k][7]);\n        if (k === 1) {\n            main_1.bg2.lineTo(bgPos[0][6], bgPos[0][7]);\n            main_1.bg2.bezierCurveTo(bgPos[0][4], bgPos[0][5], bgPos[0][2], bgPos[0][3], bgPos[0][0], bgPos[0][1]);\n        }\n        else {\n            main_1.bg2.lineTo(1200, 750);\n            main_1.bg2.lineTo(0, 750);\n        }\n        main_1.bg2.closePath();\n        main_1.bg2.fill();\n    }\n}\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvc3RhZ2VzL3N0YWdlcmVuZGVyLnRzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGNBQWMsR0FBRyxzQkFBc0IsR0FBRyxpQkFBaUIsR0FBRyxlQUFlO0FBQzdFLHFCQUFxQjtBQUNyQixrQ0FBa0M7QUFDbEMsc0JBQXNCO0FBQ3RCLGlCQUFpQjtBQUNqQix5QkFBeUI7QUFDekIsMEJBQTBCO0FBQzFCLHNCQUFzQjtBQUN0QixrQkFBa0I7QUFDbEIsaUJBQWlCO0FBQ2pCLHVCQUF1QixtQkFBTyxDQUFDLDZEQUF1QjtBQUN0RCxlQUFlLG1CQUFPLENBQUMsd0NBQWM7QUFDckMsaUJBQWlCLG1CQUFPLENBQUMsNENBQWdCO0FBQ3pDLHNCQUFzQixtQkFBTyxDQUFDLDBEQUF1QjtBQUNyRCxnQkFBZ0IsbUJBQU8sQ0FBQyxvREFBb0I7QUFDNUMsaUJBQWlCLG1CQUFPLENBQUMsNENBQWdCO0FBQ3pDO0FBQ0E7QUFDQSxlQUFlO0FBQ2YsaUJBQWlCO0FBQ2pCO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2Q0FBNkM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsOENBQThDO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLCtDQUErQztBQUNuRSxnTEFBZ0w7QUFDaEw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw0Q0FBNEM7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNENBQTRDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsNENBQTRDO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0JBQXdCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtEQUFrRDtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLDBDQUEwQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qiw4Q0FBOEM7QUFDdEU7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGNBQWM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXlEO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxjQUFjO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QixzREFBc0Q7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isa0JBQWtCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxzQkFBc0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsUUFBUTtBQUM1Qix3QkFBd0IsT0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksZUFBZTtBQUMzQixZQUFZLGlCQUFpQjtBQUM3QjtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCLFlBQVksaUJBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL21lbGVlbGlnaHQvLi9zcmMvc3RhZ2VzL3N0YWdlcmVuZGVyLnRzP2E1N2YiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkJnU3RhciA9IGV4cG9ydHMuYmFja2dyb3VuZFR5cGUgPSBleHBvcnRzLmJveEZpbGxCRyA9IGV4cG9ydHMuYm94RmlsbCA9IHZvaWQgMDtcbmV4cG9ydHMuZHJhd1N0YWdlSW5pdCA9IGRyYXdTdGFnZUluaXQ7XG5leHBvcnRzLmNhbGN1bGF0ZURhbWFnZVdhbGxDb2xvdXJzID0gY2FsY3VsYXRlRGFtYWdlV2FsbENvbG91cnM7XG5leHBvcnRzLmRyYXdEYW1hZ2VMaW5lID0gZHJhd0RhbWFnZUxpbmU7XG5leHBvcnRzLmRyYXdTdGFnZSA9IGRyYXdTdGFnZTtcbmV4cG9ydHMuc2V0QmFja2dyb3VuZFR5cGUgPSBzZXRCYWNrZ3JvdW5kVHlwZTtcbmV4cG9ydHMuZHJhd0JhY2tncm91bmRJbml0ID0gZHJhd0JhY2tncm91bmRJbml0O1xuZXhwb3J0cy5kcmF3QmFja2dyb3VuZCA9IGRyYXdCYWNrZ3JvdW5kO1xuZXhwb3J0cy5kcmF3VHVubmVsID0gZHJhd1R1bm5lbDtcbmV4cG9ydHMuZHJhd1N0YXJzID0gZHJhd1N0YXJzO1xuY29uc3QgdHJhbnNwYXJlbmN5XzEgPSByZXF1aXJlKFwibWFpbi92ZngvdHJhbnNwYXJlbmN5XCIpO1xuY29uc3QgbWFpbl8xID0gcmVxdWlyZShcIi4uL21haW4vbWFpblwiKTtcbmNvbnN0IHJlbmRlcl8xID0gcmVxdWlyZShcIi4uL21haW4vcmVuZGVyXCIpO1xuY29uc3QgYWN0aXZlU3RhZ2VfMSA9IHJlcXVpcmUoXCIuLi9zdGFnZXMvYWN0aXZlU3RhZ2VcIik7XG5jb25zdCBWZWMyRF8xID0gcmVxdWlyZShcIi4uL21haW4vdXRpbC9WZWMyRFwiKTtcbmNvbnN0IGxpbkFsZ18xID0gcmVxdWlyZShcIi4uL21haW4vbGluQWxnXCIpO1xuY29uc3QgYmdQb3MgPSBbWy0zMCwgNTAwLCAzMDAsIDUwMCwgOTAwLCA1MDAsIDEyMzAsIDQ1MCwgMzU4XSwgWy0zMCwgNDAwLCAzMDAsIDQwMCwgOTAwLCA0MDAsIDEyMzAsIDM1MCwgMTc5XV07XG5jb25zdCBkaXJlY3Rpb24gPSBbWzEsIC0xLCAxLCAtMSwgMSwgLTEsIDEsIC0xLCAxXSwgWy0xLCAxLCAtMSwgMSwgLTEsIDEsIC0xLCAxLCAtMV1dO1xuZXhwb3J0cy5ib3hGaWxsID0gXCJyZ2JhKDAsIDAsIDAsIDAuMSlcIjtcbmV4cG9ydHMuYm94RmlsbEJHID0gXCJyZ2JhKDAsIDAsIDAsIDAuMSlcIjtcbmNvbnN0IGJnU3RhcnMgPSBbXTtcbmZvciAobGV0IHAgPSAwOyBwIDwgMjA7IHArKykge1xuICAgIGJnU3RhcnNbcF0gPSBuZXcgQmdTdGFyKCk7XG4gICAgYmdTdGFyc1twXS5wb3MgPSBuZXcgVmVjMkRfMS5WZWMyRCg2MDAgKyAxMDAgKiBNYXRoLnJhbmRvbSgpICogYmdTdGFyc1twXS52ZWxvY2l0eS54LCAzNzUgKyAxMDAgKiBNYXRoLnJhbmRvbSgpICogYmdTdGFyc1twXS52ZWxvY2l0eS55KTtcbn1cbmxldCBiZ1NwYXJrbGUgPSAzO1xuY29uc3QgZ3JpZEdyYWQgPSBcInJnYmEoOTQsMTczLDI1NSwwLjIpXCI7XG5jb25zdCBjaXJjbGVTaXplID0gW107XG5mb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgIGNpcmNsZVNpemVbaV0gPSBpICogNDA7XG59XG5sZXQgYW5nID0gMDtcbmV4cG9ydHMuYmFja2dyb3VuZFR5cGUgPSAwO1xuY29uc3Qgc2NhbmR5cGF0dGVybiA9IG5ldyBJbWFnZSgpO1xuc2NhbmR5cGF0dGVybi5zcmMgPSBcImFzc2V0cy9jaHJpc3RtYXMvc2NhbmR5cGF0dGVybi5wbmdcIjtcbmNvbnN0IGZhYnJpYyA9IG5ldyBJbWFnZSgpO1xuZmFicmljLnNyYyA9IFwiYXNzZXRzL2NocmlzdG1hcy9mYWJyaWMucG5nXCI7XG5jb25zdCByYW5kYWxsID0gW25ldyBJbWFnZSgpLCBuZXcgSW1hZ2UoKSwgbmV3IEltYWdlKCldO1xucmFuZGFsbFswXS5zcmMgPSBcImFzc2V0cy9zdGFnZS9yYW5kYWxsMS5wbmdcIjtcbnJhbmRhbGxbMV0uc3JjID0gXCJhc3NldHMvc3RhZ2UvcmFuZGFsbDIucG5nXCI7XG5yYW5kYWxsWzJdLnNyYyA9IFwiYXNzZXRzL3N0YWdlL3JhbmRhbGwzLnBuZ1wiO1xubGV0IHJhbmRhbGxUaW1lciA9IDA7XG5mdW5jdGlvbiBkcmF3U3RhZ2VJbml0KCkge1xuICAgIG1haW5fMS5mZzEuc3Ryb2tlU3R5bGUgPSBcIiNkYjgwY2NcIjtcbiAgICBtYWluXzEuZmcxLmxpbmVXaWR0aCA9IDE7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmdyb3VuZC5sZW5ndGg7IGorKykge1xuICAgICAgICBtYWluXzEuZmcxLmJlZ2luUGF0aCgpO1xuICAgICAgICBtYWluXzEuZmcxLm1vdmVUbygoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5ncm91bmRbal1bMF0ueCAqIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0sIChhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmdyb3VuZFtqXVswXS55ICogLWFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICBtYWluXzEuZmcxLmxpbmVUbygoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5ncm91bmRbal1bMV0ueCAqIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0sIChhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmdyb3VuZFtqXVsxXS55ICogLWFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICBtYWluXzEuZmcxLmNsb3NlUGF0aCgpO1xuICAgICAgICBtYWluXzEuZmcxLnN0cm9rZSgpO1xuICAgIH1cbiAgICBtYWluXzEuZmcxLnN0cm9rZVN0eWxlID0gXCIjZWQ2NzY3XCI7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmNlaWxpbmcubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgbWFpbl8xLmZnMS5iZWdpblBhdGgoKTtcbiAgICAgICAgbWFpbl8xLmZnMS5tb3ZlVG8oKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuY2VpbGluZ1tqXVswXS54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFswXSwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuY2VpbGluZ1tqXVswXS55ICogLWFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICBtYWluXzEuZmcxLmxpbmVUbygoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5jZWlsaW5nW2pdWzFdLnggKiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzBdLCAoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5jZWlsaW5nW2pdWzFdLnkgKiAtYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFsxXSk7XG4gICAgICAgIG1haW5fMS5mZzEuY2xvc2VQYXRoKCk7XG4gICAgICAgIG1haW5fMS5mZzEuc3Ryb2tlKCk7XG4gICAgfVxuICAgIG1haW5fMS5mZzEuc3Ryb2tlU3R5bGUgPSBcIiM0Nzk0YzZcIjtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucGxhdGZvcm0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UubW92aW5nUGxhdHMgPT09IG51bGwgfHwgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5tb3ZpbmdQbGF0cyA9PT0gdW5kZWZpbmVkIHx8IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UubW92aW5nUGxhdHMuaW5kZXhPZihqKSA9PT0gLTEpIHsgLy8gbm90IGEgbW92aW5nIHBsYXRmb3JtXG4gICAgICAgICAgICBtYWluXzEuZmcxLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgbWFpbl8xLmZnMS5tb3ZlVG8oKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucGxhdGZvcm1bal1bMF0ueCAqIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0sIChhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnBsYXRmb3JtW2pdWzBdLnkgKiAtYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFsxXSk7XG4gICAgICAgICAgICBtYWluXzEuZmcxLmxpbmVUbygoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5wbGF0Zm9ybVtqXVsxXS54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFswXSwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucGxhdGZvcm1bal1bMV0ueSAqIC1hY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdKTtcbiAgICAgICAgICAgIG1haW5fMS5mZzEuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBtYWluXzEuZmcxLnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1haW5fMS5mZzEuc3Ryb2tlU3R5bGUgPSBcIiM0N2M2NDhcIjtcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uud2FsbEwubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgbWFpbl8xLmZnMS5iZWdpblBhdGgoKTtcbiAgICAgICAgbWFpbl8xLmZnMS5tb3ZlVG8oKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uud2FsbExba11bMF0ueCAqIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0sIChhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLndhbGxMW2tdWzBdLnkgKiAtYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFsxXSk7XG4gICAgICAgIG1haW5fMS5mZzEubGluZVRvKChhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLndhbGxMW2tdWzFdLnggKiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzBdLCAoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS53YWxsTFtrXVsxXS55ICogLWFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICBtYWluXzEuZmcxLmNsb3NlUGF0aCgpO1xuICAgICAgICBtYWluXzEuZmcxLnN0cm9rZSgpO1xuICAgIH1cbiAgICBtYWluXzEuZmcxLnN0cm9rZVN0eWxlID0gXCIjOTg2N2RlXCI7XG4gICAgZm9yIChsZXQgbCA9IDA7IGwgPCBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLndhbGxSLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgIG1haW5fMS5mZzEuYmVnaW5QYXRoKCk7XG4gICAgICAgIG1haW5fMS5mZzEubW92ZVRvKChhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLndhbGxSW2xdWzBdLnggKiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzBdLCAoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS53YWxsUltsXVswXS55ICogLWFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICBtYWluXzEuZmcxLmxpbmVUbygoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS53YWxsUltsXVsxXS54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFswXSwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uud2FsbFJbbF1bMV0ueSAqIC1hY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdKTtcbiAgICAgICAgbWFpbl8xLmZnMS5jbG9zZVBhdGgoKTtcbiAgICAgICAgbWFpbl8xLmZnMS5zdHJva2UoKTtcbiAgICB9XG4gICAgbWFpbl8xLmZnMS5zdHJva2VTdHlsZSA9IFwiI0U3QTQ0Q1wiO1xuICAgIG1haW5fMS5mZzEubGluZVdpZHRoID0gMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UubGVkZ2UubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZSA9IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UubGVkZ2VbaV07XG4gICAgICAgIGNvbnN0IHBBID0gYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZVtlWzBdXVtlWzFdXVtlWzJdXTtcbiAgICAgICAgY29uc3QgcEIgPSBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlW2VbMF1dW2VbMV1dWzEgLSBlWzJdXTtcbiAgICAgICAgY29uc3QgYW5nID0gTWF0aC5hdGFuMigocEIueSAtIHBBLnkpLCAocEIueCAtIHBBLngpKTtcbiAgICAgICAgY29uc3QgbWFnbml0dWRlID0gKDAsIGxpbkFsZ18xLmV1Y2xpZGVhbkRpc3QpKHBBLCBwQik7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWluKDAuNCAqIG1hZ25pdHVkZSwgMjAgLyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKTtcbiAgICAgICAgY29uc3QgcEMgPSBuZXcgVmVjMkRfMS5WZWMyRChwQS54ICsgbGVuZ3RoICogTWF0aC5jb3MoYW5nKSwgcEEueSArIGxlbmd0aCAqIE1hdGguc2luKGFuZykpO1xuICAgICAgICBtYWluXzEuZmcxLmJlZ2luUGF0aCgpO1xuICAgICAgICBtYWluXzEuZmcxLm1vdmVUbygocEEueCAqIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0sIChwQS55ICogLWFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICBtYWluXzEuZmcxLmxpbmVUbygocEMueCAqIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0sIChwQy55ICogLWFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICBtYWluXzEuZmcxLmNsb3NlUGF0aCgpO1xuICAgICAgICBtYWluXzEuZmcxLnN0cm9rZSgpO1xuICAgIH1cbn1cbjtcbmNvbnN0IHN3aXJsVGltZXIgPSAwO1xuY29uc3Qgc3dpcmxTd2l0Y2ggPSBmYWxzZTtcbmNvbnN0IHdhbGxDb2xvdXIgPSBbXCJyZ2IoMjU1LDAsNDApXCIsIFwicmdiKDAsMjU1LDI1NSlcIiwgXCJyZ2IoMTI1LDEyNSwxMjUpXCIsIFwicmdiKDEyNSw1MCwyNTUpXCJdO1xuZnVuY3Rpb24gd2FsbENvbG91ckZyb21EYW1hZ2VUeXBlKGRhbWFnZVR5cGUpIHtcbiAgICBpZiAoZGFtYWdlVHlwZSA9PT0gXCJmaXJlXCIpIHtcbiAgICAgICAgcmV0dXJuIHdhbGxDb2xvdXJbMF07XG4gICAgfVxuICAgIGVsc2UgaWYgKGRhbWFnZVR5cGUgPT09IFwiZWxlY3RyaWNcIikge1xuICAgICAgICByZXR1cm4gd2FsbENvbG91clsxXTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZGFtYWdlVHlwZSA9PT0gXCJzbGFzaFwiKSB7XG4gICAgICAgIHJldHVybiB3YWxsQ29sb3VyWzJdO1xuICAgIH1cbiAgICBlbHNlIGlmIChkYW1hZ2VUeXBlID09PSBcImRhcmtuZXNzXCIpIHtcbiAgICAgICAgcmV0dXJuIHdhbGxDb2xvdXJbM107XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJyZ2IoMCw1MCwxODApXCI7XG4gICAgfVxufVxuO1xubGV0IHdhbGxDeWNsZSA9IDA7XG5mdW5jdGlvbiBjYWxjdWxhdGVEYW1hZ2VXYWxsQ29sb3VycygpIHtcbiAgICBsZXQgYSA9IDA7XG4gICAgaWYgKHdhbGxDeWNsZSA8IDI0MCkge1xuICAgICAgICB3YWxsQ3ljbGUrKztcbiAgICAgICAgaWYgKHdhbGxDeWNsZSA+IDEyMCkge1xuICAgICAgICAgICAgYSA9IDI0MCAtIHdhbGxDeWNsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGEgPSB3YWxsQ3ljbGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHdhbGxDeWNsZSA9IDA7XG4gICAgfVxuICAgIGNvbnN0IG4gPSBNYXRoLnJvdW5kKDI1NSAqIGEgLyAxMjApO1xuICAgIHdhbGxDb2xvdXJbMF0gPSBcInJnYigyNTUsXCIgKyBuICsgXCIsNDApXCI7XG4gICAgd2FsbENvbG91clsxXSA9IFwicmdiKFwiICsgbiArIFwiLDI1NSwyNTUpXCI7XG4gICAgY29uc3QgbSA9IE1hdGgucm91bmQoMTI1ICsgbiAvIDIpO1xuICAgIHdhbGxDb2xvdXJbMl0gPSBcInJnYihcIiArIG0gKyBcIixcIiArIG0gKyBcIixcIiArIG0gKyBcIilcIjtcbiAgICB3YWxsQ29sb3VyWzNdID0gXCJyZ2IoXCIgKyBNYXRoLnJvdW5kKDEyNSAtIG4gLyAzKSArIFwiLDUwLFwiICsgTWF0aC5yb3VuZCgyNTUgLSBuIC8gMykgKyBcIilcIjtcbn1cbmZ1bmN0aW9uIGRyYXdEYW1hZ2VMaW5lKHR5cGUsIGNhbiwgc3RhZ2UpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YWdlW3R5cGVdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN1cmZhY2VQcm9wZXJ0aWVzID0gc3RhZ2VbdHlwZV1baV1bMl07XG4gICAgICAgIGlmIChzdXJmYWNlUHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIHN1cmZhY2VQcm9wZXJ0aWVzLmRhbWFnZVR5cGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNhbi5zdHJva2VTdHlsZSA9IHdhbGxDb2xvdXJGcm9tRGFtYWdlVHlwZShzdXJmYWNlUHJvcGVydGllcy5kYW1hZ2VUeXBlKTtcbiAgICAgICAgICAgIGNhbi5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGNhbi5tb3ZlVG8oKHN0YWdlW3R5cGVdW2ldWzBdLnggKiBzdGFnZS5zY2FsZSkgKyBzdGFnZS5vZmZzZXRbMF0sIChzdGFnZVt0eXBlXVtpXVswXS55ICogLXN0YWdlLnNjYWxlKSArIHN0YWdlLm9mZnNldFsxXSk7XG4gICAgICAgICAgICBjYW4ubGluZVRvKChzdGFnZVt0eXBlXVtpXVsxXS54ICogc3RhZ2Uuc2NhbGUpICsgc3RhZ2Uub2Zmc2V0WzBdLCAoc3RhZ2VbdHlwZV1baV1bMV0ueSAqIC1zdGFnZS5zY2FsZSkgKyBzdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICAgICAgY2FuLnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gZHJhd1N0YWdlKCkge1xuICAgIGNhbGN1bGF0ZURhbWFnZVdhbGxDb2xvdXJzKCk7XG4gICAgaWYgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UubmFtZSA9PT0gXCJ5c3RvcnlcIikge1xuICAgICAgICAvLyBSYW5kYWxsXG4gICAgICAgIHJhbmRhbGxUaW1lcisrO1xuICAgICAgICBpZiAocmFuZGFsbFRpbWVyID09PSAzMCkge1xuICAgICAgICAgICAgcmFuZGFsbFRpbWVyID0gMDtcbiAgICAgICAgfVxuICAgICAgICBtYWluXzEuYmcyLmRyYXdJbWFnZShyYW5kYWxsW01hdGguZmxvb3IocmFuZGFsbFRpbWVyIC8gMTApXSwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucGxhdGZvcm1bMF1bMF0ueCAqIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUpICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0gLSAyMCwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucGxhdGZvcm1bMF1bMF0ueSAqIC1hY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdIC0gMjAsIDEwMCwgMTAwKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5tb3ZpbmdQbGF0cyAhPT0gbnVsbCAmJiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm1vdmluZ1BsYXRzICE9PSB1bmRlZmluZWQgJiYgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5tb3ZpbmdQbGF0cy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgbWFpbl8xLmZnMi5zdHJva2VTdHlsZSA9IFwiIzQ3OTRjNlwiO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UubW92aW5nUGxhdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm5hbWUgIT09IFwiZm91bnRhaW5cIiB8fCBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnBsYXRmb3JtW2FjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UubW92aW5nUGxhdHNbaV1dWzBdLnkgPiAwKSB7XG4gICAgICAgICAgICAgICAgbWFpbl8xLmZnMi5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICBtYWluXzEuZmcyLm1vdmVUbygoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5wbGF0Zm9ybVthY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm1vdmluZ1BsYXRzW2ldXVswXS54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFswXSwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucGxhdGZvcm1bYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5tb3ZpbmdQbGF0c1tpXV1bMF0ueSAqIC1hY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdKTtcbiAgICAgICAgICAgICAgICBtYWluXzEuZmcyLmxpbmVUbygoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5wbGF0Zm9ybVthY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm1vdmluZ1BsYXRzW2ldXVsxXS54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFswXSwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucGxhdGZvcm1bYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5tb3ZpbmdQbGF0c1tpXV1bMV0ueSAqIC1hY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdKTtcbiAgICAgICAgICAgICAgICBtYWluXzEuZmcyLmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgICAgIG1haW5fMS5mZzIuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWFpbl8xLmZnMi5maWxsU3R5bGUgPSBleHBvcnRzLmJveEZpbGw7XG4gICAgaWYgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuYm94ICE9PSBudWxsICYmIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuYm94ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmJveC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgbWFpbl8xLmZnMi5maWxsUmVjdCgoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5ib3hbal0ubWluLnggKiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlKSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzBdLCAoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5ib3hbal0ubWF4LnkgKiAtYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSkgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFsxXSwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuYm94W2pdLm1heC54IC0gYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5ib3hbal0ubWluLngpICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSwgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuYm94W2pdLm1heC55IC0gYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5ib3hbal0ubWluLnkpICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucG9seWdvbiAhPT0gbnVsbCAmJiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnBvbHlnb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucG9seWdvbi5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgcCA9IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UucG9seWdvbltqXTtcbiAgICAgICAgICAgIG1haW5fMS5mZzIuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBtYWluXzEuZmcyLm1vdmVUbyhwWzBdLnggKiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0sIHBbMF0ueSAqIC1hY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMV0pO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDE7IG4gPCBwLmxlbmd0aDsgbisrKSB7XG4gICAgICAgICAgICAgICAgbWFpbl8xLmZnMi5saW5lVG8ocFtuXS54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzBdLCBwW25dLnkgKiAtYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1haW5fMS5mZzIuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBtYWluXzEuZmcyLmZpbGwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5iYWNrZ3JvdW5kICE9PSBudWxsICYmIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuYmFja2dyb3VuZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmJhY2tncm91bmQucG9seWdvbiAhPT0gbnVsbCAmJiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmJhY2tncm91bmQucG9seWdvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBtYWluXzEuYmcyLnNhdmUoKTtcbiAgICAgICAgICAgIG1haW5fMS5iZzIuZmlsbFN0eWxlID0gZXhwb3J0cy5ib3hGaWxsQkc7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuYmFja2dyb3VuZC5wb2x5Z29uLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcCA9IGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2UuYmFja2dyb3VuZC5wb2x5Z29uW2ldO1xuICAgICAgICAgICAgICAgIG1haW5fMS5iZzIuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgbWFpbl8xLmJnMi5tb3ZlVG8ocFswXS54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzBdLCBwWzBdLnkgKiAtYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuID0gMTsgbiA8IHAubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbWFpbl8xLmJnMi5saW5lVG8ocFtuXS54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzBdLCBwW25dLnkgKiAtYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWFpbl8xLmJnMi5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgICBtYWluXzEuYmcyLmZpbGwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5iYWNrZ3JvdW5kLmxpbmUgIT09IG51bGwgJiYgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5iYWNrZ3JvdW5kLmxpbmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgbWFpbl8xLmJnMi5saW5lV2lkdGggPSAzO1xuICAgICAgICAgICAgbWFpbl8xLmJnMi5zdHJva2VTdHlsZSA9IGV4cG9ydHMuYm94RmlsbEJHO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmJhY2tncm91bmQubGluZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxMID0gYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5iYWNrZ3JvdW5kLmxpbmVbaV1bMF07XG4gICAgICAgICAgICAgICAgY29uc3QgbFIgPSBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLmJhY2tncm91bmQubGluZVtpXVsxXTtcbiAgICAgICAgICAgICAgICBtYWluXzEuYmcyLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIG1haW5fMS5iZzIubW92ZVRvKGxMLnggKiBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnNjYWxlICsgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5vZmZzZXRbMF0sIGxMLnkgKiAtYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzFdKTtcbiAgICAgICAgICAgICAgICBtYWluXzEuYmcyLmxpbmVUbyhsUi54ICogYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZS5zY2FsZSArIGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uub2Zmc2V0WzBdLCBsUi55ICogLWFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc2NhbGUgKyBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLm9mZnNldFsxXSk7XG4gICAgICAgICAgICAgICAgbWFpbl8xLmJnMi5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgICBtYWluXzEuYmcyLnN0cm9rZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWFpbl8xLmJnMi5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWFpbl8xLmZnMi5saW5lV2lkdGggPSA0O1xuICAgIGNvbnN0IHR5cGVzID0gW1wid2FsbExcIiwgXCJ3YWxsUlwiLCBcImdyb3VuZFwiLCBcImNlaWxpbmdcIl07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBkcmF3RGFtYWdlTGluZSh0eXBlc1tpXSwgbWFpbl8xLmZnMiwgYWN0aXZlU3RhZ2VfMS5hY3RpdmVTdGFnZSk7XG4gICAgfVxuICAgIG1haW5fMS5mZzIuc3Ryb2tlU3R5bGUgPSBcIiNlN2E0NGNcIjtcbiAgICBjb25zdCBleCA9IDA7XG59XG47XG5mdW5jdGlvbiBzZXRCYWNrZ3JvdW5kVHlwZSh2YWwpIHtcbiAgICBleHBvcnRzLmJhY2tncm91bmRUeXBlID0gdmFsO1xufVxuO1xuY2xhc3MgQmdTdGFyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgY29uc3QgdlNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gbmV3IFZlYzJEXzEuVmVjMkQoNSAqIHZTZWVkICogTWF0aC5zaWduKDAuNSAtIE1hdGgucmFuZG9tKCkpLCA1ICogKDEgLSB2U2VlZCkgKiBNYXRoLnNpZ24oMC41IC0gTWF0aC5yYW5kb20oKSkpO1xuICAgICAgICBpZiAoKDAsIHRyYW5zcGFyZW5jeV8xLmdldFRyYW5zcGFyZW5jeSkoKSkge1xuICAgICAgICAgICAgdGhpcy5jb2xvdXIgPSBcImhzbChcIiArIDM1OCAqIE1hdGgucmFuZG9tKCkgKyBcIiwgMTAwJSwgNTAlKVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb2xvdXIgPSBcImhzbChcIiArIDM1OCAqIE1hdGgucmFuZG9tKCkgKyBcIiwxMDAlLDE1JSlcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcyA9IG5ldyBWZWMyRF8xLlZlYzJEKDAsIDApO1xuICAgICAgICB0aGlzLmxpZmUgPSAwO1xuICAgIH1cbn1cbmV4cG9ydHMuQmdTdGFyID0gQmdTdGFyO1xuO1xuZnVuY3Rpb24gZHJhd0JhY2tncm91bmRJbml0KCkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZDtcbiAgICBjb25zdCBiZ0dyYWQgPSBtYWluXzEuYmcxLmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIDUwMCk7XG4gICAgYmdHcmFkLmFkZENvbG9yU3RvcCgwLCBcInJnYigyNCwgMTcsIDY2KVwiKTtcbiAgICBiZ0dyYWQuYWRkQ29sb3JTdG9wKDEsIFwiYmxhY2tcIik7XG4gICAgbWFpbl8xLmJnMS5maWxsU3R5bGUgPSBiZ0dyYWQ7XG4gICAgbWFpbl8xLmJnMS5maWxsUmVjdCgtMTAwLCAtMTAwLCAoX2IgPSAoX2EgPSBtYWluXzEubGF5ZXJzID09PSBudWxsIHx8IG1haW5fMS5sYXllcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1haW5fMS5sYXllcnMuQkcxKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud2lkdGgpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDAgKyAyMDAsIChfZCA9IChfYyA9IG1haW5fMS5sYXllcnMgPT09IG51bGwgfHwgbWFpbl8xLmxheWVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWFpbl8xLmxheWVycy5CRzEpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5oZWlnaHQpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IDAgKyAyMDApO1xuICAgIDtcbn1cbjtcbmZ1bmN0aW9uIGRyYXdCYWNrZ3JvdW5kKCkge1xuICAgIGlmIChleHBvcnRzLmJhY2tncm91bmRUeXBlID09PSAwKSB7XG4gICAgICAgIGRyYXdTdGFycygpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZHJhd1R1bm5lbCgpO1xuICAgIH1cbn1cbjtcbmZ1bmN0aW9uIGRyYXdUdW5uZWwoKSB7XG4gICAgbWFpbl8xLmJnMi5saW5lV2lkdGggPSAyO1xuICAgIGFuZyArPSAwLjAwNTtcbiAgICBsZXQgYW5nQiA9IGFuZztcbiAgICBtYWluXzEuYmcyLmJlZ2luUGF0aCgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgICBjb25zdCB2ID0gKDAsIHJlbmRlcl8xLnJvdGF0ZVZlY3RvcikoMCwgODAwLCBhbmdCKTtcbiAgICAgICAgbWFpbl8xLmJnMi5tb3ZlVG8oNjAwLCAzNzUpO1xuICAgICAgICBtYWluXzEuYmcyLmxpbmVUbyg2MDAgKyB2LngsIDM3NSArIHYueSk7XG4gICAgICAgIGFuZ0IgKz0gTWF0aC5QSSAvIDg7XG4gICAgfVxuICAgIG1haW5fMS5iZzIuc3Ryb2tlKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaXJjbGVTaXplLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNpcmNsZVNpemVbaV0rKztcbiAgICAgICAgaWYgKGNpcmNsZVNpemVbaV0gPiAyMDApIHtcbiAgICAgICAgICAgIGNpcmNsZVNpemVbaV0gPSAwO1xuICAgICAgICB9XG4gICAgICAgIG1haW5fMS5iZzIubGluZVdpZHRoID0gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZCgzICogKGNpcmNsZVNpemVbaV0gLyA2MCkpKTtcbiAgICAgICAgbWFpbl8xLmJnMi5iZWdpblBhdGgoKTtcbiAgICAgICAgbWFpbl8xLmJnMi5hcmMoNjAwLCAzNzUsIGNpcmNsZVNpemVbaV0gKiA0LCAwLCByZW5kZXJfMS50d29QaSk7XG4gICAgICAgIG1haW5fMS5iZzIuY2xvc2VQYXRoKCk7XG4gICAgICAgIG1haW5fMS5iZzIuc3Ryb2tlKCk7XG4gICAgfVxufVxuO1xuZnVuY3Rpb24gZHJhd1N0YXJzKCkge1xuICAgIGJnU3BhcmtsZS0tO1xuICAgIGZvciAobGV0IHAgPSAwOyBwIDwgMjA7IHArKykge1xuICAgICAgICBpZiAoYmdTdGFyc1twXS5wb3MueCA+IDEyNTAgfHwgYmdTdGFyc1twXS5wb3MueSA+IDgwMCB8fCBiZ1N0YXJzW3BdLnBvcy54IDwgLTUwIHx8IGJnU3RhcnNbcF0ucG9zLnkgPCAtNTApIHtcbiAgICAgICAgICAgIGJnU3RhcnNbcF0ucG9zID0gbmV3IFZlYzJEXzEuVmVjMkQoNjAwLCAzNzUpO1xuICAgICAgICAgICAgYmdTdGFyc1twXS5saWZlID0gMDtcbiAgICAgICAgICAgIGNvbnN0IHZTZWVkID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgICAgIGJnU3RhcnNbcF0udmVsb2NpdHkgPSBuZXcgVmVjMkRfMS5WZWMyRCg1ICogdlNlZWQgKiBNYXRoLnNpZ24oMC41IC0gTWF0aC5yYW5kb20oKSksIDUgKiAoMSAtIHZTZWVkKSAqIE1hdGguc2lnbigwLjUgLSBNYXRoLnJhbmRvbSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgYmdTdGFyc1twXS5wb3MueCArPSBiZ1N0YXJzW3BdLnZlbG9jaXR5Lng7XG4gICAgICAgIGJnU3RhcnNbcF0ucG9zLnkgKz0gYmdTdGFyc1twXS52ZWxvY2l0eS55O1xuICAgICAgICBiZ1N0YXJzW3BdLmxpZmUrKztcbiAgICAgICAgaWYgKGJnU3BhcmtsZSA9PT0gMCkge1xuICAgICAgICAgICAgbWFpbl8xLmJnMi5maWxsU3R5bGUgPSBiZ1N0YXJzW3BdLmNvbG91cjtcbiAgICAgICAgICAgIGlmICgoMCwgdHJhbnNwYXJlbmN5XzEuZ2V0VHJhbnNwYXJlbmN5KSgpKSB7XG4gICAgICAgICAgICAgICAgbWFpbl8xLmJnMi5nbG9iYWxBbHBoYSA9IE1hdGgubWluKGJnU3RhcnNbcF0ubGlmZSAvIDMwMCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtYWluXzEuYmcyLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgbWFpbl8xLmJnMi5hcmMoYmdTdGFyc1twXS5wb3MueCwgYmdTdGFyc1twXS5wb3MueSwgNSwgcmVuZGVyXzEudHdvUGksIDApO1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgbWFpbl8xLmJnMi5maWxsKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGJnU3BhcmtsZSA9PT0gMCkge1xuICAgICAgICBiZ1NwYXJrbGUgPSAyO1xuICAgIH1cbiAgICBtYWluXzEuYmcyLmdsb2JhbEFscGhhID0gMTtcbiAgICBmb3IgKGxldCBrID0gMTsgayA+IC0xOyBrLS0pIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA5OyBqKyspIHtcbiAgICAgICAgICAgIC8vYmdQb3Nbal0gKz0gZGlyZWN0aW9uW2pdKjUqTWF0aC5yYW5kb20oKTtcbiAgICAgICAgICAgIGlmIChqID09PSA4KSB7XG4gICAgICAgICAgICAgICAgYmdQb3Nba11bal0gKz0gZGlyZWN0aW9uW2tdW2pdICogMC4yICogTWF0aC5yYW5kb20oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJnUG9zW2tdW2pdICs9IGRpcmVjdGlvbltrXVtqXSAqIDEgKiBNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChqKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBpZiAoKGRpcmVjdGlvbltrXVtqXSA9PT0gMSAmJiBiZ1Bvc1trXVtqXSA+IC0xMCkgfHwgKGRpcmVjdGlvbltrXVtqXSA9PT0gLTEgJiYgYmdQb3Nba11bal0gPCAtMjAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uW2tdW2pdICo9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKChkaXJlY3Rpb25ba11bal0gPT09IDEgJiYgYmdQb3Nba11bal0gPiA1NTAgLSBrICogMTAwKSB8fCAoZGlyZWN0aW9uW2tdW2pdID09PSAtMSAmJiBiZ1Bvc1trXVtqXSA8IDQ1MCAtIGsgKiAxMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25ba11bal0gKj0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBpZiAoKGRpcmVjdGlvbltrXVtqXSA9PT0gMSAmJiBiZ1Bvc1trXVtqXSA+IDU1MCkgfHwgKGRpcmVjdGlvbltrXVtqXSA9PT0gLTEgJiYgYmdQb3Nba11bal0gPCAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uW2tdW2pdICo9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKChkaXJlY3Rpb25ba11bal0gPT09IDEgJiYgYmdQb3Nba11bal0gPiA1NTAgLSBrICogMTAwKSB8fCAoZGlyZWN0aW9uW2tdW2pdID09PSAtMSAmJiBiZ1Bvc1trXVtqXSA8IDQ1MCAtIGsgKiAxMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25ba11bal0gKj0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoKGRpcmVjdGlvbltrXVtqXSA9PT0gMSAmJiBiZ1Bvc1trXVtqXSA+IDExNTApIHx8IChkaXJlY3Rpb25ba11bal0gPT09IC0xICYmIGJnUG9zW2tdW2pdIDwgNjAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uW2tdW2pdICo9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKChkaXJlY3Rpb25ba11bal0gPT09IDEgJiYgYmdQb3Nba11bal0gPiA1NTAgLSBrICogMTAwKSB8fCAoZGlyZWN0aW9uW2tdW2pdID09PSAtMSAmJiBiZ1Bvc1trXVtqXSA8IDQ1MCAtIGsgKiAxMDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb25ba11bal0gKj0gLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICBpZiAoKGRpcmVjdGlvbltrXVtqXSA9PT0gMSAmJiBiZ1Bvc1trXVtqXSA+IDE0MDApIHx8IChkaXJlY3Rpb25ba11bal0gPT09IC0xICYmIGJnUG9zW2tdW2pdIDwgMTIxMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbltrXVtqXSAqPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZGlyZWN0aW9uW2tdW2pdID09PSAxICYmIGJnUG9zW2tdW2pdID4gNTUwIC0gayAqIDEwMCkgfHwgKGRpcmVjdGlvbltrXVtqXSA9PT0gLTEgJiYgYmdQb3Nba11bal0gPCA0NTAgLSBrICogMTAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uW2tdW2pdICo9IC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgICAgICAgICAgaWYgKChkaXJlY3Rpb25ba11bal0gPT09IDEgJiYgYmdQb3Nba11bal0gPiAzNTcpIHx8IChkaXJlY3Rpb25ba11bal0gPT09IC0xICYmIGJnUG9zW2tdW2pdIDwgMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbltrXVtqXSAqPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoKDAsIHRyYW5zcGFyZW5jeV8xLmdldFRyYW5zcGFyZW5jeSkoKSkge1xuICAgICAgICAgICAgZXhwb3J0cy5ib3hGaWxsID0gXCJoc2xhKFwiICsgYmdQb3Nba11bOF0gKyBcIiwgMTAwJSwgNTAlLCBcIiArICgwLjE1IC0gayAqIDAuMDcpICsgXCIpXCI7XG4gICAgICAgICAgICBleHBvcnRzLmJveEZpbGxCRyA9IFwiaHNsYShcIiArIGJnUG9zW2tdWzhdICsgXCIsIDEwMCUsIDUwJSwgXCIgKyAoMC4xMyAtIGsgKiAwLjA3KSArIFwiKVwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXhwb3J0cy5ib3hGaWxsID0gXCJoc2woXCIgKyBiZ1Bvc1trXVs4XSArIFwiLCAxMDAlLCA3JSlcIjtcbiAgICAgICAgICAgIGV4cG9ydHMuYm94RmlsbEJHID0gXCJoc2woXCIgKyBiZ1Bvc1trXVs4XSArIFwiLCA1MCUsIDclKVwiO1xuICAgICAgICB9XG4gICAgICAgIG1haW5fMS5iZzIuZmlsbFN0eWxlID0gZXhwb3J0cy5ib3hGaWxsO1xuICAgICAgICBtYWluXzEuYmcyLmJlZ2luUGF0aCgpO1xuICAgICAgICBtYWluXzEuYmcyLm1vdmVUbyhiZ1Bvc1trXVswXSwgYmdQb3Nba11bMV0pO1xuICAgICAgICBtYWluXzEuYmcyLmJlemllckN1cnZlVG8oYmdQb3Nba11bMl0sIGJnUG9zW2tdWzNdLCBiZ1Bvc1trXVs0XSwgYmdQb3Nba11bNV0sIGJnUG9zW2tdWzZdLCBiZ1Bvc1trXVs3XSk7XG4gICAgICAgIGlmIChrID09PSAxKSB7XG4gICAgICAgICAgICBtYWluXzEuYmcyLmxpbmVUbyhiZ1Bvc1swXVs2XSwgYmdQb3NbMF1bN10pO1xuICAgICAgICAgICAgbWFpbl8xLmJnMi5iZXppZXJDdXJ2ZVRvKGJnUG9zWzBdWzRdLCBiZ1Bvc1swXVs1XSwgYmdQb3NbMF1bMl0sIGJnUG9zWzBdWzNdLCBiZ1Bvc1swXVswXSwgYmdQb3NbMF1bMV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWFpbl8xLmJnMi5saW5lVG8oMTIwMCwgNzUwKTtcbiAgICAgICAgICAgIG1haW5fMS5iZzIubGluZVRvKDAsIDc1MCk7XG4gICAgICAgIH1cbiAgICAgICAgbWFpbl8xLmJnMi5jbG9zZVBhdGgoKTtcbiAgICAgICAgbWFpbl8xLmJnMi5maWxsKCk7XG4gICAgfVxufVxuO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/stages/stagerender.ts\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("2b29f7e7072498bb9ca7")
/******/ })();
/******/ 
/******/ }
);