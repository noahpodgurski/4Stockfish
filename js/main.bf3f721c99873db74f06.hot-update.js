"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdatemeleelight"]("main",{

/***/ "./src/main/main.ts":
/*!**************************!*\
  !*** ./src/main/main.ts ***!
  \**************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.blastzone = exports.stageSelect = exports.respawnPoints = exports.edgeOrientation = exports.edgeOffset = exports.edges = exports.wallsR = exports.wallsL = exports.platforms = exports.ground = exports.startingFace = exports.startingPoint = exports.frameAdvance = exports.pause = exports.colours = exports.costumeTimeout = exports.pPal = exports.tagText = exports.hasTag = exports.palettes = exports.randomTags = exports.versusMode = exports.gameMode = exports.showDebug = exports.findingPlayers = exports.frameByFrameRender = exports.wasFrameByFrame = exports.frameByFrame = exports.playing = exports.activePorts = exports.ports = exports.cpuDifficulty = exports.playerType = exports.playerAmount = exports.currentPlayers = exports.mType = exports.firstTimeDetected = exports.usingCustomControls = exports.controllerResetCountdowns = exports.gameEnd = exports.calibrationPlayer = exports.creditsPlayer = exports.shine = exports.characterSelections = exports.framerate = exports.gamelogicTime = exports.renderTime = exports.player = exports.snowCount = exports.holiday = void 0;\nexports.layerSwitches = exports.layers = exports.canvasMain = exports.c = exports.ui = exports.fg2 = exports.fg1 = exports.bg2 = exports.bg1 = exports.keyBinding = exports.keyBind = exports.keys = exports.usingLocalStorage = exports.matchTimer = exports.startTimer = exports.starting = void 0;\nexports.setControllerReset = setControllerReset;\nexports.setUsingCustomControls = setUsingCustomControls;\nexports.setMtype = setMtype;\nexports.setCurrentPlayer = setCurrentPlayer;\nexports.setTagText = setTagText;\nexports.setStageSelect = setStageSelect;\nexports.setStarting = setStarting;\nexports.setStartTimer = setStartTimer;\nexports.getStartTimer = getStartTimer;\nexports.addMatchTimer = addMatchTimer;\nexports.setMatchTimer = setMatchTimer;\nexports.getMatchTimer = getMatchTimer;\nexports.setCookie = setCookie;\nexports.setVersusMode = setVersusMode;\nexports.getCookie = getCookie;\nexports.setKeyBinding = setKeyBinding;\nexports.overrideKeyboardEvent = overrideKeyboardEvent;\nexports.disabledEventPropagation = disabledEventPropagation;\nexports.SVG = SVG;\nexports.matchTimerTick = matchTimerTick;\nexports.screenShake = screenShake;\nexports.percentShake = percentShake;\nexports.findPlayers = findPlayers;\nexports.setPlayerType = setPlayerType;\nexports.addPlayer = addPlayer;\nexports.togglePort = togglePort;\nexports.positionPlayersInCSS = positionPlayersInCSS;\nexports.changeGamemode = changeGamemode;\nexports.interpretInputs = interpretInputs;\nexports.renderToMain = renderToMain;\nexports.update = update;\nexports.gameTick = gameTick;\nexports.clearScreen = clearScreen;\nexports.renderTick = renderTick;\nexports.buildPlayerObject = buildPlayerObject;\nexports.initializePlayers = initializePlayers;\nexports.startGame = startGame;\nexports.endGame = endGame;\nexports.finishGame = finishGame;\nexports.start = start;\nexports.customDeadzone = customDeadzone;\nexports.addShine = addShine;\nexports.setShine = setShine;\nexports.setFindingPlayers = setFindingPlayers;\nexports.setPlaying = setPlaying;\nexports.setCreditsPlayer = setCreditsPlayer;\nexports.setCalibrationPlayer = setCalibrationPlayer;\nexports.cacheDom = cacheDom;\nexports.setCS = setCS;\n/* eslint-disable */\nconst css_1 = __webpack_require__(/*! ../menus/css */ \"./src/menus/css.ts\");\nconst player_1 = __webpack_require__(/*! ../main/player */ \"./src/main/player.ts\");\nconst settings_1 = __webpack_require__(/*! ../settings */ \"./src/settings.ts\");\nconst startup_1 = __webpack_require__(/*! ../menus/startup */ \"./src/menus/startup.ts\");\nconst menu_1 = __webpack_require__(/*! ../menus/menu */ \"./src/menus/menu.ts\");\nconst sfx_1 = __webpack_require__(/*! ../main/sfx */ \"./src/main/sfx.ts\");\nconst startscreen_1 = __webpack_require__(/*! ../menus/startscreen */ \"./src/menus/startscreen.ts\");\nconst stagerender_1 = __webpack_require__(/*! ../stages/stagerender */ \"./src/stages/stagerender.ts\");\nconst stageselect_1 = __webpack_require__(/*! ../menus/stageselect */ \"./src/menus/stageselect.ts\");\nconst audiomenu_1 = __webpack_require__(/*! ../menus/audiomenu */ \"./src/menus/audiomenu.ts\");\nconst gameplaymenu_1 = __webpack_require__(/*! ../menus/gameplaymenu */ \"./src/menus/gameplaymenu.ts\");\nconst keyboardmenu_1 = __webpack_require__(/*! ../menus/keyboardmenu */ \"./src/menus/keyboardmenu.ts\");\nconst controllermenu_1 = __webpack_require__(/*! ../menus/controllermenu */ \"./src/menus/controllermenu.ts\");\nconst credits_1 = __webpack_require__(Object(function webpackMissingModule() { var e = new Error(\"Cannot find module '../menus/credits'\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()));\nconst render_1 = __webpack_require__(/*! ../main/render */ \"./src/main/render.ts\");\nconst actionStateShortcuts_1 = __webpack_require__(/*! ../physics/actionStateShortcuts */ \"./src/physics/actionStateShortcuts.ts\");\nconst hitDetection_1 = __webpack_require__(/*! ../physics/hitDetection */ \"./src/physics/hitDetection.ts\");\nconst article_1 = __webpack_require__(/*! ../physics/article */ \"./src/physics/article.ts\");\nconst ai_1 = __webpack_require__(/*! ../main/ai */ \"./src/main/ai.ts\");\nconst physics_1 = __webpack_require__(/*! ../physics/physics */ \"./src/physics/physics.ts\");\nconst jquery_1 = __importDefault(__webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\"));\nconst transparency_1 = __webpack_require__(/*! ../main/vfx/transparency */ \"./src/main/vfx/transparency.js\");\nconst drawVfx_1 = __webpack_require__(/*! ../main/vfx/drawVfx */ \"./src/main/vfx/drawVfx.js\");\nconst vfxQueue_1 = __webpack_require__(/*! ../main/vfx/vfxQueue */ \"./src/main/vfx/vfxQueue.js\");\nconst activeStage_1 = __webpack_require__(/*! ../stages/activeStage */ \"./src/stages/activeStage.ts\");\nconst music_1 = __webpack_require__(/*! ./music */ \"./src/main/music.ts\");\nconst vfx_1 = __webpack_require__(/*! ../main/vfx */ \"./src/main/vfx.ts\");\nconst renderVfx_1 = __webpack_require__(/*! ./vfx/renderVfx */ \"./src/main/vfx/renderVfx.js\");\nconst Box2D_1 = __webpack_require__(/*! ./util/Box2D */ \"./src/main/util/Box2D.ts\");\nconst Vec2D_1 = __webpack_require__(/*! ./util/Vec2D */ \"./src/main/util/Vec2D.ts\");\nconst streamclient_1 = __webpack_require__(/*! ./multiplayer/streamclient */ \"./src/main/multiplayer/streamclient.js\");\nconst replay_1 = __webpack_require__(/*! ./replay */ \"./src/main/replay.ts\");\nconst input_1 = __webpack_require__(/*! ../input/input */ \"./src/input/input.ts\");\nconst meleeInputs_1 = __webpack_require__(/*! ../input/meleeInputs */ \"./src/input/meleeInputs.ts\");\nconst findGamepadInfo_1 = __webpack_require__(/*! ../input/gamepad/findGamepadInfo */ \"./src/input/gamepad/findGamepadInfo.ts\");\nconst custom_1 = __webpack_require__(/*! ../input/gamepad/gamepads/custom */ \"./src/input/gamepad/gamepads/custom.js\");\nconst retrieveGamepadInputs_1 = __webpack_require__(/*! ../input/gamepad/retrieveGamepadInputs */ \"./src/input/gamepad/retrieveGamepadInputs.ts\");\nconst drawGamepad_1 = __webpack_require__(/*! ../input/gamepad/drawGamepad */ \"./src/input/gamepad/drawGamepad.ts\");\nconst deepCopyObject_1 = __webpack_require__(/*! ./util/deepCopyObject */ \"./src/main/util/deepCopyObject.ts\");\nconst css_2 = __webpack_require__(/*! ../menus/css */ \"./src/menus/css.ts\");\n/*globals performance*/\nexports.holiday = 0;\nexports.snowCount = 150;\n//todo find 'Player' object\nexports.player = [0, 0, 0, 0];\nexports.renderTime = [10, 0, 100, 0];\nexports.gamelogicTime = [5, 0, 100, 0];\nexports.framerate = [0, 0, 0];\nexports.characterSelections = [0, 0, 0, 0];\nexports.shine = 0.5;\nexports.creditsPlayer = 0;\nexports.calibrationPlayer = 0;\nexports.gameEnd = false;\nexports.controllerResetCountdowns = [0, 0, 0, 0];\nfunction setControllerReset(i) {\n    exports.controllerResetCountdowns[i] = 0;\n}\nlet keyboardOccupied = false;\nexports.usingCustomControls = [false, false, false, false];\nfunction setUsingCustomControls(i, boolean, info) {\n    exports.usingCustomControls[i] = boolean;\n    if (bool) {\n        exports.mType[i] = custom_1.customGamepadInfo[exports.currentPlayers[i]];\n    }\n    else {\n        exports.mType[i] = info;\n    }\n}\nexports.firstTimeDetected = [true, true, true, true];\nwindow.mType = [null, null, null, null];\nexports.mType = [null, null, null, null];\nfunction setMtype(index, val) {\n    exports.mType[index] = val;\n}\nexports.currentPlayers = [];\nfunction setCurrentPlayer(index, val) {\n    exports.currentPlayers[index] = val;\n}\nexports.playerAmount = 0;\nexports.playerType = [-1, -1, -1, -1];\nexports.cpuDifficulty = [3, 3, 3, 3];\nexports.ports = 0;\nexports.activePorts = [];\nexports.playing = false;\nexports.frameByFrame = false;\nexports.wasFrameByFrame = false;\nexports.frameByFrameRender = false;\nexports.findingPlayers = true;\nexports.showDebug = false;\nexports.gameMode = 20;\n// 20:Startup\n// 13:Data Menu\n// 12:Keyboard Controls\n// 11:Gameplay Menu\n// 10:Sound Menu\n// 9: -\n// 8: -\n// 7:Target Select\n// 6:Stage Select (VS)\n// 5:Target Playing\n// 4:Target Builder\n// 3:Playing (VS)\n// 2:CSS\n// 1:Main Menu\n// 0:Title Screen\nexports.versusMode = 0;\nexports.randomTags = [\"NEO!\", \"SELF\", \"NOVA\", \"PNDA\", \"Panda\", \"LFFN\", \"Scorp\", \"AZ\", \"AXE\", \"Tempo\", \"TMPO\", \"[A]rmada\", \"WBALLZ\", \"Westballz\", \"PPMD\", \"Kreygasm\", \"M2K\", \"Mang0\", \"USA\", \"SCAR\", \"TOPH\", \"(.Y.)\", \"HBOX\", \"HungryBox\", \"PLUP\", \"Shroomed\", \"SFAT\", \"Wizz\", \"Lucky\", \"S2J\", \"SilentWolf\", \"aMSa\", \"S2J\", \"Hax$\"];\nexports.palettes = [[\"rgb(250, 89, 89)\", \"rgb(255, 170, 170)\", \"rgba(255, 206, 111, \", \"rgb(244, 68, 68)\", \"rgba(255, 225, 167, \"],\n    [\"rgb(95, 216, 84)\", \"rgb(184, 253, 154)\", \"rgba(252, 95, 95, \", \"rgb(255, 182, 96)\", \"rgba(254, 141, 141, \"],\n    [\"rgb(5, 195, 255)\", \"rgb(121, 223, 255)\", \"rgba(218, 96, 254, \", \"rgb(231, 134, 255)\", \"rgba(230, 144, 255, \"],\n    [\"rgb(255, 187, 70)\", \"rgb(248, 255, 122)\", \"rgba(80, 182, 255, \", \"rgb(255, 142, 70)\", \"rgba(139, 203, 249, \"],\n    [\"rgb(177, 89, 255)\", \"rgb(203, 144, 255)\", \"rgba(144, 255, 110, \", \"rgb(247, 126, 250)\", \"rgba(190, 255, 170, \"],\n    [\"rgb(182, 131, 70)\", \"rgb(252, 194, 126)\", \"rgba(47, 186, 123, \", \"rgb(255, 112, 66)\", \"rgba(111, 214, 168, \"],\n    [\"rgb(232, 232, 208)\", \"rgb(255, 255, 255)\", \"rgba(244, 255, 112, \", \"rgb(191, 119, 119)\", \"rgba(255, 255, 200, \"]];\nexports.hasTag = [false, false, false, false];\nexports.tagText = [\"\", \"\", \"\", \"\"];\nfunction setTagText(index, value) {\n    exports.tagText[index] = value;\n    exports.hasTag[index] = true;\n}\nexports.pPal = [0, 1, 2, 3];\nexports.costumeTimeout = [];\nexports.colours = [\"rgba(4, 255, 82, 0.62)\", \"rgba(117, 20, 255, 0.63)\", \"rgba(255, 20, 20, 0.63)\", \"rgba(255, 232, 20, 0.63)\"];\nexports.pause = [[true, true], [true, true], [true, true], [true, true]];\nexports.frameAdvance = [[true, true], [true, true], [true, true], [true, true]];\nexports.startingPoint = [[-50, 50], [50, 50], [-25, 5], [25, 5]];\nexports.startingFace = [1, -1, 1, -1];\nexports.ground = [[-68.4, 0], [68.4, 0]];\nexports.platforms = [[[-57.6, 27.2], [-20, 27.2]], [[20, 27.2], [57.6, 27.2]], [[-18.8, 54.4], [18.8, 54.4]]];\nexports.wallsL = [[[-68.4, 0], [-68.4, -108.8]]];\nexports.wallsR = [[[68.4, 0], [68.4, -108.8]]];\nexports.edges = [[[-68.4, 0], [-63.4, 0]], [[68.4, 0], [63.4, 0]]];\n//edgeOffset = [[-71.3,-23.7],[71.3,-23.7]];\nexports.edgeOffset = [[-2.9, -23.7], [2.9, -23.7]];\nexports.edgeOrientation = [1, -1];\nexports.respawnPoints = [[-50, 50, 1], [50, 50, -1], [25, 35, 1], [-25, 35, -1]];\nexports.stageSelect = 0;\nfunction setStageSelect(val) {\n    exports.stageSelect = val;\n}\nexports.blastzone = new Box2D_1.Box2D([-224, 200], [224, -108.8]);\nexports.starting = true;\nfunction setStarting(val) {\n    exports.starting = val;\n}\nexports.startTimer = 1.5;\nfunction setStartTimer(val) {\n    exports.startTimer = val;\n}\nfunction getStartTimer() {\n    return exports.startTimer;\n}\n//matchTimer = 5999.99;\nexports.matchTimer = 480;\nfunction addMatchTimer(val) {\n    exports.matchTimer += val;\n}\nfunction setMatchTimer(val) {\n    exports.matchTimer = val;\n}\nfunction getMatchTimer() {\n    return exports.matchTimer;\n}\nexports.usingLocalStorage = false;\nif (typeof (Storage) !== \"undefined\") {\n    // Code for localStorage/sessionStorage.\n    exports.usingLocalStorage = true;\n    console.log(\"local storage works\");\n}\nelse {\n    // Sorry! No Web Storage support..\n    console.log(\"local storage does not work\");\n}\nfunction setCookie(cname, cvalue, exdays) {\n    var d = new Date();\n    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n    var exp = \"expires=\" + d.toUTCString();\n    document.cookie = cname + \"=\" + cvalue + \"; \" + exp;\n    localStorage.setItem(cname, cvalue);\n}\nfunction setVersusMode(val) {\n    exports.versusMode = val;\n}\nfunction getCookie(cname) {\n    if (exports.usingLocalStorage) {\n        return localStorage.getItem(cname);\n    }\n    else {\n        var name = cname + \"=\";\n        var ca = document.cookie.split(';');\n        for (var i = 0; i < ca.length; i++) {\n            var c = ca[i];\n            while (c.charAt(0) == ' ')\n                c = c.substring(1);\n            if (c.indexOf(name) == 0)\n                return c.substring(name.length, c.length);\n        }\n        return \"\";\n    }\n}\nexports.keys = {};\nexports.keyBind = 0;\nexports.keyBinding = false;\nfunction setKeyBinding(val) {\n    exports.keyBinding = val;\n}\nfunction overrideKeyboardEvent(e) {\n    if (!showingCode && css_1.choosingTag == -1 && e.keyCode != 122 && e.keyCode != 116) {\n        switch (e.type) {\n            case \"keydown\":\n                if (!exports.keys[e.keyCode]) {\n                    exports.keys[e.keyCode] = true;\n                    exports.keyBind = e.keyCode;\n                    exports.keyBinding = true;\n                    // do key down stuff here\n                }\n                break;\n            case \"keyup\":\n                delete (exports.keys[e.keyCode]);\n                // do key up stuff here\n                break;\n        }\n        disabledEventPropagation(e);\n        e.preventDefault();\n        return false;\n    }\n    else {\n        if (css_1.choosingTag > -1) {\n            if (e.keyCode == 13) {\n                switch (e.type) {\n                    case \"keydown\":\n                        exports.keys[13] = true;\n                        break;\n                    case \"keyup\":\n                        delete (exports.keys[13]);\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        return true;\n    }\n}\n;\nfunction disabledEventPropagation(e) {\n    if (e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n        }\n        else if (event) {\n            event.cancelBubble = true;\n        }\n    }\n}\n;\ndocument.onkeydown = overrideKeyboardEvent;\ndocument.onkeyup = overrideKeyboardEvent;\n/*var keys = [];\nexport const onkeyup (e) {\n  keys[e.keyCode]=false;\n}\nexport const onkeydown (e) {\n  keys[e.keyCode]=true;\n}*/\nfunction SVG(tag) {\n    return document.createElementNS('http://www.w3.org/2000/svg', tag);\n}\n/*if (Gamepad.supported) {\n    console.log(\"gamepad supported\");\n} else {\n    console.log(\"gamepad not supported\");\n}*/\nwindow.addEventListener(\"gamepadconnected\", function (e) {\n    console.log(\"Gamepad connected at index %d: %s. %d buttons, %d axes.\", e.gamepad.index, e.gamepad.id, e.gamepad.buttons.length, e.gamepad.axes.length);\n});\nif (navigator.getGamepads)\n    console.log(navigator.getGamepads());\nfunction matchTimerTick(input) {\n    exports.matchTimer -= 0.016667;\n    if (dom.matchMinutes && dom.matchSeconds) {\n        var sec = (exports.matchTimer % 60).toFixed(2);\n        dom.matchMinutes.innerHTML = Math.floor(exports.matchTimer / 60);\n        dom.matchSeconds.innerHTML = sec.length < 5 ? `0${sec}` : sec;\n    }\n    if (exports.matchTimer <= 0) {\n        finishGame(input);\n    }\n}\nfunction screenShake(kb) {\n    var seed = [Math.random(), Math.random(), Math.random(), Math.random()];\n    exports.fg1.translate(kb * 0.1 * seed[0], kb * 0.1 * seed[1]);\n    setTimeout(function () { exports.fg1.translate(-kb * 0.05 * seed[0], -kb * 0.05 * seed[1]); }, 20);\n    setTimeout(function () { exports.fg1.translate(-kb * 0.05 * seed[0], -kb * 0.05 * seed[1]); exports.fg1.translate(-kb * 0.1 * seed[2], -kb * 0.1 * seed[3]); }, 40);\n    setTimeout(function () { exports.fg1.translate(kb * 0.05 * seed[2], kb * 0.05 * seed[3]); }, 60);\n    setTimeout(function () { exports.fg1.translate(kb * 0.05 * seed[2], kb * 0.05 * seed[3]); }, 80);\n}\nfunction percentShake(kb, i) {\n    exports.player[i].percentShake = new Vec2D_1.Vec2D(kb * 0.1 * Math.random(), kb * 0.1 * Math.random());\n    setTimeout(function () { exports.player[i].percentShake = new Vec2D_1.Vec2D(kb * 0.05 * Math.random(), kb * 0.05 * Math.random()); }, 20);\n    setTimeout(function () { exports.player[i].percentShake = new Vec2D_1.Vec2D(-kb * 0.1 * Math.random(), -kb * 0.1 * Math.random()); }, 40);\n    setTimeout(function () { exports.player[i].percentShake = new Vec2D_1.Vec2D(-kb * 0.05 * Math.random(), -kb * 0.05 * Math.random()); }, 60);\n    setTimeout(function () { exports.player[i].percentShake = new Vec2D_1.Vec2D(0, 0); }, 80);\n}\nfunction findPlayers() {\n    var gps = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\n    /*if (typeof gps != \"undefined\"){\n      console.log(gps);\n    }*/\n    if (!keyboardOccupied) {\n        if (exports.gameMode < 2 || exports.gameMode == 20) {\n            if (exports.keys[13] || exports.keys[settings_1.keyMap.s[0]] || exports.keys[settings_1.keyMap.s[1]]) {\n                if (exports.ports < 4) {\n                    changeGamemode(1);\n                    (0, jquery_1.default)(\"#keyboardPrompt\").hide();\n                    keyboardOccupied = true;\n                    sfx_1.sounds.menuForward.play();\n                    if (exports.ports == 0) {\n                        music_1.MusicManager.playMenuLoop();\n                    }\n                    addPlayer(exports.ports, \"keyboard\");\n                }\n            }\n        }\n        else {\n            if (exports.keys[settings_1.keyMap.a[0]] || exports.keys[settings_1.keyMap.a[1]]) {\n                if (exports.ports < 4) {\n                    keyboardOccupied = true;\n                    addPlayer(exports.ports, \"keyboard\");\n                }\n            }\n        }\n    }\n    for (var i = 0; i < gps.length; i++) {\n        var gamepad = navigator.getGamepads ? navigator.getGamepads()[i] : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads()[i] : null);\n        if (exports.playerType[i] === 2) {\n            var alreadyIn = false;\n            for (var k = 0; k < exports.ports; k++) {\n                if (exports.currentPlayers[k] === i) {\n                    alreadyIn = true;\n                }\n            }\n            if (!alreadyIn) {\n                if (exports.ports < 4) {\n                    addPlayer(i, 99);\n                }\n            }\n            continue;\n        }\n        var gamepad = navigator.getGamepads ? navigator.getGamepads()[i] : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads()[i] : null);\n        if (typeof gamepad != \"undefined\" && gamepad != null) {\n            var detected = false;\n            var gpdName;\n            var gpdInfo;\n            if (exports.usingCustomControls[i] && custom_1.customGamepadInfo[i] !== null) {\n                gpdName = \"custom controls\";\n                gpdInfo = custom_1.customGamepadInfo[i];\n                detected = true;\n            }\n            else {\n                const maybeNameAndInfo = (0, findGamepadInfo_1.getGamepadNameAndInfo)(gamepad.id);\n                if (maybeNameAndInfo === null) {\n                    console.log(\"Error in 'findPlayers': controller \" + (i + 1) + \" detected but not supported.\");\n                    console.log(\"Try manual calibration of your controller.\");\n                }\n                else {\n                    detected = true;\n                    [gpdName, gpdInfo] = maybeNameAndInfo;\n                }\n            }\n            if (detected) {\n                if (exports.firstTimeDetected[i]) {\n                    console.log(\"Controller \" + (i + 1) + \" is: \" + gpdName + \".\");\n                    exports.firstTimeDetected[i] = false;\n                }\n                if (exports.gameMode < 2 || exports.gameMode == 20) {\n                    if ((0, retrieveGamepadInputs_1.buttonState)(gamepad, gpdInfo, \"s\")) {\n                        var alreadyIn = false;\n                        for (var k = 0; k < exports.ports; k++) {\n                            if (exports.currentPlayers[k] == i) {\n                                alreadyIn = true;\n                            }\n                        }\n                        if (!alreadyIn) {\n                            if (exports.ports < 4) {\n                                changeGamemode(1);\n                                (0, jquery_1.default)(\"#keyboardPrompt\").hide();\n                                sfx_1.sounds.menuForward.play();\n                                if (exports.ports === 0) {\n                                    music_1.MusicManager.playMenuLoop();\n                                }\n                                addPlayer(i, gpdInfo);\n                            }\n                        }\n                    }\n                }\n                else {\n                    if ((0, retrieveGamepadInputs_1.buttonState)(gamepad, gpdInfo, \"a\")) {\n                        var alreadyIn = false;\n                        for (var k = 0; k < exports.ports; k++) {\n                            if (exports.currentPlayers[k] == i) {\n                                alreadyIn = true;\n                            }\n                        }\n                        if (!alreadyIn) {\n                            if (exports.ports < 4) {\n                                addPlayer(i, gpdInfo);\n                            }\n                        }\n                    }\n                }\n            }\n            else {\n                console.log(\"No controller detected by browser\");\n            }\n        }\n    }\n}\nfunction setPlayerType(playerSlot, type) {\n    exports.playerType[playerSlot] = type;\n}\nfunction addPlayer(i, controllerInfo) {\n    if (controllerInfo === 99) {\n        exports.ports++;\n        exports.currentPlayers[exports.ports - 1] = i;\n        exports.playerType[exports.ports - 1] = 2;\n        exports.mType[exports.ports - 1] = controllerInfo;\n    }\n    else {\n        exports.ports++;\n        exports.currentPlayers[exports.ports - 1] = i;\n        exports.playerType[exports.ports - 1] = 0;\n        exports.mType[exports.ports - 1] = controllerInfo;\n        if (exports.showDebug) {\n            (0, drawGamepad_1.updateGamepadSVGColour)(i, \"gamepadSVG\" + i);\n            document.getElementById(\"gamepadSVG\" + i).style.display = \"\";\n        }\n    }\n}\nfunction togglePort(i) {\n    exports.playerType[i]++;\n    if (exports.playerType[i] == 3) {\n        exports.playerType[i] = -1;\n        if (exports.showDebug) {\n            document.getElementById(\"gamepadSVG\" + i).style.display = \"none\";\n        }\n    }\n    if (exports.playerType[i] == 0 && exports.ports <= i) {\n        exports.playerType[i] = 1;\n        (0, drawGamepad_1.setGamepadSVGColour)(i, \"black\");\n        if (exports.showDebug) {\n            (0, drawGamepad_1.updateGamepadSVGColour)(i, \"gamepadSVG\" + i);\n            document.getElementById(\"gamepadSVG\" + i).style.display = \"\";\n        }\n    }\n}\nfunction positionPlayersInCSS() {\n    for (var i = 0; i < 4; i++) {\n        var x = (-80 + i * 50) * 2 / 3;\n        var y = -30;\n        exports.player[i].phys.pos = new Vec2D_1.Vec2D(x, y);\n        exports.player[i].phys.hurtbox = new Box2D_1.Box2D([-4 + x, 18 + y], [4 + x, y]);\n    }\n}\n// 20:Startup\n// 14:Controller Menu\n// 13:Data Menu\n// 12:Keyboard Controls\n// 11:Gameplay Menu\n// 10:Sound Menu\n// 9: -\n// 8: -\n// 7:Target Select\n// 6:Stage Select (VS)\n// 5:Target Playing\n// 4:Target Builder\n// 3:Playing (VS)\n// 2:CSS\n// 1:Main Menu\n// 0:Title Screen\nfunction changeGamemode(newGamemode) {\n    exports.bg1.fillStyle = \"black\";\n    exports.bg1.fillRect(0, 0, exports.layers.BG1.width, exports.layers.BG1.height);\n    exports.fg1.clearRect(0, 0, exports.layers.FG1.width, exports.layers.FG1.height);\n    exports.gameMode = newGamemode;\n    switch (newGamemode) {\n        // TITLESCREEN\n        case 0:\n            (0, startscreen_1.drawStartScreenInit)();\n            break;\n        // MAIN MENU\n        case 1:\n            (0, jquery_1.default)(\"#logoVid\").remove();\n            (0, menu_1.drawMainMenuInit)();\n            break;\n        // CSS\n        case 2:\n            (0, css_1.drawCSSInit)();\n            break;\n        // Playing (VS)\n        case 3:\n            (0, stagerender_1.drawBackgroundInit)();\n            (0, stagerender_1.drawStageInit)();\n            break;\n        // Target Builder\n        case 4:\n            break;\n        // Target Playing\n        case 5:\n            (0, stagerender_1.drawBackgroundInit)();\n            (0, stagerender_1.drawStageInit)();\n            break;\n        // Stage select (vs)\n        case 6:\n            (0, stageselect_1.drawSSSInit)();\n            break;\n        // Target Select\n        case 7:\n            drawTSSInit();\n            break;\n        // sound menu\n        case 10:\n            (0, audiomenu_1.drawAudioMenuInit)();\n            break;\n        // gameplay menu\n        case 11:\n            (0, gameplaymenu_1.drawGameplayMenuInit)();\n            break;\n        // keyboard menu\n        case 12:\n            (0, keyboardmenu_1.drawKeyboardMenuInit)();\n            break;\n        // credits\n        case 13:\n            (0, credits_1.drawCreditsInit)();\n            break;\n        // Multiplayer Modes\n        case 14:\n            (0, controllermenu_1.drawControllerMenuInit)();\n            break;\n        case 15:\n            (0, css_1.drawCSSInit)();\n            (0, streamclient_1.connectToMPServer)();\n            break;\n        // startup\n        case 20:\n            break;\n        default:\n            break;\n    }\n}\n/*export const addPlayer (i,gType,pType){\n  console.log(i,gType,pType);\n\n  currentPlayers.push(i);\n  if (pType == 0){\n    ports++;\n    mType[ports-1] = gType;\n    playerType[ports-1] = pType;\n\n    costumeTimeout.push(false);\n    pPal.push(ports-1);\n    buildPlayerObject(ports-1);\n    player[playerAmount-1].phys.pos = new Vec2D(-100+25*(playerAmount=1),-40);\n    player[ports-1].phys.face = 1;\n    player[ports-1].actionState = 0;\n    $(\"#currentPlayers\").append('<div class=\"pBoxBox\"><div class=\"playerBox\" id=\"pBox'+(ports-1)+'\" style=\"background-color:'+palettes[pPal[ports-1]][0]+';border:5px solid '+palettes[pPal[ports-1]][2]+'0.8)\"><p>P'+ports+'<br><span class=\"cont\">(Cont. '+i+')</span></p></div><div id=\"pTag'+(ports-1)+'\" class=\"pTag\"><textarea id=\"pTagEdit'+(ports-1)+'\" class=\"pTagEdit\" maxlength=\"10\"></textarea></div></div>');\n  }\n  else {\n    mType[i] = gType;\n\n    costumeTimeout.push(false);\n    pPal.push(i);\n    buildPlayerObject(i);\n    player[playerAmount-1].phys.pos = new Vec2D(-100+25*(playerAmount=1),-40);\n    player[i].phys.face = 1;\n    player[i].actionState = 0;\n    $(\"#currentPlayers\").append('<div class=\"pBoxBox\"><div class=\"playerBox\" id=\"pBox'+i+'\" style=\"background-color:'+palettes[pPal[i]][0]+';border:5px solid '+palettes[pPal[i]][2]+'0.8)\"><p>P'+(i+1)+'<br><span class=\"cont\">(Cont. '+i+')</span></p></div><div id=\"pTag'+i+'\" class=\"pTag\"><textarea id=\"pTagEdit'+i+'\" class=\"pTagEdit\" maxlength=\"10\"></textarea></div></div>');\n  }\n  playerAmount++;\n}\n\nexport const removePlayer (i){\n  playerType[i] = -1;\n  playerAmount--;\n}*/\nfunction interpretInputs(i, active, playertype, inputBuffer) {\n    let tempBuffer = (0, input_1.nullInputs)();\n    // keep updating Z and Start all the time, even when paused\n    for (var k = 0; k < 7; k++) {\n        tempBuffer[7 - k].z = inputBuffer[6 - k].z;\n        tempBuffer[7 - k].s = inputBuffer[6 - k].s;\n    }\n    tempBuffer[0] = (0, input_1.pollInputs)(exports.gameMode, exports.frameByFrame, exports.mType[i], i, exports.currentPlayers[i], exports.keys, playertype);\n    let pastOffset = 0;\n    if ((exports.gameMode !== 3 && exports.gameMode !== 5) || (exports.playing && (exports.pause[i][1] || !exports.pause[i][0]))\n        || exports.wasFrameByFrame\n        || (!exports.playing && exports.pause[i][0] && !exports.pause[i][1])) {\n        pastOffset = 1;\n    }\n    exports.pause[i][1] = exports.pause[i][0];\n    exports.wasFrameByFrame = false;\n    exports.frameAdvance[i][1] = exports.frameAdvance[i][0];\n    for (var k = 0; k < 7; k++) {\n        tempBuffer[7 - k].lsX = inputBuffer[7 - k - pastOffset].lsX;\n        tempBuffer[7 - k].lsY = inputBuffer[7 - k - pastOffset].lsY;\n        tempBuffer[7 - k].rawX = inputBuffer[7 - k - pastOffset].rawX;\n        tempBuffer[7 - k].rawY = inputBuffer[7 - k - pastOffset].rawY;\n        tempBuffer[7 - k].csX = inputBuffer[7 - k - pastOffset].csX;\n        tempBuffer[7 - k].csY = inputBuffer[7 - k - pastOffset].csY;\n        tempBuffer[7 - k].rawcsX = inputBuffer[7 - k - pastOffset].rawcsX;\n        tempBuffer[7 - k].rawcsY = inputBuffer[7 - k - pastOffset].rawcsY;\n        tempBuffer[7 - k].lA = inputBuffer[7 - k - pastOffset].lA;\n        tempBuffer[7 - k].rA = inputBuffer[7 - k - pastOffset].rA;\n        tempBuffer[7 - k].a = inputBuffer[7 - k - pastOffset].a;\n        tempBuffer[7 - k].b = inputBuffer[7 - k - pastOffset].b;\n        tempBuffer[7 - k].x = inputBuffer[7 - k - pastOffset].x;\n        tempBuffer[7 - k].y = inputBuffer[7 - k - pastOffset].y;\n        tempBuffer[7 - k].r = inputBuffer[7 - k - pastOffset].r;\n        tempBuffer[7 - k].l = inputBuffer[7 - k - pastOffset].l;\n        tempBuffer[7 - k].dl = inputBuffer[7 - k - pastOffset].dl;\n        tempBuffer[7 - k].dd = inputBuffer[7 - k - pastOffset].dd;\n        tempBuffer[7 - k].dr = inputBuffer[7 - k - pastOffset].dr;\n        tempBuffer[7 - k].du = inputBuffer[7 - k - pastOffset].du;\n    }\n    if (exports.mType !== null) {\n        if ((exports.mType[i] === \"keyboard\" && (tempBuffer[0].z || tempBuffer[1].z))\n            || (exports.mType[i] !== \"keyboard\" && (tempBuffer[0].z && !tempBuffer[1].z))) {\n            exports.frameAdvance[i][0] = true;\n        }\n        else {\n            exports.frameAdvance[i][0] = false;\n        }\n    }\n    if (exports.frameAdvance[i][0] && !exports.frameAdvance[i][1] && !exports.playing && exports.gameMode !== 4) {\n        exports.frameByFrame = true;\n    }\n    if (exports.mType[i] === \"keyboard\") { // keyboard controls\n        if (tempBuffer[0].s || tempBuffer[1].s || (exports.gameMode === 5 && (tempBuffer[0].du || tempBuffer[1].du))) {\n            exports.pause[i][0] = true;\n        }\n        else {\n            exports.pause[i][0] = false;\n        }\n        if (!exports.playing && (exports.gameMode == 3 || exports.gameMode == 5)\n            && (tempBuffer[0].a || tempBuffer[1].a) && (tempBuffer[0].l || tempBuffer[1].l)\n            && (tempBuffer[0].r || tempBuffer[1].r) && (tempBuffer[0].s || tempBuffer[1].s)) {\n            if (tempBuffer[0].b || tempBuffer[1].b) {\n                startGame();\n            }\n            else {\n                endGame(inputBuffer);\n            }\n        }\n        interpretPause(exports.pause[i][0], exports.pause[i][1]);\n    }\n    else if (exports.mType[i] !== null) { // gamepad controls\n        if (!exports.playing && (exports.gameMode == 3 || exports.gameMode == 5) &&\n            (tempBuffer[0].a && tempBuffer[0].l && tempBuffer[0].r && tempBuffer[0].s)\n            && (!(tempBuffer[1].a && tempBuffer[1].l && tempBuffer[1].r && tempBuffer[1].s))) {\n            if (tempBuffer[0].b) {\n                startGame();\n            }\n            else {\n                endGame(inputBuffer);\n            }\n        }\n        if (tempBuffer[0].s || tempBuffer[0].du && exports.gameMode == 5) {\n            exports.pause[i][0] = true;\n        }\n        else {\n            exports.pause[i][0] = false;\n        }\n        // Controller reset functionality\n        if ((tempBuffer[0].z || tempBuffer[0].du) && tempBuffer[0].x && tempBuffer[0].y) {\n            exports.controllerResetCountdowns[i] -= 1;\n            if (exports.controllerResetCountdowns[i] === 0) {\n                // triggers code in input.js\n                console.log(\"Controller #\" + (i + 1) + \" was reset!\");\n                (0, jquery_1.default)(\"#resetIndicator\" + i).fadeIn(100);\n                (0, jquery_1.default)(\"#resetIndicator\" + i).fadeOut(500);\n            }\n        }\n        else {\n            exports.controllerResetCountdowns[i] = 125;\n        }\n        interpretPause(exports.pause[i][0], exports.pause[i][1]);\n    }\n    else { // AI\n        tempBuffer[0].rawX = tempBuffer[0].lsX;\n        tempBuffer[0].rawY = tempBuffer[0].lsY;\n        tempBuffer[0].rawcsX = tempBuffer[0].csX;\n        tempBuffer[0].rawcsY = tempBuffer[0].csY;\n        tempBuffer[0].lsX = (0, meleeInputs_1.deaden)(tempBuffer[0].rawX);\n        tempBuffer[0].lsY = (0, meleeInputs_1.deaden)(tempBuffer[0].rawY);\n        tempBuffer[0].csX = (0, meleeInputs_1.deaden)(tempBuffer[0].rawcsX);\n        tempBuffer[0].csY = (0, meleeInputs_1.deaden)(tempBuffer[0].rawcsY);\n    }\n    if (exports.showDebug) {\n        (0, jquery_1.default)(\"#lsAxisX\" + i).empty().append(tempBuffer[0].lsX.toFixed(3));\n        (0, jquery_1.default)(\"#lsAxisY\" + i).empty().append(tempBuffer[0].lsY.toFixed(3));\n        (0, jquery_1.default)(\"#csAxisX\" + i).empty().append(tempBuffer[0].csX.toFixed(3));\n        (0, jquery_1.default)(\"#csAxisY\" + i).empty().append(tempBuffer[0].csY.toFixed(3));\n        (0, jquery_1.default)(\"#lAnalog\" + i).empty().append(tempBuffer[0].lA.toFixed(3));\n        (0, jquery_1.default)(\"#rAnalog\" + i).empty().append(tempBuffer[0].rA.toFixed(3));\n        (0, drawGamepad_1.updateGamepadSVGState)(i, \"gamepadSVG\" + i, tempBuffer[0]);\n    }\n    if (exports.gameMode === 14) { // controller calibration screen\n        (0, drawGamepad_1.updateGamepadSVGState)(i, \"gamepadSVGCalibration\", tempBuffer[0]);\n    }\n    if (exports.showDebug || exports.gameMode === 14) {\n        const which = (exports.showDebug && exports.gameMode === 14) ? \"both\" : exports.showDebug ? \"debug\" : \"calibration\";\n        if (tempBuffer[0].x && !tempBuffer[1].x && tempBuffer[0].du) {\n            (0, drawGamepad_1.cycleGamepadColour)(i, which, true);\n        }\n        if (tempBuffer[0].y && !tempBuffer[1].y && tempBuffer[0].du) {\n            (0, drawGamepad_1.cycleGamepadColour)(i, which, false);\n        }\n    }\n    if (streamclient_1.giveInputs[i] === true) {\n        //turns out keyboards leave gaps in the input buffer\n        (0, deepCopyObject_1.deepObjectMerge)(true, (0, input_1.nullInput)(), tempBuffer[0]);\n        (0, streamclient_1.updateNetworkInputs)(tempBuffer[0], i);\n    }\n    if (active) {\n        if (tempBuffer[0].dl && !tempBuffer[1].dl) {\n            exports.player[i].showLedgeGrabBox ^= true;\n        }\n        if (tempBuffer[0].dd && !tempBuffer[1].dd) {\n            exports.player[i].showECB ^= true;\n        }\n        if (tempBuffer[0].dr && !tempBuffer[1].dr) {\n            exports.player[i].showHitbox ^= true;\n        }\n    }\n    if (exports.frameByFrame) {\n        tempBuffer[0].z = false;\n    }\n    return tempBuffer;\n}\nfunction interpretPause(pause0, pause1) {\n    if (pause0 && !pause1) {\n        if (exports.gameMode == 3 || exports.gameMode == 5) {\n            exports.playing ^= true;\n            if (!exports.playing) {\n                sfx_1.sounds.pause.play();\n                changeVolume(music_1.MusicManager, audiomenu_1.masterVolume[1] * 0.3, 1);\n                (0, render_1.renderForeground)();\n            }\n            else {\n                changeVolume(music_1.MusicManager, audiomenu_1.masterVolume[1], 1);\n            }\n        }\n    }\n}\nexports.bg1 = 0;\nexports.bg2 = 0;\nexports.fg1 = 0;\nexports.fg2 = 0;\nexports.ui = 0;\nexports.c = 0;\nexports.canvasMain = 0;\nexports.layers = {\n    BG1: null,\n    BG2: null,\n    FG1: null,\n    FG2: null,\n    UI: null\n};\nexports.layerSwitches = {\n    BG1: true,\n    BG2: true,\n    FG1: true,\n    FG2: true,\n    UI: true\n};\nfunction renderToMain() {\n    var keys = Object.keys(exports.layers);\n    for (var i = 0; i < keys.length; i++) {\n        if (exports.layerSwitches[keys[i]]) {\n            exports.c.drawImage(exports.layers[keys[i]], 0, 0);\n        }\n    }\n}\nfunction update(i, inputBuffers) {\n    if (!exports.starting) {\n        if (exports.currentPlayers[i] != -1) {\n            if (exports.playerType[i] == 0) {\n                // do nothing, use the provided player i inputs\n            }\n            else if (exports.playerType[i] === 1) {\n                if (exports.player[i].actionState != \"SLEEP\") {\n                    (0, ai_1.runAI)(i); // no need to return input since polling returns ai input if they are active\n                }\n            }\n        }\n    }\n    (0, physics_1.physics)(i, inputBuffers);\n}\nlet delta = 0;\nlet lastFrameTimeMs = 0;\nlet lastUpdate = performance.now();\nfunction gameTick(oldInputBuffers) {\n    var start = performance.now();\n    var diff = 0;\n    let input = [(0, input_1.nullInputs)(), (0, input_1.nullInputs)(), (0, input_1.nullInputs)(), (0, input_1.nullInputs)()];\n    if (exports.gameMode == 0 || exports.gameMode == 20) {\n        findPlayers();\n    }\n    else if (exports.gameMode == 1) {\n        //console.log(playerType);\n        for (var i = 0; i < exports.ports; i++) {\n            input[i] = interpretInputs(i, true, exports.playerType[i], oldInputBuffers[i]);\n            (0, menu_1.menuMove)(i, input);\n        }\n    }\n    else if (exports.gameMode == 10) {\n        for (var i = 0; i < exports.ports; i++) {\n            input[i] = interpretInputs(i, true, exports.playerType[i], oldInputBuffers[i]);\n            (0, audiomenu_1.audioMenuControls)(i, input);\n        }\n    }\n    else if (exports.gameMode == 11) {\n        for (var i = 0; i < exports.ports; i++) {\n            input[i] = interpretInputs(i, true, exports.playerType[i], oldInputBuffers[i]);\n            (0, gameplaymenu_1.gameplayMenuControls)(i, input);\n        }\n    }\n    else if (exports.gameMode == 12) {\n        for (var i = 0; i < exports.ports; i++) {\n            input[i] = interpretInputs(i, true, exports.playerType[i], oldInputBuffers[i]);\n            (0, keyboardmenu_1.keyboardMenuControls)(i, input);\n        }\n    }\n    else if (exports.gameMode == 13) {\n        input[exports.creditsPlayer] = interpretInputs(exports.creditsPlayer, true, exports.playerType[exports.creditsPlayer], oldInputBuffers[exports.creditsPlayer]);\n        (0, credits_1.credits)(exports.creditsPlayer, input);\n    }\n    else if (exports.gameMode == 14) {\n        // controller calibration\n        input[exports.calibrationPlayer] = interpretInputs(exports.calibrationPlayer, true, exports.playerType[exports.calibrationPlayer], oldInputBuffers[exports.calibrationPlayer]);\n    }\n    else if (exports.gameMode == 15) {\n        for (var i = 0; i < exports.ports; i++) {\n            input[i] = interpretInputs(i, true, exports.playerType[i], oldInputBuffers[i]);\n            (0, menu_1.menuMove)(i, input);\n        }\n    }\n    else if (exports.gameMode == 2) {\n        for (var i = 0; i < 4; i++) {\n            if (i < exports.ports) {\n                input[i] = interpretInputs(i, true, exports.playerType[i], oldInputBuffers[i]);\n                (0, css_1.cssControls)(i, input);\n            }\n            actionStateShortcuts_1.actionStates[exports.characterSelections[i]][exports.player[i].actionState].main(i, input);\n        }\n        for (var i = 0; i < 4; i++) {\n            if (exports.playerType[i] > -1) {\n                (0, hitDetection_1.hitDetect)(i, input);\n            }\n        }\n        (0, hitDetection_1.executeHits)(input);\n        (0, hitDetection_1.resetHitQueue)();\n        findPlayers();\n    }\n    else if (exports.gameMode == 6) {\n        // stage select\n        for (var i = 0; i < 4; i++) {\n            if (i < exports.ports) {\n                input[i] = interpretInputs(i, true, exports.playerType[i], oldInputBuffers[i]);\n                (0, stageselect_1.sssControls)(i, input);\n            }\n        }\n    }\n    else if (exports.playing || exports.frameByFrame) {\n        //console.log(\"test0\");\n        /*delta = timestamp - lastFrameTimeMs; // get the delta time since last frame\n        lastFrameTimeMs = timestamp;\n        console.log(delta);*/\n        var now = performance.now();\n        var dt = now - lastUpdate;\n        //console.log(now);\n        //console.log(dt);\n        lastUpdate = now;\n        (0, hitDetection_1.resetHitQueue)();\n        (0, activeStage_1.getActiveStage)().movingPlatforms();\n        (0, article_1.destroyArticles)();\n        (0, article_1.executeArticles)();\n        for (var i = 0; i < 4; i++) {\n            if (exports.playerType[i] > -1) {\n                if (!exports.starting) {\n                    input[i] = interpretInputs(i, true, exports.playerType[i], oldInputBuffers[i]);\n                }\n                update(i, input);\n            }\n        }\n        (0, hitDetection_1.checkPhantoms)();\n        for (var i = 0; i < 4; i++) {\n            if (exports.playerType[i] > -1) {\n                (0, hitDetection_1.hitDetect)(i, input);\n            }\n        }\n        (0, hitDetection_1.executeHits)(input);\n        (0, article_1.articlesHitDetection)();\n        (0, article_1.executeArticleHits)(input);\n        if (!exports.starting && !exports.versusMode) {\n            matchTimerTick(input);\n        }\n        else {\n            exports.startTimer -= 0.01666667;\n            if (exports.startTimer < 0) {\n                exports.starting = false;\n            }\n        }\n        if (exports.frameByFrame) {\n            exports.frameByFrameRender = true;\n            exports.wasFrameByFrame = true;\n        }\n        exports.frameByFrame = false;\n        if (exports.showDebug) {\n            diff = performance.now() - start;\n            exports.gamelogicTime[0] += diff;\n            exports.gamelogicTime[0] /= 2;\n            if (diff >= 10) {\n                exports.gamelogicTime[3]++;\n            }\n            if (diff < exports.gamelogicTime[2]) {\n                exports.gamelogicTime[2] = diff;\n            }\n            if (diff > exports.gamelogicTime[1]) {\n                exports.gamelogicTime[1] = diff;\n            }\n            dom.gamelogicAvg.innerHTML = Math.round(exports.gamelogicTime[0]);\n            dom.gamelogicHigh.innerHTML = Math.round(exports.gamelogicTime[1]);\n            dom.gamelogicLow.innerHTML = Math.round(exports.gamelogicTime[2]);\n            dom.gamelogicPeak.innerHTML = exports.gamelogicTime[3];\n        }\n    }\n    else if (exports.findingPlayers) {\n        findPlayers();\n    }\n    else {\n        if (!exports.gameEnd) {\n            for (var i = 0; i < 4; i++) {\n                if (exports.playerType[i] == 0 || exports.playerType[i] == 2) {\n                    if (exports.currentPlayers[i] != -1) {\n                        input[i] = interpretInputs(i, false, exports.playerType[i], oldInputBuffers[i]);\n                    }\n                }\n            }\n        }\n    }\n    /*\n  \n    var beforeWaster = performance.now();\n    // neeed to waste 0.666ms\n    var timeWasted = false;\n    var t = 0;\n    var o = performance.now();\n    while(!timeWasted){\n      var n = performance.now();\n      t += n - o;\n      //console.log(t);\n      if (t > 0.6666){\n        timeWasted = true;\n      }\n      o = n;\n      //console.log(\".\");\n    }\n    //console.log(performance.now() - beforeWaster);*/\n    (0, replay_1.saveGameState)(input, exports.ports);\n    setTimeout(gameTick, 16, input);\n}\nfunction clearScreen() {\n    //bg1.fillStyle = \"rgb(0, 0, 0)\";\n    //bg1.fillRect(0,0,layers.BG1.width,layers.BG1.height);\n    exports.bg2.clearRect(0, 0, exports.layers.BG2.width, exports.layers.BG2.height);\n    //fg1.clearRect(0,0,layers.FG1.width,layers.FG1.height);\n    exports.fg2.clearRect(0, 0, exports.layers.FG2.width, exports.layers.FG2.height);\n    exports.ui.clearRect(0, 0, exports.layers.UI.width, exports.layers.UI.height);\n}\nlet otherFrame = true;\nlet fps30 = false;\nfunction renderTick() {\n    window.requestAnimationFrame(renderTick);\n    otherFrame ^= true;\n    if ((fps30 && otherFrame) || !fps30) {\n        //console.log(\"------\");\n        if (exports.gameMode == 20) {\n            (0, startup_1.drawStartUp)();\n        }\n        else if (exports.gameMode == 10) {\n            (0, audiomenu_1.drawAudioMenu)();\n        }\n        else if (exports.gameMode == 11) {\n            (0, gameplaymenu_1.drawGameplayMenu)();\n        }\n        else if (exports.gameMode == 12) {\n            (0, keyboardmenu_1.drawKeyboardMenu)();\n        }\n        else if (exports.gameMode == 13) {\n            (0, credits_1.drawCredits)();\n        }\n        else if (exports.gameMode == 14) {\n            (0, controllermenu_1.drawControllerMenu)();\n        }\n        else if (exports.gameMode == 0) {\n            (0, startscreen_1.drawStartScreen)();\n        }\n        else if (exports.gameMode == 1) {\n            (0, menu_1.drawMainMenu)();\n        }\n        else if (exports.gameMode == 2) {\n            (0, css_1.drawCSS)();\n            //renderVfx();\n        }\n        else if (exports.gameMode == 6) {\n            (0, stageselect_1.drawSSS)();\n        }\n        else if (exports.playing || exports.frameByFrameRender) {\n            /*delta = timestamp - lastFrameTimeMs; // get the delta time since last frame\n            lastFrameTimeMs = timestamp;\n            console.log(delta);*/\n            //console.log(\"test2\");\n            var rStart = performance.now();\n            clearScreen();\n            if ((0, vfx_1.isShowSFX)()) {\n                (0, stagerender_1.drawBackground)();\n            }\n            (0, stagerender_1.drawStage)();\n            for (var i = 0; i < 4; i++) {\n                if (exports.playerType[i] > -1) {\n                    (0, render_1.renderPlayer)(i);\n                }\n            }\n            (0, article_1.renderArticles)();\n            (0, renderVfx_1.renderVfx)();\n            (0, render_1.renderOverlay)(true);\n            if (exports.showDebug) {\n                var diff = performance.now() - rStart;\n                exports.renderTime[0] += diff;\n                exports.renderTime[0] /= 2;\n                if (diff >= 10) {\n                    exports.renderTime[3]++;\n                }\n                if (diff > exports.renderTime[1]) {\n                    exports.renderTime[1] = diff;\n                }\n                if (diff < exports.renderTime[2]) {\n                    exports.renderTime[2] = diff;\n                }\n                dom.renderAvg.innerHTML = Math.round(exports.renderTime[0]);\n                dom.renderHigh.innerHTML = Math.round(exports.renderTime[1]);\n                dom.renderLow.innerHTML = Math.round(exports.renderTime[2]);\n                dom.renderPeak.innerHTML = exports.renderTime[3];\n            }\n        }\n        if (exports.frameByFrameRender) {\n            (0, render_1.renderForeground)();\n        }\n        exports.frameByFrameRender = false;\n        //renderToMain();\n        //console.log(performance.now());\n    }\n    else {\n        if (exports.playing) {\n            (0, renderVfx_1.renderVfx)(true);\n        }\n    }\n}\nfunction buildPlayerObject(i) {\n    exports.player[i] = new player_1.playerObject(exports.characterSelections[i], exports.startingPoint[i], exports.startingFace[i]);\n    exports.player[i].phys.ECB1 = [new Vec2D_1.Vec2D(exports.startingPoint[i].x, exports.startingPoint[i].y), new Vec2D_1.Vec2D(exports.startingPoint[i].x, exports.startingPoint[i].y), new Vec2D_1.Vec2D(exports.startingPoint[i].x, exports.startingPoint[i].y), new Vec2D_1.Vec2D(exports.startingPoint[i].x, exports.startingPoint[i].y)];\n    exports.player[i].phys.ECBp = [new Vec2D_1.Vec2D(exports.startingPoint[i].x, exports.startingPoint[i].y), new Vec2D_1.Vec2D(exports.startingPoint[i].x, exports.startingPoint[i].y), new Vec2D_1.Vec2D(exports.startingPoint[i].x, exports.startingPoint[i].y), new Vec2D_1.Vec2D(exports.startingPoint[i].x, exports.startingPoint[i].y)];\n    exports.player[i].difficulty = exports.cpuDifficulty[i];\n}\nfunction initializePlayers(i, target) {\n    buildPlayerObject(i);\n    if (target) {\n        (0, drawVfx_1.drawVfx)({\n            name: \"entrance\",\n            pos: new Vec2D_1.Vec2D(activeStage_1.activeStage.startingPoint[0].x, activeStage_1.activeStage.startingPoint[0].y)\n        });\n    }\n    else {\n        (0, drawVfx_1.drawVfx)({\n            name: \"entrance\",\n            pos: new Vec2D_1.Vec2D(exports.startingPoint[i][0], exports.startingPoint[i][1])\n        });\n    }\n}\nfunction startGame() {\n    (0, activeStage_1.setVsStage)(exports.stageSelect);\n    (0, stagerender_1.setBackgroundType)(Math.round(Math.random()));\n    changeGamemode(3);\n    (0, vfxQueue_1.resetVfxQueue)();\n    for (var n = 0; n < 4; n++) {\n        if (exports.playerType[n] > -1) {\n            initializePlayers(n, false);\n            (0, render_1.renderPlayer)(n);\n            exports.player[n].inCSS = false;\n        }\n        if (exports.versusMode) {\n            exports.player[n].stocks = 1;\n        }\n    }\n    exports.matchTimer = 480;\n    exports.startTimer = 1.5;\n    exports.starting = true;\n    music_1.MusicManager.stopWhatisPlaying();\n    switch (exports.stageSelect) {\n        case 0:\n            music_1.MusicManager.playBattleFieldLoop();\n            break;\n        case 1:\n            music_1.MusicManager.playyStoryLoop();\n            break;\n        case 2:\n            music_1.MusicManager.playpStadiumLoop();\n            break;\n        case 3:\n            music_1.MusicManager.playDreamLandLoop();\n            break;\n        case 4:\n            music_1.MusicManager.playfinaldLoop();\n            break;\n        case 5:\n            music_1.MusicManager.playfodLoop();\n            break;\n        default:\n            break;\n    }\n    (0, drawVfx_1.drawVfx)({\n        name: \"start\",\n        pos: new Vec2D_1.Vec2D(0, 0)\n    });\n    exports.findingPlayers = false;\n    exports.playing = true;\n}\nfunction endGame(input) {\n    exports.gameEnd = false;\n    (0, render_1.resetLostStockQueue)();\n    (0, hitDetection_1.setPhantonQueue)([]);\n    (0, article_1.resetAArticles)();\n    music_1.MusicManager.stopWhatisPlaying();\n    changeVolume(music_1.MusicManager, audiomenu_1.masterVolume[1], 1);\n    exports.playing = false;\n    clearScreen();\n    (0, stagerender_1.drawStage)();\n    (0, css_2.setTokenPosSnapToChar)(0);\n    (0, css_2.setTokenPosSnapToChar)(1);\n    (0, css_2.setTokenPosSnapToChar)(2);\n    (0, css_2.setTokenPosSnapToChar)(3);\n    if (exports.gameMode == 3) {\n        changeGamemode(2);\n        music_1.MusicManager.playMenuLoop();\n        exports.pause = [[true, true], [true, true], [true, true], [true, true]];\n        exports.frameAdvance = [\n            [true, true],\n            [true, true],\n            [true, true],\n            [true, true]\n        ];\n        exports.findingPlayers = true;\n        positionPlayersInCSS();\n        for (var i = 0; i < 4; i++) {\n            if (exports.playerType[i] > -1) {\n                if (exports.player[i].actionState == \"FURAFURA\") {\n                    sfx_1.sounds.furaloop.stop(exports.player[i].furaLoopID);\n                }\n                //input[i][0].a = true; // do\n                //input[i][1].a = true; // not\n                exports.player[i].inCSS = true;\n                exports.player[i].phys.face = 1;\n                exports.player[i].actionState = \"WAIT\";\n                exports.player[i].timer = 0;\n            }\n        }\n    }\n}\nfunction finishGame(input) {\n    exports.gameEnd = true;\n    exports.playing = false;\n    exports.fg2.save();\n    exports.fg2.textAlign = \"center\";\n    var text = \"Game!\";\n    var size = 300;\n    var textScale = 1;\n    var textGrad = exports.fg2.createLinearGradient(0, 200, 0, 520);\n    if (exports.matchTimer <= 0) {\n        text = \"Time!\";\n        sfx_1.sounds.time.play();\n        textGrad.addColorStop(0, \"black\");\n        textGrad.addColorStop(0.5, \"black\");\n        textGrad.addColorStop(0.7, \"rgb(21, 51, 180)\");\n        textGrad.addColorStop(1, \"rgb(71, 94, 250)\");\n    }\n    else {\n        sfx_1.sounds.game.play();\n        textGrad.addColorStop(0, \"black\");\n        textGrad.addColorStop(0.4, \"black\");\n        textGrad.addColorStop(0.7, \"rgb(167, 27, 40)\");\n        textGrad.addColorStop(1, \"rgb(255, 31, 52)\");\n    }\n    exports.fg2.scale(1, textScale);\n    exports.fg2.fillStyle = textGrad;\n    exports.fg2.lineWidth = 40;\n    exports.fg2.strokeStyle = \"black\";\n    exports.fg2.font = \"900 \" + size + \"px Arial\";\n    exports.fg2.strokeText(text, 600, 470 / textScale);\n    exports.fg2.lineWidth = 20;\n    exports.fg2.strokeStyle = \"white\";\n    exports.fg2.font = \"900 \" + size + \"px Arial\";\n    exports.fg2.strokeText(text, 600, 470 / textScale);\n    exports.fg2.font = \"900 \" + size + \"px Arial\";\n    exports.fg2.fillText(text, 600, 470 / textScale);\n    exports.fg2.restore();\n    music_1.MusicManager.stopWhatisPlaying();\n    setTimeout(function () {\n        endGame(input);\n    }, 2500);\n}\nfunction onFullScreenChange() {\n    var fullscreenElement = document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement;\n    // if in fullscreen mode fullscreenElement won't be null\n    var cont = document.getElementById(\"topButtonContainer\");\n    var icn = document.querySelectorAll(\".topButton\");\n    if (fullscreenElement != null) {\n        cont.style.transition = \"opacity 0.5s linear 0s\";\n        cont.style.opacity = 0;\n        ;\n        setTimeout(function () {\n            var i;\n            for (i = 0; i < icn.length; i++) {\n                icn[i].style.height = \"5px\";\n            }\n            cont.style.height = \"5px\";\n            resize();\n        }, 500);\n        (0, jquery_1.default)(\"#keyboardPrompt\").hide();\n        (0, jquery_1.default)(\"#keyboardControlsImg\").hide();\n        (0, jquery_1.default)(\"#controllerSupportContainer\").hide();\n        (0, jquery_1.default)(\"#debugButtonEdit\").empty().append(\"OFF\");\n        (0, jquery_1.default)(\"#debug\").hide();\n        (0, jquery_1.default)(\"#players\").hide();\n        (0, jquery_1.default)(\"body\").css(\"overflow\", \"hidden\");\n        showHeader = false;\n    }\n    else {\n        var i;\n        for (i = 0; i < icn.length; i++) {\n            icn[i].style.height = \"25px\";\n        }\n        cont.style.height = \"31px\";\n        cont.style.transition = \"opacity 0.5s linear 0s\";\n        cont.style.opacity = 1;\n    }\n}\nfunction start() {\n    if (exports.holiday === 1) {\n        (0, jquery_1.default)(\"#layerButton\").after('<div id=\"snowButton\" class=\"gameButton\" style=\"width:90px\"><img src=\"assets/christmas/snowflake.png\" height=17 width=17 style=\"display:inline-block\"/><p style=\"width:30px;display:inline-block\"><span id=\"snowButtonEdit\">150</span></p><div id=\"snowMinus\" class=\"snowControl\" style=\"display:inline-block;padding:3px\"><p style=\"padding:0;font-size:20px\">-</p></div><div id=\"snowPlus\" style=\"display:inline-block;padding:3px\"><p style=\"padding:0;font-size:17px\">+</p></div></div>');\n    }\n    for (var i = 0; i < 4; i++) {\n        buildPlayerObject(i);\n        exports.player[i].phys.face = 1;\n        exports.player[i].actionState = \"WAIT\";\n    }\n    cacheDom();\n    (0, keyboardmenu_1.getKeyboardCookie)();\n    giveMedals();\n    (0, audiomenu_1.getAudioCookies)();\n    (0, gameplaymenu_1.getGameplayCookies)();\n    (0, jquery_1.default)(\"#keyboardButton\").click(function () {\n        (0, jquery_1.default)(\"#keyboardControlsImg\").toggle();\n        (0, jquery_1.default)(\"#keyboardPrompt\").hide();\n    });\n    (0, jquery_1.default)(\"#controllerButton\").click(function () {\n        (0, jquery_1.default)(\"#controllerSupportContainer\").toggle();\n    });\n    exports.layers.BG1 = document.getElementById(\"background1Canvas\");\n    exports.bg1 = exports.layers.BG1.getContext(\"2d\");\n    exports.layers.BG2 = document.getElementById(\"background2Canvas\");\n    exports.bg2 = exports.layers.BG2.getContext(\"2d\");\n    exports.layers.FG1 = document.getElementById(\"foreground1Canvas\");\n    exports.fg1 = exports.layers.FG1.getContext(\"2d\");\n    exports.layers.FG2 = document.getElementById(\"foreground2Canvas\");\n    exports.fg2 = exports.layers.FG2.getContext(\"2d\");\n    exports.layers.UI = document.getElementById(\"uiCanvas\");\n    exports.ui = exports.layers.UI.getContext(\"2d\");\n    exports.bg1.fillStyle = \"rgb(0, 0, 0)\";\n    exports.bg1.fillRect(0, 0, exports.layers.BG1.width, exports.layers.BG1.height);\n    let nullInputBuffers = [(0, input_1.nullInputs)(), (0, input_1.nullInputs)(), (0, input_1.nullInputs)(), (0, input_1.nullInputs)()];\n    gameTick(nullInputBuffers);\n    renderTick();\n    (0, jquery_1.default)(\"#effectsButton\").click(function () {\n        if ((0, vfx_1.isShowSFX)()) {\n            (0, jquery_1.default)(\"#effectsButtonEdit\").empty().append(\"OFF\");\n        }\n        else {\n            (0, jquery_1.default)(\"#effectsButtonEdit\").empty().append(\"ON\");\n        }\n        (0, vfx_1.toggleShowSFX)();\n    });\n    (0, jquery_1.default)(\"#fpsButton\").click(function () {\n        if (fps30) {\n            (0, jquery_1.default)(\"#fpsButtonEdit\").empty().append(\"60\");\n        }\n        else {\n            (0, jquery_1.default)(\"#fpsButtonEdit\").empty().append(\"30\");\n        }\n        fps30 ^= true;\n    });\n    (0, jquery_1.default)(\"#alphaButton\").click(function () {\n        if ((0, transparency_1.getTransparency)()) {\n            (0, jquery_1.default)(\"#alphaButtonEdit\").empty().append(\"OFF\");\n        }\n        else {\n            (0, jquery_1.default)(\"#alphaButtonEdit\").empty().append(\"ON\");\n        }\n        (0, transparency_1.toggleTransparency)();\n    });\n    (0, jquery_1.default)(\"#layerButton\").hover(function () {\n        (0, jquery_1.default)(\"#layerDropdown\").toggle();\n    });\n    (0, jquery_1.default)(\".layer\").click(function () {\n        var id = (0, jquery_1.default)(this).attr(\"id\");\n        switch (id) {\n            case \"layer1\":\n                exports.layerSwitches.BG1 ^= true;\n                (0, jquery_1.default)(\"#background1Canvas\").toggle();\n                break;\n            case \"layer2\":\n                exports.layerSwitches.BG2 ^= true;\n                (0, jquery_1.default)(\"#background2Canvas\").toggle();\n                break;\n            case \"layer3\":\n                exports.layerSwitches.FG1 ^= true;\n                (0, jquery_1.default)(\"#foreground1Canvas\").toggle();\n                break;\n            case \"layer4\":\n                exports.layerSwitches.FG2 ^= true;\n                (0, jquery_1.default)(\"#foreground2Canvas\").toggle();\n                break;\n            case \"layer5\":\n                exports.layerSwitches.UI ^= true;\n                (0, jquery_1.default)(\"#uiCanvas\").toggle();\n                break;\n            default:\n                break;\n        }\n        (0, jquery_1.default)(this).toggleClass(\"layerOn\");\n    });\n    (0, jquery_1.default)(\"#debugButton\").click(function () {\n        if (exports.showDebug) {\n            for (let i = 0; i < 4; i++) {\n                document.getElementById(\"gamepadSVG\" + i).style.display = \"none\";\n            }\n            (0, jquery_1.default)(\"#debugButtonEdit\").empty().append(\"OFF\");\n            (0, jquery_1.default)(\"#debug\").hide();\n            (0, jquery_1.default)(\"#players\").hide();\n            (0, jquery_1.default)(\"body\").css(\"overflow\", \"hidden\");\n            //var mY = Math.max(($(window).height()-750)/2,0);\n            //$(\"#display\").css(\"margin\",mY+\"px 0px 0px \"+mX+\"px\");\n        }\n        else {\n            for (let i = 0; i < 4; i++) {\n                if (exports.playerType[i] !== -1) {\n                    (0, drawGamepad_1.updateGamepadSVGColour)(i, \"gamepadSVG\" + i);\n                    document.getElementById(\"gamepadSVG\" + i).style.display = \"\";\n                }\n            }\n            (0, jquery_1.default)(\"#debugButtonEdit\").empty().append(\"ON\");\n            (0, jquery_1.default)(\"#debug\").show();\n            (0, jquery_1.default)(\"#players\").show();\n            (0, jquery_1.default)(\"body\").css(\"overflow\", \"scroll\");\n            //var mY = Math.max(($(window).height()-900)/2,0);\n            //$(\"#display\").css(\"margin\",mY+\" 0px 0px px \"+mX+\"px\");\n        }\n        exports.showDebug ^= true;\n        resize();\n    });\n    (0, jquery_1.default)(\"#hideButton\").click(function () {\n        (0, jquery_1.default)(\"#header\").toggle();\n        showHeader ^= true;\n        resize();\n    });\n    (0, jquery_1.default)(\"#fullscreenButton\").click(function () {\n        if ((document.fullScreenElement && document.fullScreenElement !== null) || (!document.mozFullScreen && !document.webkitIsFullScreen)) {\n            if (document.documentElement.requestFullScreen) {\n                document.documentElement.requestFullScreen();\n            }\n            else if (document.documentElement.mozRequestFullScreen) {\n                document.documentElement.mozRequestFullScreen();\n            }\n            else if (document.documentElement.webkitRequestFullScreen) {\n                document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\n            }\n        }\n        else {\n            if (document.cancelFullScreen) {\n                document.cancelFullScreen();\n            }\n            else if (document.mozCancelFullScreen) {\n                document.mozCancelFullScreen();\n            }\n            else if (document.webkitCancelFullScreen) {\n                document.webkitCancelFullScreen();\n            }\n        }\n        // resize();\n    });\n    document.addEventListener(\"fullscreenchange\", onFullScreenChange, false);\n    document.addEventListener(\"webkitfullscreenchange\", onFullScreenChange, false);\n    document.addEventListener(\"mozfullscreenchange\", onFullScreenChange, false);\n    (0, jquery_1.default)(\".topButton\").hover(function () {\n        (0, jquery_1.default)(this).children(\".buttonDetails\").toggle();\n    });\n    if (mobile === false) {\n        (0, jquery_1.default)(\".button\").hover(function () {\n            (0, jquery_1.default)(this).toggleClass(\"buttonhighlighted\");\n        });\n        (0, jquery_1.default)(\".socialmedia\").hover(function () {\n            (0, jquery_1.default)(this).toggleClass(\"socialmediahighlight\");\n        });\n        (0, jquery_1.default)(\".sugbtn\").hover(function () {\n            (0, jquery_1.default)(this).toggleClass(\"sugbtnhighlight\");\n        });\n    }\n    (0, jquery_1.default)(\"#appsButton\").hover(function () {\n        (0, jquery_1.default)(\"#appsDropdown\").show();\n    }, function () {\n        (0, jquery_1.default)(\"#appsDropdown\").hide();\n    });\n    if (exports.holiday === 1) {\n        (0, jquery_1.default)(\"#snowMinus\").click(function () {\n            exports.snowCount -= 20;\n            if (exports.snowCount < 0) {\n                exports.snowCount = 0;\n            }\n            (0, jquery_1.default)(\"#snowButtonEdit\").text(exports.snowCount);\n        });\n        (0, jquery_1.default)(\"#snowPlus\").click(function () {\n            exports.snowCount += 20;\n            if (exports.snowCount > 1200) {\n                exports.snowCount = 1200;\n            }\n            (0, jquery_1.default)(\"#snowButtonEdit\").text(exports.snowCount);\n        });\n    }\n    (0, jquery_1.default)(\"#replay\").change(function () {\n        // grab the first image in the FileList object and pass it to the function\n        (0, replay_1.loadReplay)(this.files[0]);\n    });\n    resize();\n}\nwindow.start = start;\nfunction customDeadzone() {\n    this.ls = new Vec2D_1.Vec2D(0, 0);\n    this.cs = new Vec2D_1.Vec2D(0, 0);\n    this.l = 0;\n    this.r = 0;\n}\nfunction addShine(val) {\n    exports.shine += val;\n}\nfunction setShine(val) {\n    exports.shine = val;\n}\nfunction setFindingPlayers(val) {\n    exports.findingPlayers = val;\n}\nfunction setPlaying(val) {\n    exports.playing = val;\n}\nfunction setCreditsPlayer(val) {\n    exports.creditsPlayer = val;\n}\nfunction setCalibrationPlayer(val) {\n    exports.calibrationPlayer = val;\n}\nconst dom = {};\nfunction cacheDom() {\n    const elementIds = [\n        \"matchMinutes\",\n        \"matchSeconds\",\n        \"gamelogicAvg\",\n        \"gamelogicHigh\",\n        \"gamelogicLow\",\n        \"gamelogicPeak\",\n        \"renderAvg\",\n        \"renderHigh\",\n        \"renderLow\",\n        \"renderPeak\",\n    ];\n    elementIds.forEach((id) => {\n        dom[id] = document.getElementById(id);\n    });\n}\n;\nfunction setCS(index, val) {\n    exports.characterSelections[index] = val;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxxQkFBcUI7QUFDekI7QUFDQTtBQUNBLElBQUksZ0JBQWdCO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwySkFBMko7QUFDM0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZJQUE2STtBQUM3STtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJLHVCQUF1QjtBQUMzQjtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxvQkFBb0I7QUFDNUI7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxlQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZLGlCQUFpQjtBQUM3QjtBQUNBLGdCQUFnQixpQkFBaUI7QUFDakM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFlBQVksaUJBQWlCO0FBQzdCO0FBQ0EsZ0JBQWdCLGlCQUFpQjtBQUNqQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxhQUFhO0FBQ2pCO0FBQ0E7QUFDQSxJQUFJLGFBQWE7QUFDakI7QUFDQTtBQUNBLElBQUksc0JBQXNCO0FBQzFCO0FBQ0E7QUFDQSxJQUFJLGVBQWU7QUFDbkI7QUFDQTtBQUNBLElBQUkscUJBQXFCO0FBQ3pCO0FBQ0E7QUFDQSxJQUFJLHlCQUF5QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZWxlZWxpZ2h0Ly4vc3JjL21haW4vbWFpbi50cz8xM2UzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5ibGFzdHpvbmUgPSBleHBvcnRzLnN0YWdlU2VsZWN0ID0gZXhwb3J0cy5yZXNwYXduUG9pbnRzID0gZXhwb3J0cy5lZGdlT3JpZW50YXRpb24gPSBleHBvcnRzLmVkZ2VPZmZzZXQgPSBleHBvcnRzLmVkZ2VzID0gZXhwb3J0cy53YWxsc1IgPSBleHBvcnRzLndhbGxzTCA9IGV4cG9ydHMucGxhdGZvcm1zID0gZXhwb3J0cy5ncm91bmQgPSBleHBvcnRzLnN0YXJ0aW5nRmFjZSA9IGV4cG9ydHMuc3RhcnRpbmdQb2ludCA9IGV4cG9ydHMuZnJhbWVBZHZhbmNlID0gZXhwb3J0cy5wYXVzZSA9IGV4cG9ydHMuY29sb3VycyA9IGV4cG9ydHMuY29zdHVtZVRpbWVvdXQgPSBleHBvcnRzLnBQYWwgPSBleHBvcnRzLnRhZ1RleHQgPSBleHBvcnRzLmhhc1RhZyA9IGV4cG9ydHMucGFsZXR0ZXMgPSBleHBvcnRzLnJhbmRvbVRhZ3MgPSBleHBvcnRzLnZlcnN1c01vZGUgPSBleHBvcnRzLmdhbWVNb2RlID0gZXhwb3J0cy5zaG93RGVidWcgPSBleHBvcnRzLmZpbmRpbmdQbGF5ZXJzID0gZXhwb3J0cy5mcmFtZUJ5RnJhbWVSZW5kZXIgPSBleHBvcnRzLndhc0ZyYW1lQnlGcmFtZSA9IGV4cG9ydHMuZnJhbWVCeUZyYW1lID0gZXhwb3J0cy5wbGF5aW5nID0gZXhwb3J0cy5hY3RpdmVQb3J0cyA9IGV4cG9ydHMucG9ydHMgPSBleHBvcnRzLmNwdURpZmZpY3VsdHkgPSBleHBvcnRzLnBsYXllclR5cGUgPSBleHBvcnRzLnBsYXllckFtb3VudCA9IGV4cG9ydHMuY3VycmVudFBsYXllcnMgPSBleHBvcnRzLm1UeXBlID0gZXhwb3J0cy5maXJzdFRpbWVEZXRlY3RlZCA9IGV4cG9ydHMudXNpbmdDdXN0b21Db250cm9scyA9IGV4cG9ydHMuY29udHJvbGxlclJlc2V0Q291bnRkb3ducyA9IGV4cG9ydHMuZ2FtZUVuZCA9IGV4cG9ydHMuY2FsaWJyYXRpb25QbGF5ZXIgPSBleHBvcnRzLmNyZWRpdHNQbGF5ZXIgPSBleHBvcnRzLnNoaW5lID0gZXhwb3J0cy5jaGFyYWN0ZXJTZWxlY3Rpb25zID0gZXhwb3J0cy5mcmFtZXJhdGUgPSBleHBvcnRzLmdhbWVsb2dpY1RpbWUgPSBleHBvcnRzLnJlbmRlclRpbWUgPSBleHBvcnRzLnBsYXllciA9IGV4cG9ydHMuc25vd0NvdW50ID0gZXhwb3J0cy5ob2xpZGF5ID0gdm9pZCAwO1xuZXhwb3J0cy5sYXllclN3aXRjaGVzID0gZXhwb3J0cy5sYXllcnMgPSBleHBvcnRzLmNhbnZhc01haW4gPSBleHBvcnRzLmMgPSBleHBvcnRzLnVpID0gZXhwb3J0cy5mZzIgPSBleHBvcnRzLmZnMSA9IGV4cG9ydHMuYmcyID0gZXhwb3J0cy5iZzEgPSBleHBvcnRzLmtleUJpbmRpbmcgPSBleHBvcnRzLmtleUJpbmQgPSBleHBvcnRzLmtleXMgPSBleHBvcnRzLnVzaW5nTG9jYWxTdG9yYWdlID0gZXhwb3J0cy5tYXRjaFRpbWVyID0gZXhwb3J0cy5zdGFydFRpbWVyID0gZXhwb3J0cy5zdGFydGluZyA9IHZvaWQgMDtcbmV4cG9ydHMuc2V0Q29udHJvbGxlclJlc2V0ID0gc2V0Q29udHJvbGxlclJlc2V0O1xuZXhwb3J0cy5zZXRVc2luZ0N1c3RvbUNvbnRyb2xzID0gc2V0VXNpbmdDdXN0b21Db250cm9scztcbmV4cG9ydHMuc2V0TXR5cGUgPSBzZXRNdHlwZTtcbmV4cG9ydHMuc2V0Q3VycmVudFBsYXllciA9IHNldEN1cnJlbnRQbGF5ZXI7XG5leHBvcnRzLnNldFRhZ1RleHQgPSBzZXRUYWdUZXh0O1xuZXhwb3J0cy5zZXRTdGFnZVNlbGVjdCA9IHNldFN0YWdlU2VsZWN0O1xuZXhwb3J0cy5zZXRTdGFydGluZyA9IHNldFN0YXJ0aW5nO1xuZXhwb3J0cy5zZXRTdGFydFRpbWVyID0gc2V0U3RhcnRUaW1lcjtcbmV4cG9ydHMuZ2V0U3RhcnRUaW1lciA9IGdldFN0YXJ0VGltZXI7XG5leHBvcnRzLmFkZE1hdGNoVGltZXIgPSBhZGRNYXRjaFRpbWVyO1xuZXhwb3J0cy5zZXRNYXRjaFRpbWVyID0gc2V0TWF0Y2hUaW1lcjtcbmV4cG9ydHMuZ2V0TWF0Y2hUaW1lciA9IGdldE1hdGNoVGltZXI7XG5leHBvcnRzLnNldENvb2tpZSA9IHNldENvb2tpZTtcbmV4cG9ydHMuc2V0VmVyc3VzTW9kZSA9IHNldFZlcnN1c01vZGU7XG5leHBvcnRzLmdldENvb2tpZSA9IGdldENvb2tpZTtcbmV4cG9ydHMuc2V0S2V5QmluZGluZyA9IHNldEtleUJpbmRpbmc7XG5leHBvcnRzLm92ZXJyaWRlS2V5Ym9hcmRFdmVudCA9IG92ZXJyaWRlS2V5Ym9hcmRFdmVudDtcbmV4cG9ydHMuZGlzYWJsZWRFdmVudFByb3BhZ2F0aW9uID0gZGlzYWJsZWRFdmVudFByb3BhZ2F0aW9uO1xuZXhwb3J0cy5TVkcgPSBTVkc7XG5leHBvcnRzLm1hdGNoVGltZXJUaWNrID0gbWF0Y2hUaW1lclRpY2s7XG5leHBvcnRzLnNjcmVlblNoYWtlID0gc2NyZWVuU2hha2U7XG5leHBvcnRzLnBlcmNlbnRTaGFrZSA9IHBlcmNlbnRTaGFrZTtcbmV4cG9ydHMuZmluZFBsYXllcnMgPSBmaW5kUGxheWVycztcbmV4cG9ydHMuc2V0UGxheWVyVHlwZSA9IHNldFBsYXllclR5cGU7XG5leHBvcnRzLmFkZFBsYXllciA9IGFkZFBsYXllcjtcbmV4cG9ydHMudG9nZ2xlUG9ydCA9IHRvZ2dsZVBvcnQ7XG5leHBvcnRzLnBvc2l0aW9uUGxheWVyc0luQ1NTID0gcG9zaXRpb25QbGF5ZXJzSW5DU1M7XG5leHBvcnRzLmNoYW5nZUdhbWVtb2RlID0gY2hhbmdlR2FtZW1vZGU7XG5leHBvcnRzLmludGVycHJldElucHV0cyA9IGludGVycHJldElucHV0cztcbmV4cG9ydHMucmVuZGVyVG9NYWluID0gcmVuZGVyVG9NYWluO1xuZXhwb3J0cy51cGRhdGUgPSB1cGRhdGU7XG5leHBvcnRzLmdhbWVUaWNrID0gZ2FtZVRpY2s7XG5leHBvcnRzLmNsZWFyU2NyZWVuID0gY2xlYXJTY3JlZW47XG5leHBvcnRzLnJlbmRlclRpY2sgPSByZW5kZXJUaWNrO1xuZXhwb3J0cy5idWlsZFBsYXllck9iamVjdCA9IGJ1aWxkUGxheWVyT2JqZWN0O1xuZXhwb3J0cy5pbml0aWFsaXplUGxheWVycyA9IGluaXRpYWxpemVQbGF5ZXJzO1xuZXhwb3J0cy5zdGFydEdhbWUgPSBzdGFydEdhbWU7XG5leHBvcnRzLmVuZEdhbWUgPSBlbmRHYW1lO1xuZXhwb3J0cy5maW5pc2hHYW1lID0gZmluaXNoR2FtZTtcbmV4cG9ydHMuc3RhcnQgPSBzdGFydDtcbmV4cG9ydHMuY3VzdG9tRGVhZHpvbmUgPSBjdXN0b21EZWFkem9uZTtcbmV4cG9ydHMuYWRkU2hpbmUgPSBhZGRTaGluZTtcbmV4cG9ydHMuc2V0U2hpbmUgPSBzZXRTaGluZTtcbmV4cG9ydHMuc2V0RmluZGluZ1BsYXllcnMgPSBzZXRGaW5kaW5nUGxheWVycztcbmV4cG9ydHMuc2V0UGxheWluZyA9IHNldFBsYXlpbmc7XG5leHBvcnRzLnNldENyZWRpdHNQbGF5ZXIgPSBzZXRDcmVkaXRzUGxheWVyO1xuZXhwb3J0cy5zZXRDYWxpYnJhdGlvblBsYXllciA9IHNldENhbGlicmF0aW9uUGxheWVyO1xuZXhwb3J0cy5jYWNoZURvbSA9IGNhY2hlRG9tO1xuZXhwb3J0cy5zZXRDUyA9IHNldENTO1xuLyogZXNsaW50LWRpc2FibGUgKi9cbmNvbnN0IGNzc18xID0gcmVxdWlyZShcIi4uL21lbnVzL2Nzc1wiKTtcbmNvbnN0IHBsYXllcl8xID0gcmVxdWlyZShcIi4uL21haW4vcGxheWVyXCIpO1xuY29uc3Qgc2V0dGluZ3NfMSA9IHJlcXVpcmUoXCIuLi9zZXR0aW5nc1wiKTtcbmNvbnN0IHN0YXJ0dXBfMSA9IHJlcXVpcmUoXCIuLi9tZW51cy9zdGFydHVwXCIpO1xuY29uc3QgbWVudV8xID0gcmVxdWlyZShcIi4uL21lbnVzL21lbnVcIik7XG5jb25zdCBzZnhfMSA9IHJlcXVpcmUoXCIuLi9tYWluL3NmeFwiKTtcbmNvbnN0IHN0YXJ0c2NyZWVuXzEgPSByZXF1aXJlKFwiLi4vbWVudXMvc3RhcnRzY3JlZW5cIik7XG5jb25zdCBzdGFnZXJlbmRlcl8xID0gcmVxdWlyZShcIi4uL3N0YWdlcy9zdGFnZXJlbmRlclwiKTtcbmNvbnN0IHN0YWdlc2VsZWN0XzEgPSByZXF1aXJlKFwiLi4vbWVudXMvc3RhZ2VzZWxlY3RcIik7XG5jb25zdCBhdWRpb21lbnVfMSA9IHJlcXVpcmUoXCIuLi9tZW51cy9hdWRpb21lbnVcIik7XG5jb25zdCBnYW1lcGxheW1lbnVfMSA9IHJlcXVpcmUoXCIuLi9tZW51cy9nYW1lcGxheW1lbnVcIik7XG5jb25zdCBrZXlib2FyZG1lbnVfMSA9IHJlcXVpcmUoXCIuLi9tZW51cy9rZXlib2FyZG1lbnVcIik7XG5jb25zdCBjb250cm9sbGVybWVudV8xID0gcmVxdWlyZShcIi4uL21lbnVzL2NvbnRyb2xsZXJtZW51XCIpO1xuY29uc3QgY3JlZGl0c18xID0gcmVxdWlyZShcIi4uL21lbnVzL2NyZWRpdHNcIik7XG5jb25zdCByZW5kZXJfMSA9IHJlcXVpcmUoXCIuLi9tYWluL3JlbmRlclwiKTtcbmNvbnN0IGFjdGlvblN0YXRlU2hvcnRjdXRzXzEgPSByZXF1aXJlKFwiLi4vcGh5c2ljcy9hY3Rpb25TdGF0ZVNob3J0Y3V0c1wiKTtcbmNvbnN0IGhpdERldGVjdGlvbl8xID0gcmVxdWlyZShcIi4uL3BoeXNpY3MvaGl0RGV0ZWN0aW9uXCIpO1xuY29uc3QgYXJ0aWNsZV8xID0gcmVxdWlyZShcIi4uL3BoeXNpY3MvYXJ0aWNsZVwiKTtcbmNvbnN0IGFpXzEgPSByZXF1aXJlKFwiLi4vbWFpbi9haVwiKTtcbmNvbnN0IHBoeXNpY3NfMSA9IHJlcXVpcmUoXCIuLi9waHlzaWNzL3BoeXNpY3NcIik7XG5jb25zdCBqcXVlcnlfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwianF1ZXJ5XCIpKTtcbmNvbnN0IHRyYW5zcGFyZW5jeV8xID0gcmVxdWlyZShcIi4uL21haW4vdmZ4L3RyYW5zcGFyZW5jeVwiKTtcbmNvbnN0IGRyYXdWZnhfMSA9IHJlcXVpcmUoXCIuLi9tYWluL3ZmeC9kcmF3VmZ4XCIpO1xuY29uc3QgdmZ4UXVldWVfMSA9IHJlcXVpcmUoXCIuLi9tYWluL3ZmeC92ZnhRdWV1ZVwiKTtcbmNvbnN0IGFjdGl2ZVN0YWdlXzEgPSByZXF1aXJlKFwiLi4vc3RhZ2VzL2FjdGl2ZVN0YWdlXCIpO1xuY29uc3QgbXVzaWNfMSA9IHJlcXVpcmUoXCIuL211c2ljXCIpO1xuY29uc3QgdmZ4XzEgPSByZXF1aXJlKFwiLi4vbWFpbi92ZnhcIik7XG5jb25zdCByZW5kZXJWZnhfMSA9IHJlcXVpcmUoXCIuL3ZmeC9yZW5kZXJWZnhcIik7XG5jb25zdCBCb3gyRF8xID0gcmVxdWlyZShcIi4vdXRpbC9Cb3gyRFwiKTtcbmNvbnN0IFZlYzJEXzEgPSByZXF1aXJlKFwiLi91dGlsL1ZlYzJEXCIpO1xuY29uc3Qgc3RyZWFtY2xpZW50XzEgPSByZXF1aXJlKFwiLi9tdWx0aXBsYXllci9zdHJlYW1jbGllbnRcIik7XG5jb25zdCByZXBsYXlfMSA9IHJlcXVpcmUoXCIuL3JlcGxheVwiKTtcbmNvbnN0IGlucHV0XzEgPSByZXF1aXJlKFwiLi4vaW5wdXQvaW5wdXRcIik7XG5jb25zdCBtZWxlZUlucHV0c18xID0gcmVxdWlyZShcIi4uL2lucHV0L21lbGVlSW5wdXRzXCIpO1xuY29uc3QgZmluZEdhbWVwYWRJbmZvXzEgPSByZXF1aXJlKFwiLi4vaW5wdXQvZ2FtZXBhZC9maW5kR2FtZXBhZEluZm9cIik7XG5jb25zdCBjdXN0b21fMSA9IHJlcXVpcmUoXCIuLi9pbnB1dC9nYW1lcGFkL2dhbWVwYWRzL2N1c3RvbVwiKTtcbmNvbnN0IHJldHJpZXZlR2FtZXBhZElucHV0c18xID0gcmVxdWlyZShcIi4uL2lucHV0L2dhbWVwYWQvcmV0cmlldmVHYW1lcGFkSW5wdXRzXCIpO1xuY29uc3QgZHJhd0dhbWVwYWRfMSA9IHJlcXVpcmUoXCIuLi9pbnB1dC9nYW1lcGFkL2RyYXdHYW1lcGFkXCIpO1xuY29uc3QgZGVlcENvcHlPYmplY3RfMSA9IHJlcXVpcmUoXCIuL3V0aWwvZGVlcENvcHlPYmplY3RcIik7XG5jb25zdCBjc3NfMiA9IHJlcXVpcmUoXCIuLi9tZW51cy9jc3NcIik7XG4vKmdsb2JhbHMgcGVyZm9ybWFuY2UqL1xuZXhwb3J0cy5ob2xpZGF5ID0gMDtcbmV4cG9ydHMuc25vd0NvdW50ID0gMTUwO1xuLy90b2RvIGZpbmQgJ1BsYXllcicgb2JqZWN0XG5leHBvcnRzLnBsYXllciA9IFswLCAwLCAwLCAwXTtcbmV4cG9ydHMucmVuZGVyVGltZSA9IFsxMCwgMCwgMTAwLCAwXTtcbmV4cG9ydHMuZ2FtZWxvZ2ljVGltZSA9IFs1LCAwLCAxMDAsIDBdO1xuZXhwb3J0cy5mcmFtZXJhdGUgPSBbMCwgMCwgMF07XG5leHBvcnRzLmNoYXJhY3RlclNlbGVjdGlvbnMgPSBbMCwgMCwgMCwgMF07XG5leHBvcnRzLnNoaW5lID0gMC41O1xuZXhwb3J0cy5jcmVkaXRzUGxheWVyID0gMDtcbmV4cG9ydHMuY2FsaWJyYXRpb25QbGF5ZXIgPSAwO1xuZXhwb3J0cy5nYW1lRW5kID0gZmFsc2U7XG5leHBvcnRzLmNvbnRyb2xsZXJSZXNldENvdW50ZG93bnMgPSBbMCwgMCwgMCwgMF07XG5mdW5jdGlvbiBzZXRDb250cm9sbGVyUmVzZXQoaSkge1xuICAgIGV4cG9ydHMuY29udHJvbGxlclJlc2V0Q291bnRkb3duc1tpXSA9IDA7XG59XG5sZXQga2V5Ym9hcmRPY2N1cGllZCA9IGZhbHNlO1xuZXhwb3J0cy51c2luZ0N1c3RvbUNvbnRyb2xzID0gW2ZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXTtcbmZ1bmN0aW9uIHNldFVzaW5nQ3VzdG9tQ29udHJvbHMoaSwgYm9vbGVhbiwgaW5mbykge1xuICAgIGV4cG9ydHMudXNpbmdDdXN0b21Db250cm9sc1tpXSA9IGJvb2xlYW47XG4gICAgaWYgKGJvb2wpIHtcbiAgICAgICAgZXhwb3J0cy5tVHlwZVtpXSA9IGN1c3RvbV8xLmN1c3RvbUdhbWVwYWRJbmZvW2V4cG9ydHMuY3VycmVudFBsYXllcnNbaV1dO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXhwb3J0cy5tVHlwZVtpXSA9IGluZm87XG4gICAgfVxufVxuZXhwb3J0cy5maXJzdFRpbWVEZXRlY3RlZCA9IFt0cnVlLCB0cnVlLCB0cnVlLCB0cnVlXTtcbndpbmRvdy5tVHlwZSA9IFtudWxsLCBudWxsLCBudWxsLCBudWxsXTtcbmV4cG9ydHMubVR5cGUgPSBbbnVsbCwgbnVsbCwgbnVsbCwgbnVsbF07XG5mdW5jdGlvbiBzZXRNdHlwZShpbmRleCwgdmFsKSB7XG4gICAgZXhwb3J0cy5tVHlwZVtpbmRleF0gPSB2YWw7XG59XG5leHBvcnRzLmN1cnJlbnRQbGF5ZXJzID0gW107XG5mdW5jdGlvbiBzZXRDdXJyZW50UGxheWVyKGluZGV4LCB2YWwpIHtcbiAgICBleHBvcnRzLmN1cnJlbnRQbGF5ZXJzW2luZGV4XSA9IHZhbDtcbn1cbmV4cG9ydHMucGxheWVyQW1vdW50ID0gMDtcbmV4cG9ydHMucGxheWVyVHlwZSA9IFstMSwgLTEsIC0xLCAtMV07XG5leHBvcnRzLmNwdURpZmZpY3VsdHkgPSBbMywgMywgMywgM107XG5leHBvcnRzLnBvcnRzID0gMDtcbmV4cG9ydHMuYWN0aXZlUG9ydHMgPSBbXTtcbmV4cG9ydHMucGxheWluZyA9IGZhbHNlO1xuZXhwb3J0cy5mcmFtZUJ5RnJhbWUgPSBmYWxzZTtcbmV4cG9ydHMud2FzRnJhbWVCeUZyYW1lID0gZmFsc2U7XG5leHBvcnRzLmZyYW1lQnlGcmFtZVJlbmRlciA9IGZhbHNlO1xuZXhwb3J0cy5maW5kaW5nUGxheWVycyA9IHRydWU7XG5leHBvcnRzLnNob3dEZWJ1ZyA9IGZhbHNlO1xuZXhwb3J0cy5nYW1lTW9kZSA9IDIwO1xuLy8gMjA6U3RhcnR1cFxuLy8gMTM6RGF0YSBNZW51XG4vLyAxMjpLZXlib2FyZCBDb250cm9sc1xuLy8gMTE6R2FtZXBsYXkgTWVudVxuLy8gMTA6U291bmQgTWVudVxuLy8gOTogLVxuLy8gODogLVxuLy8gNzpUYXJnZXQgU2VsZWN0XG4vLyA2OlN0YWdlIFNlbGVjdCAoVlMpXG4vLyA1OlRhcmdldCBQbGF5aW5nXG4vLyA0OlRhcmdldCBCdWlsZGVyXG4vLyAzOlBsYXlpbmcgKFZTKVxuLy8gMjpDU1Ncbi8vIDE6TWFpbiBNZW51XG4vLyAwOlRpdGxlIFNjcmVlblxuZXhwb3J0cy52ZXJzdXNNb2RlID0gMDtcbmV4cG9ydHMucmFuZG9tVGFncyA9IFtcIk5FTyFcIiwgXCJTRUxGXCIsIFwiTk9WQVwiLCBcIlBOREFcIiwgXCJQYW5kYVwiLCBcIkxGRk5cIiwgXCJTY29ycFwiLCBcIkFaXCIsIFwiQVhFXCIsIFwiVGVtcG9cIiwgXCJUTVBPXCIsIFwiW0Fdcm1hZGFcIiwgXCJXQkFMTFpcIiwgXCJXZXN0YmFsbHpcIiwgXCJQUE1EXCIsIFwiS3JleWdhc21cIiwgXCJNMktcIiwgXCJNYW5nMFwiLCBcIlVTQVwiLCBcIlNDQVJcIiwgXCJUT1BIXCIsIFwiKC5ZLilcIiwgXCJIQk9YXCIsIFwiSHVuZ3J5Qm94XCIsIFwiUExVUFwiLCBcIlNocm9vbWVkXCIsIFwiU0ZBVFwiLCBcIldpenpcIiwgXCJMdWNreVwiLCBcIlMySlwiLCBcIlNpbGVudFdvbGZcIiwgXCJhTVNhXCIsIFwiUzJKXCIsIFwiSGF4JFwiXTtcbmV4cG9ydHMucGFsZXR0ZXMgPSBbW1wicmdiKDI1MCwgODksIDg5KVwiLCBcInJnYigyNTUsIDE3MCwgMTcwKVwiLCBcInJnYmEoMjU1LCAyMDYsIDExMSwgXCIsIFwicmdiKDI0NCwgNjgsIDY4KVwiLCBcInJnYmEoMjU1LCAyMjUsIDE2NywgXCJdLFxuICAgIFtcInJnYig5NSwgMjE2LCA4NClcIiwgXCJyZ2IoMTg0LCAyNTMsIDE1NClcIiwgXCJyZ2JhKDI1MiwgOTUsIDk1LCBcIiwgXCJyZ2IoMjU1LCAxODIsIDk2KVwiLCBcInJnYmEoMjU0LCAxNDEsIDE0MSwgXCJdLFxuICAgIFtcInJnYig1LCAxOTUsIDI1NSlcIiwgXCJyZ2IoMTIxLCAyMjMsIDI1NSlcIiwgXCJyZ2JhKDIxOCwgOTYsIDI1NCwgXCIsIFwicmdiKDIzMSwgMTM0LCAyNTUpXCIsIFwicmdiYSgyMzAsIDE0NCwgMjU1LCBcIl0sXG4gICAgW1wicmdiKDI1NSwgMTg3LCA3MClcIiwgXCJyZ2IoMjQ4LCAyNTUsIDEyMilcIiwgXCJyZ2JhKDgwLCAxODIsIDI1NSwgXCIsIFwicmdiKDI1NSwgMTQyLCA3MClcIiwgXCJyZ2JhKDEzOSwgMjAzLCAyNDksIFwiXSxcbiAgICBbXCJyZ2IoMTc3LCA4OSwgMjU1KVwiLCBcInJnYigyMDMsIDE0NCwgMjU1KVwiLCBcInJnYmEoMTQ0LCAyNTUsIDExMCwgXCIsIFwicmdiKDI0NywgMTI2LCAyNTApXCIsIFwicmdiYSgxOTAsIDI1NSwgMTcwLCBcIl0sXG4gICAgW1wicmdiKDE4MiwgMTMxLCA3MClcIiwgXCJyZ2IoMjUyLCAxOTQsIDEyNilcIiwgXCJyZ2JhKDQ3LCAxODYsIDEyMywgXCIsIFwicmdiKDI1NSwgMTEyLCA2NilcIiwgXCJyZ2JhKDExMSwgMjE0LCAxNjgsIFwiXSxcbiAgICBbXCJyZ2IoMjMyLCAyMzIsIDIwOClcIiwgXCJyZ2IoMjU1LCAyNTUsIDI1NSlcIiwgXCJyZ2JhKDI0NCwgMjU1LCAxMTIsIFwiLCBcInJnYigxOTEsIDExOSwgMTE5KVwiLCBcInJnYmEoMjU1LCAyNTUsIDIwMCwgXCJdXTtcbmV4cG9ydHMuaGFzVGFnID0gW2ZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlXTtcbmV4cG9ydHMudGFnVGV4dCA9IFtcIlwiLCBcIlwiLCBcIlwiLCBcIlwiXTtcbmZ1bmN0aW9uIHNldFRhZ1RleHQoaW5kZXgsIHZhbHVlKSB7XG4gICAgZXhwb3J0cy50YWdUZXh0W2luZGV4XSA9IHZhbHVlO1xuICAgIGV4cG9ydHMuaGFzVGFnW2luZGV4XSA9IHRydWU7XG59XG5leHBvcnRzLnBQYWwgPSBbMCwgMSwgMiwgM107XG5leHBvcnRzLmNvc3R1bWVUaW1lb3V0ID0gW107XG5leHBvcnRzLmNvbG91cnMgPSBbXCJyZ2JhKDQsIDI1NSwgODIsIDAuNjIpXCIsIFwicmdiYSgxMTcsIDIwLCAyNTUsIDAuNjMpXCIsIFwicmdiYSgyNTUsIDIwLCAyMCwgMC42MylcIiwgXCJyZ2JhKDI1NSwgMjMyLCAyMCwgMC42MylcIl07XG5leHBvcnRzLnBhdXNlID0gW1t0cnVlLCB0cnVlXSwgW3RydWUsIHRydWVdLCBbdHJ1ZSwgdHJ1ZV0sIFt0cnVlLCB0cnVlXV07XG5leHBvcnRzLmZyYW1lQWR2YW5jZSA9IFtbdHJ1ZSwgdHJ1ZV0sIFt0cnVlLCB0cnVlXSwgW3RydWUsIHRydWVdLCBbdHJ1ZSwgdHJ1ZV1dO1xuZXhwb3J0cy5zdGFydGluZ1BvaW50ID0gW1stNTAsIDUwXSwgWzUwLCA1MF0sIFstMjUsIDVdLCBbMjUsIDVdXTtcbmV4cG9ydHMuc3RhcnRpbmdGYWNlID0gWzEsIC0xLCAxLCAtMV07XG5leHBvcnRzLmdyb3VuZCA9IFtbLTY4LjQsIDBdLCBbNjguNCwgMF1dO1xuZXhwb3J0cy5wbGF0Zm9ybXMgPSBbW1stNTcuNiwgMjcuMl0sIFstMjAsIDI3LjJdXSwgW1syMCwgMjcuMl0sIFs1Ny42LCAyNy4yXV0sIFtbLTE4LjgsIDU0LjRdLCBbMTguOCwgNTQuNF1dXTtcbmV4cG9ydHMud2FsbHNMID0gW1tbLTY4LjQsIDBdLCBbLTY4LjQsIC0xMDguOF1dXTtcbmV4cG9ydHMud2FsbHNSID0gW1tbNjguNCwgMF0sIFs2OC40LCAtMTA4LjhdXV07XG5leHBvcnRzLmVkZ2VzID0gW1tbLTY4LjQsIDBdLCBbLTYzLjQsIDBdXSwgW1s2OC40LCAwXSwgWzYzLjQsIDBdXV07XG4vL2VkZ2VPZmZzZXQgPSBbWy03MS4zLC0yMy43XSxbNzEuMywtMjMuN11dO1xuZXhwb3J0cy5lZGdlT2Zmc2V0ID0gW1stMi45LCAtMjMuN10sIFsyLjksIC0yMy43XV07XG5leHBvcnRzLmVkZ2VPcmllbnRhdGlvbiA9IFsxLCAtMV07XG5leHBvcnRzLnJlc3Bhd25Qb2ludHMgPSBbWy01MCwgNTAsIDFdLCBbNTAsIDUwLCAtMV0sIFsyNSwgMzUsIDFdLCBbLTI1LCAzNSwgLTFdXTtcbmV4cG9ydHMuc3RhZ2VTZWxlY3QgPSAwO1xuZnVuY3Rpb24gc2V0U3RhZ2VTZWxlY3QodmFsKSB7XG4gICAgZXhwb3J0cy5zdGFnZVNlbGVjdCA9IHZhbDtcbn1cbmV4cG9ydHMuYmxhc3R6b25lID0gbmV3IEJveDJEXzEuQm94MkQoWy0yMjQsIDIwMF0sIFsyMjQsIC0xMDguOF0pO1xuZXhwb3J0cy5zdGFydGluZyA9IHRydWU7XG5mdW5jdGlvbiBzZXRTdGFydGluZyh2YWwpIHtcbiAgICBleHBvcnRzLnN0YXJ0aW5nID0gdmFsO1xufVxuZXhwb3J0cy5zdGFydFRpbWVyID0gMS41O1xuZnVuY3Rpb24gc2V0U3RhcnRUaW1lcih2YWwpIHtcbiAgICBleHBvcnRzLnN0YXJ0VGltZXIgPSB2YWw7XG59XG5mdW5jdGlvbiBnZXRTdGFydFRpbWVyKCkge1xuICAgIHJldHVybiBleHBvcnRzLnN0YXJ0VGltZXI7XG59XG4vL21hdGNoVGltZXIgPSA1OTk5Ljk5O1xuZXhwb3J0cy5tYXRjaFRpbWVyID0gNDgwO1xuZnVuY3Rpb24gYWRkTWF0Y2hUaW1lcih2YWwpIHtcbiAgICBleHBvcnRzLm1hdGNoVGltZXIgKz0gdmFsO1xufVxuZnVuY3Rpb24gc2V0TWF0Y2hUaW1lcih2YWwpIHtcbiAgICBleHBvcnRzLm1hdGNoVGltZXIgPSB2YWw7XG59XG5mdW5jdGlvbiBnZXRNYXRjaFRpbWVyKCkge1xuICAgIHJldHVybiBleHBvcnRzLm1hdGNoVGltZXI7XG59XG5leHBvcnRzLnVzaW5nTG9jYWxTdG9yYWdlID0gZmFsc2U7XG5pZiAodHlwZW9mIChTdG9yYWdlKSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIC8vIENvZGUgZm9yIGxvY2FsU3RvcmFnZS9zZXNzaW9uU3RvcmFnZS5cbiAgICBleHBvcnRzLnVzaW5nTG9jYWxTdG9yYWdlID0gdHJ1ZTtcbiAgICBjb25zb2xlLmxvZyhcImxvY2FsIHN0b3JhZ2Ugd29ya3NcIik7XG59XG5lbHNlIHtcbiAgICAvLyBTb3JyeSEgTm8gV2ViIFN0b3JhZ2Ugc3VwcG9ydC4uXG4gICAgY29uc29sZS5sb2coXCJsb2NhbCBzdG9yYWdlIGRvZXMgbm90IHdvcmtcIik7XG59XG5mdW5jdGlvbiBzZXRDb29raWUoY25hbWUsIGN2YWx1ZSwgZXhkYXlzKSB7XG4gICAgdmFyIGQgPSBuZXcgRGF0ZSgpO1xuICAgIGQuc2V0VGltZShkLmdldFRpbWUoKSArIChleGRheXMgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XG4gICAgdmFyIGV4cCA9IFwiZXhwaXJlcz1cIiArIGQudG9VVENTdHJpbmcoKTtcbiAgICBkb2N1bWVudC5jb29raWUgPSBjbmFtZSArIFwiPVwiICsgY3ZhbHVlICsgXCI7IFwiICsgZXhwO1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGNuYW1lLCBjdmFsdWUpO1xufVxuZnVuY3Rpb24gc2V0VmVyc3VzTW9kZSh2YWwpIHtcbiAgICBleHBvcnRzLnZlcnN1c01vZGUgPSB2YWw7XG59XG5mdW5jdGlvbiBnZXRDb29raWUoY25hbWUpIHtcbiAgICBpZiAoZXhwb3J0cy51c2luZ0xvY2FsU3RvcmFnZSkge1xuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY25hbWUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIG5hbWUgPSBjbmFtZSArIFwiPVwiO1xuICAgICAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGMgPSBjYVtpXTtcbiAgICAgICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PSAnICcpXG4gICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xuICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbn1cbmV4cG9ydHMua2V5cyA9IHt9O1xuZXhwb3J0cy5rZXlCaW5kID0gMDtcbmV4cG9ydHMua2V5QmluZGluZyA9IGZhbHNlO1xuZnVuY3Rpb24gc2V0S2V5QmluZGluZyh2YWwpIHtcbiAgICBleHBvcnRzLmtleUJpbmRpbmcgPSB2YWw7XG59XG5mdW5jdGlvbiBvdmVycmlkZUtleWJvYXJkRXZlbnQoZSkge1xuICAgIGlmICghc2hvd2luZ0NvZGUgJiYgY3NzXzEuY2hvb3NpbmdUYWcgPT0gLTEgJiYgZS5rZXlDb2RlICE9IDEyMiAmJiBlLmtleUNvZGUgIT0gMTE2KSB7XG4gICAgICAgIHN3aXRjaCAoZS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwia2V5ZG93blwiOlxuICAgICAgICAgICAgICAgIGlmICghZXhwb3J0cy5rZXlzW2Uua2V5Q29kZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwb3J0cy5rZXlzW2Uua2V5Q29kZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBleHBvcnRzLmtleUJpbmQgPSBlLmtleUNvZGU7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHMua2V5QmluZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIGtleSBkb3duIHN0dWZmIGhlcmVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwia2V5dXBcIjpcbiAgICAgICAgICAgICAgICBkZWxldGUgKGV4cG9ydHMua2V5c1tlLmtleUNvZGVdKTtcbiAgICAgICAgICAgICAgICAvLyBkbyBrZXkgdXAgc3R1ZmYgaGVyZVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGRpc2FibGVkRXZlbnRQcm9wYWdhdGlvbihlKTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAoY3NzXzEuY2hvb3NpbmdUYWcgPiAtMSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJrZXlkb3duXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzLmtleXNbMTNdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwia2V5dXBcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSAoZXhwb3J0cy5rZXlzWzEzXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG59XG47XG5mdW5jdGlvbiBkaXNhYmxlZEV2ZW50UHJvcGFnYXRpb24oZSkge1xuICAgIGlmIChlKSB7XG4gICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbjtcbmRvY3VtZW50Lm9ua2V5ZG93biA9IG92ZXJyaWRlS2V5Ym9hcmRFdmVudDtcbmRvY3VtZW50Lm9ua2V5dXAgPSBvdmVycmlkZUtleWJvYXJkRXZlbnQ7XG4vKnZhciBrZXlzID0gW107XG5leHBvcnQgY29uc3Qgb25rZXl1cCAoZSkge1xuICBrZXlzW2Uua2V5Q29kZV09ZmFsc2U7XG59XG5leHBvcnQgY29uc3Qgb25rZXlkb3duIChlKSB7XG4gIGtleXNbZS5rZXlDb2RlXT10cnVlO1xufSovXG5mdW5jdGlvbiBTVkcodGFnKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCB0YWcpO1xufVxuLyppZiAoR2FtZXBhZC5zdXBwb3J0ZWQpIHtcbiAgICBjb25zb2xlLmxvZyhcImdhbWVwYWQgc3VwcG9ydGVkXCIpO1xufSBlbHNlIHtcbiAgICBjb25zb2xlLmxvZyhcImdhbWVwYWQgbm90IHN1cHBvcnRlZFwiKTtcbn0qL1xud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJnYW1lcGFkY29ubmVjdGVkXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgY29uc29sZS5sb2coXCJHYW1lcGFkIGNvbm5lY3RlZCBhdCBpbmRleCAlZDogJXMuICVkIGJ1dHRvbnMsICVkIGF4ZXMuXCIsIGUuZ2FtZXBhZC5pbmRleCwgZS5nYW1lcGFkLmlkLCBlLmdhbWVwYWQuYnV0dG9ucy5sZW5ndGgsIGUuZ2FtZXBhZC5heGVzLmxlbmd0aCk7XG59KTtcbmlmIChuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMpXG4gICAgY29uc29sZS5sb2cobmF2aWdhdG9yLmdldEdhbWVwYWRzKCkpO1xuZnVuY3Rpb24gbWF0Y2hUaW1lclRpY2soaW5wdXQpIHtcbiAgICBleHBvcnRzLm1hdGNoVGltZXIgLT0gMC4wMTY2Njc7XG4gICAgaWYgKGRvbS5tYXRjaE1pbnV0ZXMgJiYgZG9tLm1hdGNoU2Vjb25kcykge1xuICAgICAgICB2YXIgc2VjID0gKGV4cG9ydHMubWF0Y2hUaW1lciAlIDYwKS50b0ZpeGVkKDIpO1xuICAgICAgICBkb20ubWF0Y2hNaW51dGVzLmlubmVySFRNTCA9IE1hdGguZmxvb3IoZXhwb3J0cy5tYXRjaFRpbWVyIC8gNjApO1xuICAgICAgICBkb20ubWF0Y2hTZWNvbmRzLmlubmVySFRNTCA9IHNlYy5sZW5ndGggPCA1ID8gYDAke3NlY31gIDogc2VjO1xuICAgIH1cbiAgICBpZiAoZXhwb3J0cy5tYXRjaFRpbWVyIDw9IDApIHtcbiAgICAgICAgZmluaXNoR2FtZShpbnB1dCk7XG4gICAgfVxufVxuZnVuY3Rpb24gc2NyZWVuU2hha2Uoa2IpIHtcbiAgICB2YXIgc2VlZCA9IFtNYXRoLnJhbmRvbSgpLCBNYXRoLnJhbmRvbSgpLCBNYXRoLnJhbmRvbSgpLCBNYXRoLnJhbmRvbSgpXTtcbiAgICBleHBvcnRzLmZnMS50cmFuc2xhdGUoa2IgKiAwLjEgKiBzZWVkWzBdLCBrYiAqIDAuMSAqIHNlZWRbMV0pO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBleHBvcnRzLmZnMS50cmFuc2xhdGUoLWtiICogMC4wNSAqIHNlZWRbMF0sIC1rYiAqIDAuMDUgKiBzZWVkWzFdKTsgfSwgMjApO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBleHBvcnRzLmZnMS50cmFuc2xhdGUoLWtiICogMC4wNSAqIHNlZWRbMF0sIC1rYiAqIDAuMDUgKiBzZWVkWzFdKTsgZXhwb3J0cy5mZzEudHJhbnNsYXRlKC1rYiAqIDAuMSAqIHNlZWRbMl0sIC1rYiAqIDAuMSAqIHNlZWRbM10pOyB9LCA0MCk7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGV4cG9ydHMuZmcxLnRyYW5zbGF0ZShrYiAqIDAuMDUgKiBzZWVkWzJdLCBrYiAqIDAuMDUgKiBzZWVkWzNdKTsgfSwgNjApO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBleHBvcnRzLmZnMS50cmFuc2xhdGUoa2IgKiAwLjA1ICogc2VlZFsyXSwga2IgKiAwLjA1ICogc2VlZFszXSk7IH0sIDgwKTtcbn1cbmZ1bmN0aW9uIHBlcmNlbnRTaGFrZShrYiwgaSkge1xuICAgIGV4cG9ydHMucGxheWVyW2ldLnBlcmNlbnRTaGFrZSA9IG5ldyBWZWMyRF8xLlZlYzJEKGtiICogMC4xICogTWF0aC5yYW5kb20oKSwga2IgKiAwLjEgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgZXhwb3J0cy5wbGF5ZXJbaV0ucGVyY2VudFNoYWtlID0gbmV3IFZlYzJEXzEuVmVjMkQoa2IgKiAwLjA1ICogTWF0aC5yYW5kb20oKSwga2IgKiAwLjA1ICogTWF0aC5yYW5kb20oKSk7IH0sIDIwKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgZXhwb3J0cy5wbGF5ZXJbaV0ucGVyY2VudFNoYWtlID0gbmV3IFZlYzJEXzEuVmVjMkQoLWtiICogMC4xICogTWF0aC5yYW5kb20oKSwgLWtiICogMC4xICogTWF0aC5yYW5kb20oKSk7IH0sIDQwKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgZXhwb3J0cy5wbGF5ZXJbaV0ucGVyY2VudFNoYWtlID0gbmV3IFZlYzJEXzEuVmVjMkQoLWtiICogMC4wNSAqIE1hdGgucmFuZG9tKCksIC1rYiAqIDAuMDUgKiBNYXRoLnJhbmRvbSgpKTsgfSwgNjApO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBleHBvcnRzLnBsYXllcltpXS5wZXJjZW50U2hha2UgPSBuZXcgVmVjMkRfMS5WZWMyRCgwLCAwKTsgfSwgODApO1xufVxuZnVuY3Rpb24gZmluZFBsYXllcnMoKSB7XG4gICAgdmFyIGdwcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcyA/IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpIDogKG5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcyA/IG5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcygpIDogW10pO1xuICAgIC8qaWYgKHR5cGVvZiBncHMgIT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICBjb25zb2xlLmxvZyhncHMpO1xuICAgIH0qL1xuICAgIGlmICgha2V5Ym9hcmRPY2N1cGllZCkge1xuICAgICAgICBpZiAoZXhwb3J0cy5nYW1lTW9kZSA8IDIgfHwgZXhwb3J0cy5nYW1lTW9kZSA9PSAyMCkge1xuICAgICAgICAgICAgaWYgKGV4cG9ydHMua2V5c1sxM10gfHwgZXhwb3J0cy5rZXlzW3NldHRpbmdzXzEua2V5TWFwLnNbMF1dIHx8IGV4cG9ydHMua2V5c1tzZXR0aW5nc18xLmtleU1hcC5zWzFdXSkge1xuICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLnBvcnRzIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VHYW1lbW9kZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2tleWJvYXJkUHJvbXB0XCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAga2V5Ym9hcmRPY2N1cGllZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHNmeF8xLnNvdW5kcy5tZW51Rm9yd2FyZC5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLnBvcnRzID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11c2ljXzEuTXVzaWNNYW5hZ2VyLnBsYXlNZW51TG9vcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFkZFBsYXllcihleHBvcnRzLnBvcnRzLCBcImtleWJvYXJkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChleHBvcnRzLmtleXNbc2V0dGluZ3NfMS5rZXlNYXAuYVswXV0gfHwgZXhwb3J0cy5rZXlzW3NldHRpbmdzXzEua2V5TWFwLmFbMV1dKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydHMucG9ydHMgPCA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkT2NjdXBpZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBhZGRQbGF5ZXIoZXhwb3J0cy5wb3J0cywgXCJrZXlib2FyZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGdhbWVwYWQgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMgPyBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKVtpXSA6IChuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMgPyBuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMoKVtpXSA6IG51bGwpO1xuICAgICAgICBpZiAoZXhwb3J0cy5wbGF5ZXJUeXBlW2ldID09PSAyKSB7XG4gICAgICAgICAgICB2YXIgYWxyZWFkeUluID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV4cG9ydHMucG9ydHM7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLmN1cnJlbnRQbGF5ZXJzW2tdID09PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFscmVhZHlJbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhbHJlYWR5SW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZXhwb3J0cy5wb3J0cyA8IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUGxheWVyKGksIDk5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZ2FtZXBhZCA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcyA/IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpW2ldIDogKG5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcyA/IG5hdmlnYXRvci53ZWJraXRHZXRHYW1lcGFkcygpW2ldIDogbnVsbCk7XG4gICAgICAgIGlmICh0eXBlb2YgZ2FtZXBhZCAhPSBcInVuZGVmaW5lZFwiICYmIGdhbWVwYWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGRldGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgZ3BkTmFtZTtcbiAgICAgICAgICAgIHZhciBncGRJbmZvO1xuICAgICAgICAgICAgaWYgKGV4cG9ydHMudXNpbmdDdXN0b21Db250cm9sc1tpXSAmJiBjdXN0b21fMS5jdXN0b21HYW1lcGFkSW5mb1tpXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGdwZE5hbWUgPSBcImN1c3RvbSBjb250cm9sc1wiO1xuICAgICAgICAgICAgICAgIGdwZEluZm8gPSBjdXN0b21fMS5jdXN0b21HYW1lcGFkSW5mb1tpXTtcbiAgICAgICAgICAgICAgICBkZXRlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXliZU5hbWVBbmRJbmZvID0gKDAsIGZpbmRHYW1lcGFkSW5mb18xLmdldEdhbWVwYWROYW1lQW5kSW5mbykoZ2FtZXBhZC5pZCk7XG4gICAgICAgICAgICAgICAgaWYgKG1heWJlTmFtZUFuZEluZm8gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJFcnJvciBpbiAnZmluZFBsYXllcnMnOiBjb250cm9sbGVyIFwiICsgKGkgKyAxKSArIFwiIGRldGVjdGVkIGJ1dCBub3Qgc3VwcG9ydGVkLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJUcnkgbWFudWFsIGNhbGlicmF0aW9uIG9mIHlvdXIgY29udHJvbGxlci5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZXRlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIFtncGROYW1lLCBncGRJbmZvXSA9IG1heWJlTmFtZUFuZEluZm87XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRldGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydHMuZmlyc3RUaW1lRGV0ZWN0ZWRbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJDb250cm9sbGVyIFwiICsgKGkgKyAxKSArIFwiIGlzOiBcIiArIGdwZE5hbWUgKyBcIi5cIik7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHMuZmlyc3RUaW1lRGV0ZWN0ZWRbaV0gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydHMuZ2FtZU1vZGUgPCAyIHx8IGV4cG9ydHMuZ2FtZU1vZGUgPT0gMjApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCgwLCByZXRyaWV2ZUdhbWVwYWRJbnB1dHNfMS5idXR0b25TdGF0ZSkoZ2FtZXBhZCwgZ3BkSW5mbywgXCJzXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxyZWFkeUluID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGV4cG9ydHMucG9ydHM7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLmN1cnJlbnRQbGF5ZXJzW2tdID09IGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxyZWFkeUluID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlJbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLnBvcnRzIDwgNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VHYW1lbW9kZSgxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2tleWJvYXJkUHJvbXB0XCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Z4XzEuc291bmRzLm1lbnVGb3J3YXJkLnBsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4cG9ydHMucG9ydHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11c2ljXzEuTXVzaWNNYW5hZ2VyLnBsYXlNZW51TG9vcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFBsYXllcihpLCBncGRJbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoMCwgcmV0cmlldmVHYW1lcGFkSW5wdXRzXzEuYnV0dG9uU3RhdGUpKGdhbWVwYWQsIGdwZEluZm8sIFwiYVwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFscmVhZHlJbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBleHBvcnRzLnBvcnRzOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0cy5jdXJyZW50UGxheWVyc1trXSA9PSBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFscmVhZHlJbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5SW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhwb3J0cy5wb3J0cyA8IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkUGxheWVyKGksIGdwZEluZm8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTm8gY29udHJvbGxlciBkZXRlY3RlZCBieSBicm93c2VyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gc2V0UGxheWVyVHlwZShwbGF5ZXJTbG90LCB0eXBlKSB7XG4gICAgZXhwb3J0cy5wbGF5ZXJUeXBlW3BsYXllclNsb3RdID0gdHlwZTtcbn1cbmZ1bmN0aW9uIGFkZFBsYXllcihpLCBjb250cm9sbGVySW5mbykge1xuICAgIGlmIChjb250cm9sbGVySW5mbyA9PT0gOTkpIHtcbiAgICAgICAgZXhwb3J0cy5wb3J0cysrO1xuICAgICAgICBleHBvcnRzLmN1cnJlbnRQbGF5ZXJzW2V4cG9ydHMucG9ydHMgLSAxXSA9IGk7XG4gICAgICAgIGV4cG9ydHMucGxheWVyVHlwZVtleHBvcnRzLnBvcnRzIC0gMV0gPSAyO1xuICAgICAgICBleHBvcnRzLm1UeXBlW2V4cG9ydHMucG9ydHMgLSAxXSA9IGNvbnRyb2xsZXJJbmZvO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZXhwb3J0cy5wb3J0cysrO1xuICAgICAgICBleHBvcnRzLmN1cnJlbnRQbGF5ZXJzW2V4cG9ydHMucG9ydHMgLSAxXSA9IGk7XG4gICAgICAgIGV4cG9ydHMucGxheWVyVHlwZVtleHBvcnRzLnBvcnRzIC0gMV0gPSAwO1xuICAgICAgICBleHBvcnRzLm1UeXBlW2V4cG9ydHMucG9ydHMgLSAxXSA9IGNvbnRyb2xsZXJJbmZvO1xuICAgICAgICBpZiAoZXhwb3J0cy5zaG93RGVidWcpIHtcbiAgICAgICAgICAgICgwLCBkcmF3R2FtZXBhZF8xLnVwZGF0ZUdhbWVwYWRTVkdDb2xvdXIpKGksIFwiZ2FtZXBhZFNWR1wiICsgaSk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImdhbWVwYWRTVkdcIiArIGkpLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdG9nZ2xlUG9ydChpKSB7XG4gICAgZXhwb3J0cy5wbGF5ZXJUeXBlW2ldKys7XG4gICAgaWYgKGV4cG9ydHMucGxheWVyVHlwZVtpXSA9PSAzKSB7XG4gICAgICAgIGV4cG9ydHMucGxheWVyVHlwZVtpXSA9IC0xO1xuICAgICAgICBpZiAoZXhwb3J0cy5zaG93RGVidWcpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZXBhZFNWR1wiICsgaSkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChleHBvcnRzLnBsYXllclR5cGVbaV0gPT0gMCAmJiBleHBvcnRzLnBvcnRzIDw9IGkpIHtcbiAgICAgICAgZXhwb3J0cy5wbGF5ZXJUeXBlW2ldID0gMTtcbiAgICAgICAgKDAsIGRyYXdHYW1lcGFkXzEuc2V0R2FtZXBhZFNWR0NvbG91cikoaSwgXCJibGFja1wiKTtcbiAgICAgICAgaWYgKGV4cG9ydHMuc2hvd0RlYnVnKSB7XG4gICAgICAgICAgICAoMCwgZHJhd0dhbWVwYWRfMS51cGRhdGVHYW1lcGFkU1ZHQ29sb3VyKShpLCBcImdhbWVwYWRTVkdcIiArIGkpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lcGFkU1ZHXCIgKyBpKS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIHBvc2l0aW9uUGxheWVyc0luQ1NTKCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgIHZhciB4ID0gKC04MCArIGkgKiA1MCkgKiAyIC8gMztcbiAgICAgICAgdmFyIHkgPSAtMzA7XG4gICAgICAgIGV4cG9ydHMucGxheWVyW2ldLnBoeXMucG9zID0gbmV3IFZlYzJEXzEuVmVjMkQoeCwgeSk7XG4gICAgICAgIGV4cG9ydHMucGxheWVyW2ldLnBoeXMuaHVydGJveCA9IG5ldyBCb3gyRF8xLkJveDJEKFstNCArIHgsIDE4ICsgeV0sIFs0ICsgeCwgeV0pO1xuICAgIH1cbn1cbi8vIDIwOlN0YXJ0dXBcbi8vIDE0OkNvbnRyb2xsZXIgTWVudVxuLy8gMTM6RGF0YSBNZW51XG4vLyAxMjpLZXlib2FyZCBDb250cm9sc1xuLy8gMTE6R2FtZXBsYXkgTWVudVxuLy8gMTA6U291bmQgTWVudVxuLy8gOTogLVxuLy8gODogLVxuLy8gNzpUYXJnZXQgU2VsZWN0XG4vLyA2OlN0YWdlIFNlbGVjdCAoVlMpXG4vLyA1OlRhcmdldCBQbGF5aW5nXG4vLyA0OlRhcmdldCBCdWlsZGVyXG4vLyAzOlBsYXlpbmcgKFZTKVxuLy8gMjpDU1Ncbi8vIDE6TWFpbiBNZW51XG4vLyAwOlRpdGxlIFNjcmVlblxuZnVuY3Rpb24gY2hhbmdlR2FtZW1vZGUobmV3R2FtZW1vZGUpIHtcbiAgICBleHBvcnRzLmJnMS5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gICAgZXhwb3J0cy5iZzEuZmlsbFJlY3QoMCwgMCwgZXhwb3J0cy5sYXllcnMuQkcxLndpZHRoLCBleHBvcnRzLmxheWVycy5CRzEuaGVpZ2h0KTtcbiAgICBleHBvcnRzLmZnMS5jbGVhclJlY3QoMCwgMCwgZXhwb3J0cy5sYXllcnMuRkcxLndpZHRoLCBleHBvcnRzLmxheWVycy5GRzEuaGVpZ2h0KTtcbiAgICBleHBvcnRzLmdhbWVNb2RlID0gbmV3R2FtZW1vZGU7XG4gICAgc3dpdGNoIChuZXdHYW1lbW9kZSkge1xuICAgICAgICAvLyBUSVRMRVNDUkVFTlxuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAoMCwgc3RhcnRzY3JlZW5fMS5kcmF3U3RhcnRTY3JlZW5Jbml0KSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIE1BSU4gTUVOVVxuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjbG9nb1ZpZFwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICgwLCBtZW51XzEuZHJhd01haW5NZW51SW5pdCkoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBDU1NcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgKDAsIGNzc18xLmRyYXdDU1NJbml0KSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIFBsYXlpbmcgKFZTKVxuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAoMCwgc3RhZ2VyZW5kZXJfMS5kcmF3QmFja2dyb3VuZEluaXQpKCk7XG4gICAgICAgICAgICAoMCwgc3RhZ2VyZW5kZXJfMS5kcmF3U3RhZ2VJbml0KSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIFRhcmdldCBCdWlsZGVyXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBUYXJnZXQgUGxheWluZ1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAoMCwgc3RhZ2VyZW5kZXJfMS5kcmF3QmFja2dyb3VuZEluaXQpKCk7XG4gICAgICAgICAgICAoMCwgc3RhZ2VyZW5kZXJfMS5kcmF3U3RhZ2VJbml0KSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIFN0YWdlIHNlbGVjdCAodnMpXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICgwLCBzdGFnZXNlbGVjdF8xLmRyYXdTU1NJbml0KSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIFRhcmdldCBTZWxlY3RcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgZHJhd1RTU0luaXQoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBzb3VuZCBtZW51XG4gICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAoMCwgYXVkaW9tZW51XzEuZHJhd0F1ZGlvTWVudUluaXQpKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gZ2FtZXBsYXkgbWVudVxuICAgICAgICBjYXNlIDExOlxuICAgICAgICAgICAgKDAsIGdhbWVwbGF5bWVudV8xLmRyYXdHYW1lcGxheU1lbnVJbml0KSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIGtleWJvYXJkIG1lbnVcbiAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICgwLCBrZXlib2FyZG1lbnVfMS5kcmF3S2V5Ym9hcmRNZW51SW5pdCkoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBjcmVkaXRzXG4gICAgICAgIGNhc2UgMTM6XG4gICAgICAgICAgICAoMCwgY3JlZGl0c18xLmRyYXdDcmVkaXRzSW5pdCkoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBNdWx0aXBsYXllciBNb2Rlc1xuICAgICAgICBjYXNlIDE0OlxuICAgICAgICAgICAgKDAsIGNvbnRyb2xsZXJtZW51XzEuZHJhd0NvbnRyb2xsZXJNZW51SW5pdCkoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgKDAsIGNzc18xLmRyYXdDU1NJbml0KSgpO1xuICAgICAgICAgICAgKDAsIHN0cmVhbWNsaWVudF8xLmNvbm5lY3RUb01QU2VydmVyKSgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIHN0YXJ0dXBcbiAgICAgICAgY2FzZSAyMDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufVxuLypleHBvcnQgY29uc3QgYWRkUGxheWVyIChpLGdUeXBlLHBUeXBlKXtcbiAgY29uc29sZS5sb2coaSxnVHlwZSxwVHlwZSk7XG5cbiAgY3VycmVudFBsYXllcnMucHVzaChpKTtcbiAgaWYgKHBUeXBlID09IDApe1xuICAgIHBvcnRzKys7XG4gICAgbVR5cGVbcG9ydHMtMV0gPSBnVHlwZTtcbiAgICBwbGF5ZXJUeXBlW3BvcnRzLTFdID0gcFR5cGU7XG5cbiAgICBjb3N0dW1lVGltZW91dC5wdXNoKGZhbHNlKTtcbiAgICBwUGFsLnB1c2gocG9ydHMtMSk7XG4gICAgYnVpbGRQbGF5ZXJPYmplY3QocG9ydHMtMSk7XG4gICAgcGxheWVyW3BsYXllckFtb3VudC0xXS5waHlzLnBvcyA9IG5ldyBWZWMyRCgtMTAwKzI1KihwbGF5ZXJBbW91bnQ9MSksLTQwKTtcbiAgICBwbGF5ZXJbcG9ydHMtMV0ucGh5cy5mYWNlID0gMTtcbiAgICBwbGF5ZXJbcG9ydHMtMV0uYWN0aW9uU3RhdGUgPSAwO1xuICAgICQoXCIjY3VycmVudFBsYXllcnNcIikuYXBwZW5kKCc8ZGl2IGNsYXNzPVwicEJveEJveFwiPjxkaXYgY2xhc3M9XCJwbGF5ZXJCb3hcIiBpZD1cInBCb3gnKyhwb3J0cy0xKSsnXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicrcGFsZXR0ZXNbcFBhbFtwb3J0cy0xXV1bMF0rJztib3JkZXI6NXB4IHNvbGlkICcrcGFsZXR0ZXNbcFBhbFtwb3J0cy0xXV1bMl0rJzAuOClcIj48cD5QJytwb3J0cysnPGJyPjxzcGFuIGNsYXNzPVwiY29udFwiPihDb250LiAnK2krJyk8L3NwYW4+PC9wPjwvZGl2PjxkaXYgaWQ9XCJwVGFnJysocG9ydHMtMSkrJ1wiIGNsYXNzPVwicFRhZ1wiPjx0ZXh0YXJlYSBpZD1cInBUYWdFZGl0JysocG9ydHMtMSkrJ1wiIGNsYXNzPVwicFRhZ0VkaXRcIiBtYXhsZW5ndGg9XCIxMFwiPjwvdGV4dGFyZWE+PC9kaXY+PC9kaXY+Jyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgbVR5cGVbaV0gPSBnVHlwZTtcblxuICAgIGNvc3R1bWVUaW1lb3V0LnB1c2goZmFsc2UpO1xuICAgIHBQYWwucHVzaChpKTtcbiAgICBidWlsZFBsYXllck9iamVjdChpKTtcbiAgICBwbGF5ZXJbcGxheWVyQW1vdW50LTFdLnBoeXMucG9zID0gbmV3IFZlYzJEKC0xMDArMjUqKHBsYXllckFtb3VudD0xKSwtNDApO1xuICAgIHBsYXllcltpXS5waHlzLmZhY2UgPSAxO1xuICAgIHBsYXllcltpXS5hY3Rpb25TdGF0ZSA9IDA7XG4gICAgJChcIiNjdXJyZW50UGxheWVyc1wiKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJwQm94Qm94XCI+PGRpdiBjbGFzcz1cInBsYXllckJveFwiIGlkPVwicEJveCcraSsnXCIgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOicrcGFsZXR0ZXNbcFBhbFtpXV1bMF0rJztib3JkZXI6NXB4IHNvbGlkICcrcGFsZXR0ZXNbcFBhbFtpXV1bMl0rJzAuOClcIj48cD5QJysoaSsxKSsnPGJyPjxzcGFuIGNsYXNzPVwiY29udFwiPihDb250LiAnK2krJyk8L3NwYW4+PC9wPjwvZGl2PjxkaXYgaWQ9XCJwVGFnJytpKydcIiBjbGFzcz1cInBUYWdcIj48dGV4dGFyZWEgaWQ9XCJwVGFnRWRpdCcraSsnXCIgY2xhc3M9XCJwVGFnRWRpdFwiIG1heGxlbmd0aD1cIjEwXCI+PC90ZXh0YXJlYT48L2Rpdj48L2Rpdj4nKTtcbiAgfVxuICBwbGF5ZXJBbW91bnQrKztcbn1cblxuZXhwb3J0IGNvbnN0IHJlbW92ZVBsYXllciAoaSl7XG4gIHBsYXllclR5cGVbaV0gPSAtMTtcbiAgcGxheWVyQW1vdW50LS07XG59Ki9cbmZ1bmN0aW9uIGludGVycHJldElucHV0cyhpLCBhY3RpdmUsIHBsYXllcnR5cGUsIGlucHV0QnVmZmVyKSB7XG4gICAgbGV0IHRlbXBCdWZmZXIgPSAoMCwgaW5wdXRfMS5udWxsSW5wdXRzKSgpO1xuICAgIC8vIGtlZXAgdXBkYXRpbmcgWiBhbmQgU3RhcnQgYWxsIHRoZSB0aW1lLCBldmVuIHdoZW4gcGF1c2VkXG4gICAgZm9yICh2YXIgayA9IDA7IGsgPCA3OyBrKyspIHtcbiAgICAgICAgdGVtcEJ1ZmZlcls3IC0ga10ueiA9IGlucHV0QnVmZmVyWzYgLSBrXS56O1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5zID0gaW5wdXRCdWZmZXJbNiAtIGtdLnM7XG4gICAgfVxuICAgIHRlbXBCdWZmZXJbMF0gPSAoMCwgaW5wdXRfMS5wb2xsSW5wdXRzKShleHBvcnRzLmdhbWVNb2RlLCBleHBvcnRzLmZyYW1lQnlGcmFtZSwgZXhwb3J0cy5tVHlwZVtpXSwgaSwgZXhwb3J0cy5jdXJyZW50UGxheWVyc1tpXSwgZXhwb3J0cy5rZXlzLCBwbGF5ZXJ0eXBlKTtcbiAgICBsZXQgcGFzdE9mZnNldCA9IDA7XG4gICAgaWYgKChleHBvcnRzLmdhbWVNb2RlICE9PSAzICYmIGV4cG9ydHMuZ2FtZU1vZGUgIT09IDUpIHx8IChleHBvcnRzLnBsYXlpbmcgJiYgKGV4cG9ydHMucGF1c2VbaV1bMV0gfHwgIWV4cG9ydHMucGF1c2VbaV1bMF0pKVxuICAgICAgICB8fCBleHBvcnRzLndhc0ZyYW1lQnlGcmFtZVxuICAgICAgICB8fCAoIWV4cG9ydHMucGxheWluZyAmJiBleHBvcnRzLnBhdXNlW2ldWzBdICYmICFleHBvcnRzLnBhdXNlW2ldWzFdKSkge1xuICAgICAgICBwYXN0T2Zmc2V0ID0gMTtcbiAgICB9XG4gICAgZXhwb3J0cy5wYXVzZVtpXVsxXSA9IGV4cG9ydHMucGF1c2VbaV1bMF07XG4gICAgZXhwb3J0cy53YXNGcmFtZUJ5RnJhbWUgPSBmYWxzZTtcbiAgICBleHBvcnRzLmZyYW1lQWR2YW5jZVtpXVsxXSA9IGV4cG9ydHMuZnJhbWVBZHZhbmNlW2ldWzBdO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgNzsgaysrKSB7XG4gICAgICAgIHRlbXBCdWZmZXJbNyAtIGtdLmxzWCA9IGlucHV0QnVmZmVyWzcgLSBrIC0gcGFzdE9mZnNldF0ubHNYO1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5sc1kgPSBpbnB1dEJ1ZmZlcls3IC0gayAtIHBhc3RPZmZzZXRdLmxzWTtcbiAgICAgICAgdGVtcEJ1ZmZlcls3IC0ga10ucmF3WCA9IGlucHV0QnVmZmVyWzcgLSBrIC0gcGFzdE9mZnNldF0ucmF3WDtcbiAgICAgICAgdGVtcEJ1ZmZlcls3IC0ga10ucmF3WSA9IGlucHV0QnVmZmVyWzcgLSBrIC0gcGFzdE9mZnNldF0ucmF3WTtcbiAgICAgICAgdGVtcEJ1ZmZlcls3IC0ga10uY3NYID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS5jc1g7XG4gICAgICAgIHRlbXBCdWZmZXJbNyAtIGtdLmNzWSA9IGlucHV0QnVmZmVyWzcgLSBrIC0gcGFzdE9mZnNldF0uY3NZO1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5yYXdjc1ggPSBpbnB1dEJ1ZmZlcls3IC0gayAtIHBhc3RPZmZzZXRdLnJhd2NzWDtcbiAgICAgICAgdGVtcEJ1ZmZlcls3IC0ga10ucmF3Y3NZID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS5yYXdjc1k7XG4gICAgICAgIHRlbXBCdWZmZXJbNyAtIGtdLmxBID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS5sQTtcbiAgICAgICAgdGVtcEJ1ZmZlcls3IC0ga10uckEgPSBpbnB1dEJ1ZmZlcls3IC0gayAtIHBhc3RPZmZzZXRdLnJBO1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5hID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS5hO1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5iID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS5iO1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS54ID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS54O1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS55ID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS55O1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5yID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS5yO1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5sID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS5sO1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5kbCA9IGlucHV0QnVmZmVyWzcgLSBrIC0gcGFzdE9mZnNldF0uZGw7XG4gICAgICAgIHRlbXBCdWZmZXJbNyAtIGtdLmRkID0gaW5wdXRCdWZmZXJbNyAtIGsgLSBwYXN0T2Zmc2V0XS5kZDtcbiAgICAgICAgdGVtcEJ1ZmZlcls3IC0ga10uZHIgPSBpbnB1dEJ1ZmZlcls3IC0gayAtIHBhc3RPZmZzZXRdLmRyO1xuICAgICAgICB0ZW1wQnVmZmVyWzcgLSBrXS5kdSA9IGlucHV0QnVmZmVyWzcgLSBrIC0gcGFzdE9mZnNldF0uZHU7XG4gICAgfVxuICAgIGlmIChleHBvcnRzLm1UeXBlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICgoZXhwb3J0cy5tVHlwZVtpXSA9PT0gXCJrZXlib2FyZFwiICYmICh0ZW1wQnVmZmVyWzBdLnogfHwgdGVtcEJ1ZmZlclsxXS56KSlcbiAgICAgICAgICAgIHx8IChleHBvcnRzLm1UeXBlW2ldICE9PSBcImtleWJvYXJkXCIgJiYgKHRlbXBCdWZmZXJbMF0ueiAmJiAhdGVtcEJ1ZmZlclsxXS56KSkpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuZnJhbWVBZHZhbmNlW2ldWzBdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4cG9ydHMuZnJhbWVBZHZhbmNlW2ldWzBdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGV4cG9ydHMuZnJhbWVBZHZhbmNlW2ldWzBdICYmICFleHBvcnRzLmZyYW1lQWR2YW5jZVtpXVsxXSAmJiAhZXhwb3J0cy5wbGF5aW5nICYmIGV4cG9ydHMuZ2FtZU1vZGUgIT09IDQpIHtcbiAgICAgICAgZXhwb3J0cy5mcmFtZUJ5RnJhbWUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoZXhwb3J0cy5tVHlwZVtpXSA9PT0gXCJrZXlib2FyZFwiKSB7IC8vIGtleWJvYXJkIGNvbnRyb2xzXG4gICAgICAgIGlmICh0ZW1wQnVmZmVyWzBdLnMgfHwgdGVtcEJ1ZmZlclsxXS5zIHx8IChleHBvcnRzLmdhbWVNb2RlID09PSA1ICYmICh0ZW1wQnVmZmVyWzBdLmR1IHx8IHRlbXBCdWZmZXJbMV0uZHUpKSkge1xuICAgICAgICAgICAgZXhwb3J0cy5wYXVzZVtpXVswXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHBvcnRzLnBhdXNlW2ldWzBdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFleHBvcnRzLnBsYXlpbmcgJiYgKGV4cG9ydHMuZ2FtZU1vZGUgPT0gMyB8fCBleHBvcnRzLmdhbWVNb2RlID09IDUpXG4gICAgICAgICAgICAmJiAodGVtcEJ1ZmZlclswXS5hIHx8IHRlbXBCdWZmZXJbMV0uYSkgJiYgKHRlbXBCdWZmZXJbMF0ubCB8fCB0ZW1wQnVmZmVyWzFdLmwpXG4gICAgICAgICAgICAmJiAodGVtcEJ1ZmZlclswXS5yIHx8IHRlbXBCdWZmZXJbMV0ucikgJiYgKHRlbXBCdWZmZXJbMF0ucyB8fCB0ZW1wQnVmZmVyWzFdLnMpKSB7XG4gICAgICAgICAgICBpZiAodGVtcEJ1ZmZlclswXS5iIHx8IHRlbXBCdWZmZXJbMV0uYikge1xuICAgICAgICAgICAgICAgIHN0YXJ0R2FtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5kR2FtZShpbnB1dEJ1ZmZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW50ZXJwcmV0UGF1c2UoZXhwb3J0cy5wYXVzZVtpXVswXSwgZXhwb3J0cy5wYXVzZVtpXVsxXSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGV4cG9ydHMubVR5cGVbaV0gIT09IG51bGwpIHsgLy8gZ2FtZXBhZCBjb250cm9sc1xuICAgICAgICBpZiAoIWV4cG9ydHMucGxheWluZyAmJiAoZXhwb3J0cy5nYW1lTW9kZSA9PSAzIHx8IGV4cG9ydHMuZ2FtZU1vZGUgPT0gNSkgJiZcbiAgICAgICAgICAgICh0ZW1wQnVmZmVyWzBdLmEgJiYgdGVtcEJ1ZmZlclswXS5sICYmIHRlbXBCdWZmZXJbMF0uciAmJiB0ZW1wQnVmZmVyWzBdLnMpXG4gICAgICAgICAgICAmJiAoISh0ZW1wQnVmZmVyWzFdLmEgJiYgdGVtcEJ1ZmZlclsxXS5sICYmIHRlbXBCdWZmZXJbMV0uciAmJiB0ZW1wQnVmZmVyWzFdLnMpKSkge1xuICAgICAgICAgICAgaWYgKHRlbXBCdWZmZXJbMF0uYikge1xuICAgICAgICAgICAgICAgIHN0YXJ0R2FtZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5kR2FtZShpbnB1dEJ1ZmZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRlbXBCdWZmZXJbMF0ucyB8fCB0ZW1wQnVmZmVyWzBdLmR1ICYmIGV4cG9ydHMuZ2FtZU1vZGUgPT0gNSkge1xuICAgICAgICAgICAgZXhwb3J0cy5wYXVzZVtpXVswXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHBvcnRzLnBhdXNlW2ldWzBdID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29udHJvbGxlciByZXNldCBmdW5jdGlvbmFsaXR5XG4gICAgICAgIGlmICgodGVtcEJ1ZmZlclswXS56IHx8IHRlbXBCdWZmZXJbMF0uZHUpICYmIHRlbXBCdWZmZXJbMF0ueCAmJiB0ZW1wQnVmZmVyWzBdLnkpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuY29udHJvbGxlclJlc2V0Q291bnRkb3duc1tpXSAtPSAxO1xuICAgICAgICAgICAgaWYgKGV4cG9ydHMuY29udHJvbGxlclJlc2V0Q291bnRkb3duc1tpXSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIHRyaWdnZXJzIGNvZGUgaW4gaW5wdXQuanNcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvbnRyb2xsZXIgI1wiICsgKGkgKyAxKSArIFwiIHdhcyByZXNldCFcIik7XG4gICAgICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI3Jlc2V0SW5kaWNhdG9yXCIgKyBpKS5mYWRlSW4oMTAwKTtcbiAgICAgICAgICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjcmVzZXRJbmRpY2F0b3JcIiArIGkpLmZhZGVPdXQoNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4cG9ydHMuY29udHJvbGxlclJlc2V0Q291bnRkb3duc1tpXSA9IDEyNTtcbiAgICAgICAgfVxuICAgICAgICBpbnRlcnByZXRQYXVzZShleHBvcnRzLnBhdXNlW2ldWzBdLCBleHBvcnRzLnBhdXNlW2ldWzFdKTtcbiAgICB9XG4gICAgZWxzZSB7IC8vIEFJXG4gICAgICAgIHRlbXBCdWZmZXJbMF0ucmF3WCA9IHRlbXBCdWZmZXJbMF0ubHNYO1xuICAgICAgICB0ZW1wQnVmZmVyWzBdLnJhd1kgPSB0ZW1wQnVmZmVyWzBdLmxzWTtcbiAgICAgICAgdGVtcEJ1ZmZlclswXS5yYXdjc1ggPSB0ZW1wQnVmZmVyWzBdLmNzWDtcbiAgICAgICAgdGVtcEJ1ZmZlclswXS5yYXdjc1kgPSB0ZW1wQnVmZmVyWzBdLmNzWTtcbiAgICAgICAgdGVtcEJ1ZmZlclswXS5sc1ggPSAoMCwgbWVsZWVJbnB1dHNfMS5kZWFkZW4pKHRlbXBCdWZmZXJbMF0ucmF3WCk7XG4gICAgICAgIHRlbXBCdWZmZXJbMF0ubHNZID0gKDAsIG1lbGVlSW5wdXRzXzEuZGVhZGVuKSh0ZW1wQnVmZmVyWzBdLnJhd1kpO1xuICAgICAgICB0ZW1wQnVmZmVyWzBdLmNzWCA9ICgwLCBtZWxlZUlucHV0c18xLmRlYWRlbikodGVtcEJ1ZmZlclswXS5yYXdjc1gpO1xuICAgICAgICB0ZW1wQnVmZmVyWzBdLmNzWSA9ICgwLCBtZWxlZUlucHV0c18xLmRlYWRlbikodGVtcEJ1ZmZlclswXS5yYXdjc1kpO1xuICAgIH1cbiAgICBpZiAoZXhwb3J0cy5zaG93RGVidWcpIHtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2xzQXhpc1hcIiArIGkpLmVtcHR5KCkuYXBwZW5kKHRlbXBCdWZmZXJbMF0ubHNYLnRvRml4ZWQoMykpO1xuICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjbHNBeGlzWVwiICsgaSkuZW1wdHkoKS5hcHBlbmQodGVtcEJ1ZmZlclswXS5sc1kudG9GaXhlZCgzKSk7XG4gICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNjc0F4aXNYXCIgKyBpKS5lbXB0eSgpLmFwcGVuZCh0ZW1wQnVmZmVyWzBdLmNzWC50b0ZpeGVkKDMpKTtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2NzQXhpc1lcIiArIGkpLmVtcHR5KCkuYXBwZW5kKHRlbXBCdWZmZXJbMF0uY3NZLnRvRml4ZWQoMykpO1xuICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjbEFuYWxvZ1wiICsgaSkuZW1wdHkoKS5hcHBlbmQodGVtcEJ1ZmZlclswXS5sQS50b0ZpeGVkKDMpKTtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI3JBbmFsb2dcIiArIGkpLmVtcHR5KCkuYXBwZW5kKHRlbXBCdWZmZXJbMF0uckEudG9GaXhlZCgzKSk7XG4gICAgICAgICgwLCBkcmF3R2FtZXBhZF8xLnVwZGF0ZUdhbWVwYWRTVkdTdGF0ZSkoaSwgXCJnYW1lcGFkU1ZHXCIgKyBpLCB0ZW1wQnVmZmVyWzBdKTtcbiAgICB9XG4gICAgaWYgKGV4cG9ydHMuZ2FtZU1vZGUgPT09IDE0KSB7IC8vIGNvbnRyb2xsZXIgY2FsaWJyYXRpb24gc2NyZWVuXG4gICAgICAgICgwLCBkcmF3R2FtZXBhZF8xLnVwZGF0ZUdhbWVwYWRTVkdTdGF0ZSkoaSwgXCJnYW1lcGFkU1ZHQ2FsaWJyYXRpb25cIiwgdGVtcEJ1ZmZlclswXSk7XG4gICAgfVxuICAgIGlmIChleHBvcnRzLnNob3dEZWJ1ZyB8fCBleHBvcnRzLmdhbWVNb2RlID09PSAxNCkge1xuICAgICAgICBjb25zdCB3aGljaCA9IChleHBvcnRzLnNob3dEZWJ1ZyAmJiBleHBvcnRzLmdhbWVNb2RlID09PSAxNCkgPyBcImJvdGhcIiA6IGV4cG9ydHMuc2hvd0RlYnVnID8gXCJkZWJ1Z1wiIDogXCJjYWxpYnJhdGlvblwiO1xuICAgICAgICBpZiAodGVtcEJ1ZmZlclswXS54ICYmICF0ZW1wQnVmZmVyWzFdLnggJiYgdGVtcEJ1ZmZlclswXS5kdSkge1xuICAgICAgICAgICAgKDAsIGRyYXdHYW1lcGFkXzEuY3ljbGVHYW1lcGFkQ29sb3VyKShpLCB3aGljaCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRlbXBCdWZmZXJbMF0ueSAmJiAhdGVtcEJ1ZmZlclsxXS55ICYmIHRlbXBCdWZmZXJbMF0uZHUpIHtcbiAgICAgICAgICAgICgwLCBkcmF3R2FtZXBhZF8xLmN5Y2xlR2FtZXBhZENvbG91cikoaSwgd2hpY2gsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3RyZWFtY2xpZW50XzEuZ2l2ZUlucHV0c1tpXSA9PT0gdHJ1ZSkge1xuICAgICAgICAvL3R1cm5zIG91dCBrZXlib2FyZHMgbGVhdmUgZ2FwcyBpbiB0aGUgaW5wdXQgYnVmZmVyXG4gICAgICAgICgwLCBkZWVwQ29weU9iamVjdF8xLmRlZXBPYmplY3RNZXJnZSkodHJ1ZSwgKDAsIGlucHV0XzEubnVsbElucHV0KSgpLCB0ZW1wQnVmZmVyWzBdKTtcbiAgICAgICAgKDAsIHN0cmVhbWNsaWVudF8xLnVwZGF0ZU5ldHdvcmtJbnB1dHMpKHRlbXBCdWZmZXJbMF0sIGkpO1xuICAgIH1cbiAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgIGlmICh0ZW1wQnVmZmVyWzBdLmRsICYmICF0ZW1wQnVmZmVyWzFdLmRsKSB7XG4gICAgICAgICAgICBleHBvcnRzLnBsYXllcltpXS5zaG93TGVkZ2VHcmFiQm94IF49IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRlbXBCdWZmZXJbMF0uZGQgJiYgIXRlbXBCdWZmZXJbMV0uZGQpIHtcbiAgICAgICAgICAgIGV4cG9ydHMucGxheWVyW2ldLnNob3dFQ0IgXj0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGVtcEJ1ZmZlclswXS5kciAmJiAhdGVtcEJ1ZmZlclsxXS5kcikge1xuICAgICAgICAgICAgZXhwb3J0cy5wbGF5ZXJbaV0uc2hvd0hpdGJveCBePSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChleHBvcnRzLmZyYW1lQnlGcmFtZSkge1xuICAgICAgICB0ZW1wQnVmZmVyWzBdLnogPSBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRlbXBCdWZmZXI7XG59XG5mdW5jdGlvbiBpbnRlcnByZXRQYXVzZShwYXVzZTAsIHBhdXNlMSkge1xuICAgIGlmIChwYXVzZTAgJiYgIXBhdXNlMSkge1xuICAgICAgICBpZiAoZXhwb3J0cy5nYW1lTW9kZSA9PSAzIHx8IGV4cG9ydHMuZ2FtZU1vZGUgPT0gNSkge1xuICAgICAgICAgICAgZXhwb3J0cy5wbGF5aW5nIF49IHRydWU7XG4gICAgICAgICAgICBpZiAoIWV4cG9ydHMucGxheWluZykge1xuICAgICAgICAgICAgICAgIHNmeF8xLnNvdW5kcy5wYXVzZS5wbGF5KCk7XG4gICAgICAgICAgICAgICAgY2hhbmdlVm9sdW1lKG11c2ljXzEuTXVzaWNNYW5hZ2VyLCBhdWRpb21lbnVfMS5tYXN0ZXJWb2x1bWVbMV0gKiAwLjMsIDEpO1xuICAgICAgICAgICAgICAgICgwLCByZW5kZXJfMS5yZW5kZXJGb3JlZ3JvdW5kKSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlVm9sdW1lKG11c2ljXzEuTXVzaWNNYW5hZ2VyLCBhdWRpb21lbnVfMS5tYXN0ZXJWb2x1bWVbMV0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5iZzEgPSAwO1xuZXhwb3J0cy5iZzIgPSAwO1xuZXhwb3J0cy5mZzEgPSAwO1xuZXhwb3J0cy5mZzIgPSAwO1xuZXhwb3J0cy51aSA9IDA7XG5leHBvcnRzLmMgPSAwO1xuZXhwb3J0cy5jYW52YXNNYWluID0gMDtcbmV4cG9ydHMubGF5ZXJzID0ge1xuICAgIEJHMTogbnVsbCxcbiAgICBCRzI6IG51bGwsXG4gICAgRkcxOiBudWxsLFxuICAgIEZHMjogbnVsbCxcbiAgICBVSTogbnVsbFxufTtcbmV4cG9ydHMubGF5ZXJTd2l0Y2hlcyA9IHtcbiAgICBCRzE6IHRydWUsXG4gICAgQkcyOiB0cnVlLFxuICAgIEZHMTogdHJ1ZSxcbiAgICBGRzI6IHRydWUsXG4gICAgVUk6IHRydWVcbn07XG5mdW5jdGlvbiByZW5kZXJUb01haW4oKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhleHBvcnRzLmxheWVycyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChleHBvcnRzLmxheWVyU3dpdGNoZXNba2V5c1tpXV0pIHtcbiAgICAgICAgICAgIGV4cG9ydHMuYy5kcmF3SW1hZ2UoZXhwb3J0cy5sYXllcnNba2V5c1tpXV0sIDAsIDApO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gdXBkYXRlKGksIGlucHV0QnVmZmVycykge1xuICAgIGlmICghZXhwb3J0cy5zdGFydGluZykge1xuICAgICAgICBpZiAoZXhwb3J0cy5jdXJyZW50UGxheWVyc1tpXSAhPSAtMSkge1xuICAgICAgICAgICAgaWYgKGV4cG9ydHMucGxheWVyVHlwZVtpXSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZywgdXNlIHRoZSBwcm92aWRlZCBwbGF5ZXIgaSBpbnB1dHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV4cG9ydHMucGxheWVyVHlwZVtpXSA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLnBsYXllcltpXS5hY3Rpb25TdGF0ZSAhPSBcIlNMRUVQXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIGFpXzEucnVuQUkpKGkpOyAvLyBubyBuZWVkIHRvIHJldHVybiBpbnB1dCBzaW5jZSBwb2xsaW5nIHJldHVybnMgYWkgaW5wdXQgaWYgdGhleSBhcmUgYWN0aXZlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgICgwLCBwaHlzaWNzXzEucGh5c2ljcykoaSwgaW5wdXRCdWZmZXJzKTtcbn1cbmxldCBkZWx0YSA9IDA7XG5sZXQgbGFzdEZyYW1lVGltZU1zID0gMDtcbmxldCBsYXN0VXBkYXRlID0gcGVyZm9ybWFuY2Uubm93KCk7XG5mdW5jdGlvbiBnYW1lVGljayhvbGRJbnB1dEJ1ZmZlcnMpIHtcbiAgICB2YXIgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB2YXIgZGlmZiA9IDA7XG4gICAgbGV0IGlucHV0ID0gWygwLCBpbnB1dF8xLm51bGxJbnB1dHMpKCksICgwLCBpbnB1dF8xLm51bGxJbnB1dHMpKCksICgwLCBpbnB1dF8xLm51bGxJbnB1dHMpKCksICgwLCBpbnB1dF8xLm51bGxJbnB1dHMpKCldO1xuICAgIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDAgfHwgZXhwb3J0cy5nYW1lTW9kZSA9PSAyMCkge1xuICAgICAgICBmaW5kUGxheWVycygpO1xuICAgIH1cbiAgICBlbHNlIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDEpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhwbGF5ZXJUeXBlKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBvcnRzLnBvcnRzOyBpKyspIHtcbiAgICAgICAgICAgIGlucHV0W2ldID0gaW50ZXJwcmV0SW5wdXRzKGksIHRydWUsIGV4cG9ydHMucGxheWVyVHlwZVtpXSwgb2xkSW5wdXRCdWZmZXJzW2ldKTtcbiAgICAgICAgICAgICgwLCBtZW51XzEubWVudU1vdmUpKGksIGlucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDEwKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwb3J0cy5wb3J0czsgaSsrKSB7XG4gICAgICAgICAgICBpbnB1dFtpXSA9IGludGVycHJldElucHV0cyhpLCB0cnVlLCBleHBvcnRzLnBsYXllclR5cGVbaV0sIG9sZElucHV0QnVmZmVyc1tpXSk7XG4gICAgICAgICAgICAoMCwgYXVkaW9tZW51XzEuYXVkaW9NZW51Q29udHJvbHMpKGksIGlucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDExKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwb3J0cy5wb3J0czsgaSsrKSB7XG4gICAgICAgICAgICBpbnB1dFtpXSA9IGludGVycHJldElucHV0cyhpLCB0cnVlLCBleHBvcnRzLnBsYXllclR5cGVbaV0sIG9sZElucHV0QnVmZmVyc1tpXSk7XG4gICAgICAgICAgICAoMCwgZ2FtZXBsYXltZW51XzEuZ2FtZXBsYXlNZW51Q29udHJvbHMpKGksIGlucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDEyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwb3J0cy5wb3J0czsgaSsrKSB7XG4gICAgICAgICAgICBpbnB1dFtpXSA9IGludGVycHJldElucHV0cyhpLCB0cnVlLCBleHBvcnRzLnBsYXllclR5cGVbaV0sIG9sZElucHV0QnVmZmVyc1tpXSk7XG4gICAgICAgICAgICAoMCwga2V5Ym9hcmRtZW51XzEua2V5Ym9hcmRNZW51Q29udHJvbHMpKGksIGlucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDEzKSB7XG4gICAgICAgIGlucHV0W2V4cG9ydHMuY3JlZGl0c1BsYXllcl0gPSBpbnRlcnByZXRJbnB1dHMoZXhwb3J0cy5jcmVkaXRzUGxheWVyLCB0cnVlLCBleHBvcnRzLnBsYXllclR5cGVbZXhwb3J0cy5jcmVkaXRzUGxheWVyXSwgb2xkSW5wdXRCdWZmZXJzW2V4cG9ydHMuY3JlZGl0c1BsYXllcl0pO1xuICAgICAgICAoMCwgY3JlZGl0c18xLmNyZWRpdHMpKGV4cG9ydHMuY3JlZGl0c1BsYXllciwgaW5wdXQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDE0KSB7XG4gICAgICAgIC8vIGNvbnRyb2xsZXIgY2FsaWJyYXRpb25cbiAgICAgICAgaW5wdXRbZXhwb3J0cy5jYWxpYnJhdGlvblBsYXllcl0gPSBpbnRlcnByZXRJbnB1dHMoZXhwb3J0cy5jYWxpYnJhdGlvblBsYXllciwgdHJ1ZSwgZXhwb3J0cy5wbGF5ZXJUeXBlW2V4cG9ydHMuY2FsaWJyYXRpb25QbGF5ZXJdLCBvbGRJbnB1dEJ1ZmZlcnNbZXhwb3J0cy5jYWxpYnJhdGlvblBsYXllcl0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDE1KSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXhwb3J0cy5wb3J0czsgaSsrKSB7XG4gICAgICAgICAgICBpbnB1dFtpXSA9IGludGVycHJldElucHV0cyhpLCB0cnVlLCBleHBvcnRzLnBsYXllclR5cGVbaV0sIG9sZElucHV0QnVmZmVyc1tpXSk7XG4gICAgICAgICAgICAoMCwgbWVudV8xLm1lbnVNb3ZlKShpLCBpbnB1dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwb3J0cy5nYW1lTW9kZSA9PSAyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaSA8IGV4cG9ydHMucG9ydHMpIHtcbiAgICAgICAgICAgICAgICBpbnB1dFtpXSA9IGludGVycHJldElucHV0cyhpLCB0cnVlLCBleHBvcnRzLnBsYXllclR5cGVbaV0sIG9sZElucHV0QnVmZmVyc1tpXSk7XG4gICAgICAgICAgICAgICAgKDAsIGNzc18xLmNzc0NvbnRyb2xzKShpLCBpbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhY3Rpb25TdGF0ZVNob3J0Y3V0c18xLmFjdGlvblN0YXRlc1tleHBvcnRzLmNoYXJhY3RlclNlbGVjdGlvbnNbaV1dW2V4cG9ydHMucGxheWVyW2ldLmFjdGlvblN0YXRlXS5tYWluKGksIGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgaWYgKGV4cG9ydHMucGxheWVyVHlwZVtpXSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgKDAsIGhpdERldGVjdGlvbl8xLmhpdERldGVjdCkoaSwgaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICgwLCBoaXREZXRlY3Rpb25fMS5leGVjdXRlSGl0cykoaW5wdXQpO1xuICAgICAgICAoMCwgaGl0RGV0ZWN0aW9uXzEucmVzZXRIaXRRdWV1ZSkoKTtcbiAgICAgICAgZmluZFBsYXllcnMoKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwb3J0cy5nYW1lTW9kZSA9PSA2KSB7XG4gICAgICAgIC8vIHN0YWdlIHNlbGVjdFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgaWYgKGkgPCBleHBvcnRzLnBvcnRzKSB7XG4gICAgICAgICAgICAgICAgaW5wdXRbaV0gPSBpbnRlcnByZXRJbnB1dHMoaSwgdHJ1ZSwgZXhwb3J0cy5wbGF5ZXJUeXBlW2ldLCBvbGRJbnB1dEJ1ZmZlcnNbaV0pO1xuICAgICAgICAgICAgICAgICgwLCBzdGFnZXNlbGVjdF8xLnNzc0NvbnRyb2xzKShpLCBpbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwb3J0cy5wbGF5aW5nIHx8IGV4cG9ydHMuZnJhbWVCeUZyYW1lKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCJ0ZXN0MFwiKTtcbiAgICAgICAgLypkZWx0YSA9IHRpbWVzdGFtcCAtIGxhc3RGcmFtZVRpbWVNczsgLy8gZ2V0IHRoZSBkZWx0YSB0aW1lIHNpbmNlIGxhc3QgZnJhbWVcbiAgICAgICAgbGFzdEZyYW1lVGltZU1zID0gdGltZXN0YW1wO1xuICAgICAgICBjb25zb2xlLmxvZyhkZWx0YSk7Ki9cbiAgICAgICAgdmFyIG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICB2YXIgZHQgPSBub3cgLSBsYXN0VXBkYXRlO1xuICAgICAgICAvL2NvbnNvbGUubG9nKG5vdyk7XG4gICAgICAgIC8vY29uc29sZS5sb2coZHQpO1xuICAgICAgICBsYXN0VXBkYXRlID0gbm93O1xuICAgICAgICAoMCwgaGl0RGV0ZWN0aW9uXzEucmVzZXRIaXRRdWV1ZSkoKTtcbiAgICAgICAgKDAsIGFjdGl2ZVN0YWdlXzEuZ2V0QWN0aXZlU3RhZ2UpKCkubW92aW5nUGxhdGZvcm1zKCk7XG4gICAgICAgICgwLCBhcnRpY2xlXzEuZGVzdHJveUFydGljbGVzKSgpO1xuICAgICAgICAoMCwgYXJ0aWNsZV8xLmV4ZWN1dGVBcnRpY2xlcykoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgIGlmIChleHBvcnRzLnBsYXllclR5cGVbaV0gPiAtMSkge1xuICAgICAgICAgICAgICAgIGlmICghZXhwb3J0cy5zdGFydGluZykge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dFtpXSA9IGludGVycHJldElucHV0cyhpLCB0cnVlLCBleHBvcnRzLnBsYXllclR5cGVbaV0sIG9sZElucHV0QnVmZmVyc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZShpLCBpbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgKDAsIGhpdERldGVjdGlvbl8xLmNoZWNrUGhhbnRvbXMpKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZXhwb3J0cy5wbGF5ZXJUeXBlW2ldID4gLTEpIHtcbiAgICAgICAgICAgICAgICAoMCwgaGl0RGV0ZWN0aW9uXzEuaGl0RGV0ZWN0KShpLCBpbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgKDAsIGhpdERldGVjdGlvbl8xLmV4ZWN1dGVIaXRzKShpbnB1dCk7XG4gICAgICAgICgwLCBhcnRpY2xlXzEuYXJ0aWNsZXNIaXREZXRlY3Rpb24pKCk7XG4gICAgICAgICgwLCBhcnRpY2xlXzEuZXhlY3V0ZUFydGljbGVIaXRzKShpbnB1dCk7XG4gICAgICAgIGlmICghZXhwb3J0cy5zdGFydGluZyAmJiAhZXhwb3J0cy52ZXJzdXNNb2RlKSB7XG4gICAgICAgICAgICBtYXRjaFRpbWVyVGljayhpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBleHBvcnRzLnN0YXJ0VGltZXIgLT0gMC4wMTY2NjY2NztcbiAgICAgICAgICAgIGlmIChleHBvcnRzLnN0YXJ0VGltZXIgPCAwKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5zdGFydGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChleHBvcnRzLmZyYW1lQnlGcmFtZSkge1xuICAgICAgICAgICAgZXhwb3J0cy5mcmFtZUJ5RnJhbWVSZW5kZXIgPSB0cnVlO1xuICAgICAgICAgICAgZXhwb3J0cy53YXNGcmFtZUJ5RnJhbWUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydHMuZnJhbWVCeUZyYW1lID0gZmFsc2U7XG4gICAgICAgIGlmIChleHBvcnRzLnNob3dEZWJ1Zykge1xuICAgICAgICAgICAgZGlmZiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQ7XG4gICAgICAgICAgICBleHBvcnRzLmdhbWVsb2dpY1RpbWVbMF0gKz0gZGlmZjtcbiAgICAgICAgICAgIGV4cG9ydHMuZ2FtZWxvZ2ljVGltZVswXSAvPSAyO1xuICAgICAgICAgICAgaWYgKGRpZmYgPj0gMTApIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLmdhbWVsb2dpY1RpbWVbM10rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaWZmIDwgZXhwb3J0cy5nYW1lbG9naWNUaW1lWzJdKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5nYW1lbG9naWNUaW1lWzJdID0gZGlmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaWZmID4gZXhwb3J0cy5nYW1lbG9naWNUaW1lWzFdKSB7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5nYW1lbG9naWNUaW1lWzFdID0gZGlmZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRvbS5nYW1lbG9naWNBdmcuaW5uZXJIVE1MID0gTWF0aC5yb3VuZChleHBvcnRzLmdhbWVsb2dpY1RpbWVbMF0pO1xuICAgICAgICAgICAgZG9tLmdhbWVsb2dpY0hpZ2guaW5uZXJIVE1MID0gTWF0aC5yb3VuZChleHBvcnRzLmdhbWVsb2dpY1RpbWVbMV0pO1xuICAgICAgICAgICAgZG9tLmdhbWVsb2dpY0xvdy5pbm5lckhUTUwgPSBNYXRoLnJvdW5kKGV4cG9ydHMuZ2FtZWxvZ2ljVGltZVsyXSk7XG4gICAgICAgICAgICBkb20uZ2FtZWxvZ2ljUGVhay5pbm5lckhUTUwgPSBleHBvcnRzLmdhbWVsb2dpY1RpbWVbM107XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoZXhwb3J0cy5maW5kaW5nUGxheWVycykge1xuICAgICAgICBmaW5kUGxheWVycygpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFleHBvcnRzLmdhbWVFbmQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydHMucGxheWVyVHlwZVtpXSA9PSAwIHx8IGV4cG9ydHMucGxheWVyVHlwZVtpXSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLmN1cnJlbnRQbGF5ZXJzW2ldICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFtpXSA9IGludGVycHJldElucHV0cyhpLCBmYWxzZSwgZXhwb3J0cy5wbGF5ZXJUeXBlW2ldLCBvbGRJbnB1dEJ1ZmZlcnNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qXG4gIFxuICAgIHZhciBiZWZvcmVXYXN0ZXIgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAvLyBuZWVlZCB0byB3YXN0ZSAwLjY2Nm1zXG4gICAgdmFyIHRpbWVXYXN0ZWQgPSBmYWxzZTtcbiAgICB2YXIgdCA9IDA7XG4gICAgdmFyIG8gPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB3aGlsZSghdGltZVdhc3RlZCl7XG4gICAgICB2YXIgbiA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgdCArPSBuIC0gbztcbiAgICAgIC8vY29uc29sZS5sb2codCk7XG4gICAgICBpZiAodCA+IDAuNjY2Nil7XG4gICAgICAgIHRpbWVXYXN0ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgbyA9IG47XG4gICAgICAvL2NvbnNvbGUubG9nKFwiLlwiKTtcbiAgICB9XG4gICAgLy9jb25zb2xlLmxvZyhwZXJmb3JtYW5jZS5ub3coKSAtIGJlZm9yZVdhc3Rlcik7Ki9cbiAgICAoMCwgcmVwbGF5XzEuc2F2ZUdhbWVTdGF0ZSkoaW5wdXQsIGV4cG9ydHMucG9ydHMpO1xuICAgIHNldFRpbWVvdXQoZ2FtZVRpY2ssIDE2LCBpbnB1dCk7XG59XG5mdW5jdGlvbiBjbGVhclNjcmVlbigpIHtcbiAgICAvL2JnMS5maWxsU3R5bGUgPSBcInJnYigwLCAwLCAwKVwiO1xuICAgIC8vYmcxLmZpbGxSZWN0KDAsMCxsYXllcnMuQkcxLndpZHRoLGxheWVycy5CRzEuaGVpZ2h0KTtcbiAgICBleHBvcnRzLmJnMi5jbGVhclJlY3QoMCwgMCwgZXhwb3J0cy5sYXllcnMuQkcyLndpZHRoLCBleHBvcnRzLmxheWVycy5CRzIuaGVpZ2h0KTtcbiAgICAvL2ZnMS5jbGVhclJlY3QoMCwwLGxheWVycy5GRzEud2lkdGgsbGF5ZXJzLkZHMS5oZWlnaHQpO1xuICAgIGV4cG9ydHMuZmcyLmNsZWFyUmVjdCgwLCAwLCBleHBvcnRzLmxheWVycy5GRzIud2lkdGgsIGV4cG9ydHMubGF5ZXJzLkZHMi5oZWlnaHQpO1xuICAgIGV4cG9ydHMudWkuY2xlYXJSZWN0KDAsIDAsIGV4cG9ydHMubGF5ZXJzLlVJLndpZHRoLCBleHBvcnRzLmxheWVycy5VSS5oZWlnaHQpO1xufVxubGV0IG90aGVyRnJhbWUgPSB0cnVlO1xubGV0IGZwczMwID0gZmFsc2U7XG5mdW5jdGlvbiByZW5kZXJUaWNrKCkge1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyVGljayk7XG4gICAgb3RoZXJGcmFtZSBePSB0cnVlO1xuICAgIGlmICgoZnBzMzAgJiYgb3RoZXJGcmFtZSkgfHwgIWZwczMwKSB7XG4gICAgICAgIC8vY29uc29sZS5sb2coXCItLS0tLS1cIik7XG4gICAgICAgIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDIwKSB7XG4gICAgICAgICAgICAoMCwgc3RhcnR1cF8xLmRyYXdTdGFydFVwKSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cG9ydHMuZ2FtZU1vZGUgPT0gMTApIHtcbiAgICAgICAgICAgICgwLCBhdWRpb21lbnVfMS5kcmF3QXVkaW9NZW51KSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cG9ydHMuZ2FtZU1vZGUgPT0gMTEpIHtcbiAgICAgICAgICAgICgwLCBnYW1lcGxheW1lbnVfMS5kcmF3R2FtZXBsYXlNZW51KSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cG9ydHMuZ2FtZU1vZGUgPT0gMTIpIHtcbiAgICAgICAgICAgICgwLCBrZXlib2FyZG1lbnVfMS5kcmF3S2V5Ym9hcmRNZW51KSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cG9ydHMuZ2FtZU1vZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICgwLCBjcmVkaXRzXzEuZHJhd0NyZWRpdHMpKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhwb3J0cy5nYW1lTW9kZSA9PSAxNCkge1xuICAgICAgICAgICAgKDAsIGNvbnRyb2xsZXJtZW51XzEuZHJhd0NvbnRyb2xsZXJNZW51KSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cG9ydHMuZ2FtZU1vZGUgPT0gMCkge1xuICAgICAgICAgICAgKDAsIHN0YXJ0c2NyZWVuXzEuZHJhd1N0YXJ0U2NyZWVuKSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cG9ydHMuZ2FtZU1vZGUgPT0gMSkge1xuICAgICAgICAgICAgKDAsIG1lbnVfMS5kcmF3TWFpbk1lbnUpKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhwb3J0cy5nYW1lTW9kZSA9PSAyKSB7XG4gICAgICAgICAgICAoMCwgY3NzXzEuZHJhd0NTUykoKTtcbiAgICAgICAgICAgIC8vcmVuZGVyVmZ4KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhwb3J0cy5nYW1lTW9kZSA9PSA2KSB7XG4gICAgICAgICAgICAoMCwgc3RhZ2VzZWxlY3RfMS5kcmF3U1NTKSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cG9ydHMucGxheWluZyB8fCBleHBvcnRzLmZyYW1lQnlGcmFtZVJlbmRlcikge1xuICAgICAgICAgICAgLypkZWx0YSA9IHRpbWVzdGFtcCAtIGxhc3RGcmFtZVRpbWVNczsgLy8gZ2V0IHRoZSBkZWx0YSB0aW1lIHNpbmNlIGxhc3QgZnJhbWVcbiAgICAgICAgICAgIGxhc3RGcmFtZVRpbWVNcyA9IHRpbWVzdGFtcDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlbHRhKTsqL1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInRlc3QyXCIpO1xuICAgICAgICAgICAgdmFyIHJTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgY2xlYXJTY3JlZW4oKTtcbiAgICAgICAgICAgIGlmICgoMCwgdmZ4XzEuaXNTaG93U0ZYKSgpKSB7XG4gICAgICAgICAgICAgICAgKDAsIHN0YWdlcmVuZGVyXzEuZHJhd0JhY2tncm91bmQpKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoMCwgc3RhZ2VyZW5kZXJfMS5kcmF3U3RhZ2UpKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLnBsYXllclR5cGVbaV0gPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAoMCwgcmVuZGVyXzEucmVuZGVyUGxheWVyKShpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoMCwgYXJ0aWNsZV8xLnJlbmRlckFydGljbGVzKSgpO1xuICAgICAgICAgICAgKDAsIHJlbmRlclZmeF8xLnJlbmRlclZmeCkoKTtcbiAgICAgICAgICAgICgwLCByZW5kZXJfMS5yZW5kZXJPdmVybGF5KSh0cnVlKTtcbiAgICAgICAgICAgIGlmIChleHBvcnRzLnNob3dEZWJ1Zykge1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gcGVyZm9ybWFuY2Uubm93KCkgLSByU3RhcnQ7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5yZW5kZXJUaW1lWzBdICs9IGRpZmY7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5yZW5kZXJUaW1lWzBdIC89IDI7XG4gICAgICAgICAgICAgICAgaWYgKGRpZmYgPj0gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgZXhwb3J0cy5yZW5kZXJUaW1lWzNdKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaWZmID4gZXhwb3J0cy5yZW5kZXJUaW1lWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHMucmVuZGVyVGltZVsxXSA9IGRpZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaWZmIDwgZXhwb3J0cy5yZW5kZXJUaW1lWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4cG9ydHMucmVuZGVyVGltZVsyXSA9IGRpZmY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRvbS5yZW5kZXJBdmcuaW5uZXJIVE1MID0gTWF0aC5yb3VuZChleHBvcnRzLnJlbmRlclRpbWVbMF0pO1xuICAgICAgICAgICAgICAgIGRvbS5yZW5kZXJIaWdoLmlubmVySFRNTCA9IE1hdGgucm91bmQoZXhwb3J0cy5yZW5kZXJUaW1lWzFdKTtcbiAgICAgICAgICAgICAgICBkb20ucmVuZGVyTG93LmlubmVySFRNTCA9IE1hdGgucm91bmQoZXhwb3J0cy5yZW5kZXJUaW1lWzJdKTtcbiAgICAgICAgICAgICAgICBkb20ucmVuZGVyUGVhay5pbm5lckhUTUwgPSBleHBvcnRzLnJlbmRlclRpbWVbM107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4cG9ydHMuZnJhbWVCeUZyYW1lUmVuZGVyKSB7XG4gICAgICAgICAgICAoMCwgcmVuZGVyXzEucmVuZGVyRm9yZWdyb3VuZCkoKTtcbiAgICAgICAgfVxuICAgICAgICBleHBvcnRzLmZyYW1lQnlGcmFtZVJlbmRlciA9IGZhbHNlO1xuICAgICAgICAvL3JlbmRlclRvTWFpbigpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKHBlcmZvcm1hbmNlLm5vdygpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmIChleHBvcnRzLnBsYXlpbmcpIHtcbiAgICAgICAgICAgICgwLCByZW5kZXJWZnhfMS5yZW5kZXJWZngpKHRydWUpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gYnVpbGRQbGF5ZXJPYmplY3QoaSkge1xuICAgIGV4cG9ydHMucGxheWVyW2ldID0gbmV3IHBsYXllcl8xLnBsYXllck9iamVjdChleHBvcnRzLmNoYXJhY3RlclNlbGVjdGlvbnNbaV0sIGV4cG9ydHMuc3RhcnRpbmdQb2ludFtpXSwgZXhwb3J0cy5zdGFydGluZ0ZhY2VbaV0pO1xuICAgIGV4cG9ydHMucGxheWVyW2ldLnBoeXMuRUNCMSA9IFtuZXcgVmVjMkRfMS5WZWMyRChleHBvcnRzLnN0YXJ0aW5nUG9pbnRbaV0ueCwgZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldLnkpLCBuZXcgVmVjMkRfMS5WZWMyRChleHBvcnRzLnN0YXJ0aW5nUG9pbnRbaV0ueCwgZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldLnkpLCBuZXcgVmVjMkRfMS5WZWMyRChleHBvcnRzLnN0YXJ0aW5nUG9pbnRbaV0ueCwgZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldLnkpLCBuZXcgVmVjMkRfMS5WZWMyRChleHBvcnRzLnN0YXJ0aW5nUG9pbnRbaV0ueCwgZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldLnkpXTtcbiAgICBleHBvcnRzLnBsYXllcltpXS5waHlzLkVDQnAgPSBbbmV3IFZlYzJEXzEuVmVjMkQoZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldLngsIGV4cG9ydHMuc3RhcnRpbmdQb2ludFtpXS55KSwgbmV3IFZlYzJEXzEuVmVjMkQoZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldLngsIGV4cG9ydHMuc3RhcnRpbmdQb2ludFtpXS55KSwgbmV3IFZlYzJEXzEuVmVjMkQoZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldLngsIGV4cG9ydHMuc3RhcnRpbmdQb2ludFtpXS55KSwgbmV3IFZlYzJEXzEuVmVjMkQoZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldLngsIGV4cG9ydHMuc3RhcnRpbmdQb2ludFtpXS55KV07XG4gICAgZXhwb3J0cy5wbGF5ZXJbaV0uZGlmZmljdWx0eSA9IGV4cG9ydHMuY3B1RGlmZmljdWx0eVtpXTtcbn1cbmZ1bmN0aW9uIGluaXRpYWxpemVQbGF5ZXJzKGksIHRhcmdldCkge1xuICAgIGJ1aWxkUGxheWVyT2JqZWN0KGkpO1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgKDAsIGRyYXdWZnhfMS5kcmF3VmZ4KSh7XG4gICAgICAgICAgICBuYW1lOiBcImVudHJhbmNlXCIsXG4gICAgICAgICAgICBwb3M6IG5ldyBWZWMyRF8xLlZlYzJEKGFjdGl2ZVN0YWdlXzEuYWN0aXZlU3RhZ2Uuc3RhcnRpbmdQb2ludFswXS54LCBhY3RpdmVTdGFnZV8xLmFjdGl2ZVN0YWdlLnN0YXJ0aW5nUG9pbnRbMF0ueSlcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAoMCwgZHJhd1ZmeF8xLmRyYXdWZngpKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW50cmFuY2VcIixcbiAgICAgICAgICAgIHBvczogbmV3IFZlYzJEXzEuVmVjMkQoZXhwb3J0cy5zdGFydGluZ1BvaW50W2ldWzBdLCBleHBvcnRzLnN0YXJ0aW5nUG9pbnRbaV1bMV0pXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN0YXJ0R2FtZSgpIHtcbiAgICAoMCwgYWN0aXZlU3RhZ2VfMS5zZXRWc1N0YWdlKShleHBvcnRzLnN0YWdlU2VsZWN0KTtcbiAgICAoMCwgc3RhZ2VyZW5kZXJfMS5zZXRCYWNrZ3JvdW5kVHlwZSkoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKSk7XG4gICAgY2hhbmdlR2FtZW1vZGUoMyk7XG4gICAgKDAsIHZmeFF1ZXVlXzEucmVzZXRWZnhRdWV1ZSkoKTtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IDQ7IG4rKykge1xuICAgICAgICBpZiAoZXhwb3J0cy5wbGF5ZXJUeXBlW25dID4gLTEpIHtcbiAgICAgICAgICAgIGluaXRpYWxpemVQbGF5ZXJzKG4sIGZhbHNlKTtcbiAgICAgICAgICAgICgwLCByZW5kZXJfMS5yZW5kZXJQbGF5ZXIpKG4pO1xuICAgICAgICAgICAgZXhwb3J0cy5wbGF5ZXJbbl0uaW5DU1MgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXhwb3J0cy52ZXJzdXNNb2RlKSB7XG4gICAgICAgICAgICBleHBvcnRzLnBsYXllcltuXS5zdG9ja3MgPSAxO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV4cG9ydHMubWF0Y2hUaW1lciA9IDQ4MDtcbiAgICBleHBvcnRzLnN0YXJ0VGltZXIgPSAxLjU7XG4gICAgZXhwb3J0cy5zdGFydGluZyA9IHRydWU7XG4gICAgbXVzaWNfMS5NdXNpY01hbmFnZXIuc3RvcFdoYXRpc1BsYXlpbmcoKTtcbiAgICBzd2l0Y2ggKGV4cG9ydHMuc3RhZ2VTZWxlY3QpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgbXVzaWNfMS5NdXNpY01hbmFnZXIucGxheUJhdHRsZUZpZWxkTG9vcCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIG11c2ljXzEuTXVzaWNNYW5hZ2VyLnBsYXl5U3RvcnlMb29wKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgbXVzaWNfMS5NdXNpY01hbmFnZXIucGxheXBTdGFkaXVtTG9vcCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIG11c2ljXzEuTXVzaWNNYW5hZ2VyLnBsYXlEcmVhbUxhbmRMb29wKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgbXVzaWNfMS5NdXNpY01hbmFnZXIucGxheWZpbmFsZExvb3AoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICBtdXNpY18xLk11c2ljTWFuYWdlci5wbGF5Zm9kTG9vcCgpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgKDAsIGRyYXdWZnhfMS5kcmF3VmZ4KSh7XG4gICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgcG9zOiBuZXcgVmVjMkRfMS5WZWMyRCgwLCAwKVxuICAgIH0pO1xuICAgIGV4cG9ydHMuZmluZGluZ1BsYXllcnMgPSBmYWxzZTtcbiAgICBleHBvcnRzLnBsYXlpbmcgPSB0cnVlO1xufVxuZnVuY3Rpb24gZW5kR2FtZShpbnB1dCkge1xuICAgIGV4cG9ydHMuZ2FtZUVuZCA9IGZhbHNlO1xuICAgICgwLCByZW5kZXJfMS5yZXNldExvc3RTdG9ja1F1ZXVlKSgpO1xuICAgICgwLCBoaXREZXRlY3Rpb25fMS5zZXRQaGFudG9uUXVldWUpKFtdKTtcbiAgICAoMCwgYXJ0aWNsZV8xLnJlc2V0QUFydGljbGVzKSgpO1xuICAgIG11c2ljXzEuTXVzaWNNYW5hZ2VyLnN0b3BXaGF0aXNQbGF5aW5nKCk7XG4gICAgY2hhbmdlVm9sdW1lKG11c2ljXzEuTXVzaWNNYW5hZ2VyLCBhdWRpb21lbnVfMS5tYXN0ZXJWb2x1bWVbMV0sIDEpO1xuICAgIGV4cG9ydHMucGxheWluZyA9IGZhbHNlO1xuICAgIGNsZWFyU2NyZWVuKCk7XG4gICAgKDAsIHN0YWdlcmVuZGVyXzEuZHJhd1N0YWdlKSgpO1xuICAgICgwLCBjc3NfMi5zZXRUb2tlblBvc1NuYXBUb0NoYXIpKDApO1xuICAgICgwLCBjc3NfMi5zZXRUb2tlblBvc1NuYXBUb0NoYXIpKDEpO1xuICAgICgwLCBjc3NfMi5zZXRUb2tlblBvc1NuYXBUb0NoYXIpKDIpO1xuICAgICgwLCBjc3NfMi5zZXRUb2tlblBvc1NuYXBUb0NoYXIpKDMpO1xuICAgIGlmIChleHBvcnRzLmdhbWVNb2RlID09IDMpIHtcbiAgICAgICAgY2hhbmdlR2FtZW1vZGUoMik7XG4gICAgICAgIG11c2ljXzEuTXVzaWNNYW5hZ2VyLnBsYXlNZW51TG9vcCgpO1xuICAgICAgICBleHBvcnRzLnBhdXNlID0gW1t0cnVlLCB0cnVlXSwgW3RydWUsIHRydWVdLCBbdHJ1ZSwgdHJ1ZV0sIFt0cnVlLCB0cnVlXV07XG4gICAgICAgIGV4cG9ydHMuZnJhbWVBZHZhbmNlID0gW1xuICAgICAgICAgICAgW3RydWUsIHRydWVdLFxuICAgICAgICAgICAgW3RydWUsIHRydWVdLFxuICAgICAgICAgICAgW3RydWUsIHRydWVdLFxuICAgICAgICAgICAgW3RydWUsIHRydWVdXG4gICAgICAgIF07XG4gICAgICAgIGV4cG9ydHMuZmluZGluZ1BsYXllcnMgPSB0cnVlO1xuICAgICAgICBwb3NpdGlvblBsYXllcnNJbkNTUygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgaWYgKGV4cG9ydHMucGxheWVyVHlwZVtpXSA+IC0xKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4cG9ydHMucGxheWVyW2ldLmFjdGlvblN0YXRlID09IFwiRlVSQUZVUkFcIikge1xuICAgICAgICAgICAgICAgICAgICBzZnhfMS5zb3VuZHMuZnVyYWxvb3Auc3RvcChleHBvcnRzLnBsYXllcltpXS5mdXJhTG9vcElEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9pbnB1dFtpXVswXS5hID0gdHJ1ZTsgLy8gZG9cbiAgICAgICAgICAgICAgICAvL2lucHV0W2ldWzFdLmEgPSB0cnVlOyAvLyBub3RcbiAgICAgICAgICAgICAgICBleHBvcnRzLnBsYXllcltpXS5pbkNTUyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5wbGF5ZXJbaV0ucGh5cy5mYWNlID0gMTtcbiAgICAgICAgICAgICAgICBleHBvcnRzLnBsYXllcltpXS5hY3Rpb25TdGF0ZSA9IFwiV0FJVFwiO1xuICAgICAgICAgICAgICAgIGV4cG9ydHMucGxheWVyW2ldLnRpbWVyID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGZpbmlzaEdhbWUoaW5wdXQpIHtcbiAgICBleHBvcnRzLmdhbWVFbmQgPSB0cnVlO1xuICAgIGV4cG9ydHMucGxheWluZyA9IGZhbHNlO1xuICAgIGV4cG9ydHMuZmcyLnNhdmUoKTtcbiAgICBleHBvcnRzLmZnMi50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xuICAgIHZhciB0ZXh0ID0gXCJHYW1lIVwiO1xuICAgIHZhciBzaXplID0gMzAwO1xuICAgIHZhciB0ZXh0U2NhbGUgPSAxO1xuICAgIHZhciB0ZXh0R3JhZCA9IGV4cG9ydHMuZmcyLmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDIwMCwgMCwgNTIwKTtcbiAgICBpZiAoZXhwb3J0cy5tYXRjaFRpbWVyIDw9IDApIHtcbiAgICAgICAgdGV4dCA9IFwiVGltZSFcIjtcbiAgICAgICAgc2Z4XzEuc291bmRzLnRpbWUucGxheSgpO1xuICAgICAgICB0ZXh0R3JhZC5hZGRDb2xvclN0b3AoMCwgXCJibGFja1wiKTtcbiAgICAgICAgdGV4dEdyYWQuYWRkQ29sb3JTdG9wKDAuNSwgXCJibGFja1wiKTtcbiAgICAgICAgdGV4dEdyYWQuYWRkQ29sb3JTdG9wKDAuNywgXCJyZ2IoMjEsIDUxLCAxODApXCIpO1xuICAgICAgICB0ZXh0R3JhZC5hZGRDb2xvclN0b3AoMSwgXCJyZ2IoNzEsIDk0LCAyNTApXCIpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgc2Z4XzEuc291bmRzLmdhbWUucGxheSgpO1xuICAgICAgICB0ZXh0R3JhZC5hZGRDb2xvclN0b3AoMCwgXCJibGFja1wiKTtcbiAgICAgICAgdGV4dEdyYWQuYWRkQ29sb3JTdG9wKDAuNCwgXCJibGFja1wiKTtcbiAgICAgICAgdGV4dEdyYWQuYWRkQ29sb3JTdG9wKDAuNywgXCJyZ2IoMTY3LCAyNywgNDApXCIpO1xuICAgICAgICB0ZXh0R3JhZC5hZGRDb2xvclN0b3AoMSwgXCJyZ2IoMjU1LCAzMSwgNTIpXCIpO1xuICAgIH1cbiAgICBleHBvcnRzLmZnMi5zY2FsZSgxLCB0ZXh0U2NhbGUpO1xuICAgIGV4cG9ydHMuZmcyLmZpbGxTdHlsZSA9IHRleHRHcmFkO1xuICAgIGV4cG9ydHMuZmcyLmxpbmVXaWR0aCA9IDQwO1xuICAgIGV4cG9ydHMuZmcyLnN0cm9rZVN0eWxlID0gXCJibGFja1wiO1xuICAgIGV4cG9ydHMuZmcyLmZvbnQgPSBcIjkwMCBcIiArIHNpemUgKyBcInB4IEFyaWFsXCI7XG4gICAgZXhwb3J0cy5mZzIuc3Ryb2tlVGV4dCh0ZXh0LCA2MDAsIDQ3MCAvIHRleHRTY2FsZSk7XG4gICAgZXhwb3J0cy5mZzIubGluZVdpZHRoID0gMjA7XG4gICAgZXhwb3J0cy5mZzIuc3Ryb2tlU3R5bGUgPSBcIndoaXRlXCI7XG4gICAgZXhwb3J0cy5mZzIuZm9udCA9IFwiOTAwIFwiICsgc2l6ZSArIFwicHggQXJpYWxcIjtcbiAgICBleHBvcnRzLmZnMi5zdHJva2VUZXh0KHRleHQsIDYwMCwgNDcwIC8gdGV4dFNjYWxlKTtcbiAgICBleHBvcnRzLmZnMi5mb250ID0gXCI5MDAgXCIgKyBzaXplICsgXCJweCBBcmlhbFwiO1xuICAgIGV4cG9ydHMuZmcyLmZpbGxUZXh0KHRleHQsIDYwMCwgNDcwIC8gdGV4dFNjYWxlKTtcbiAgICBleHBvcnRzLmZnMi5yZXN0b3JlKCk7XG4gICAgbXVzaWNfMS5NdXNpY01hbmFnZXIuc3RvcFdoYXRpc1BsYXlpbmcoKTtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZW5kR2FtZShpbnB1dCk7XG4gICAgfSwgMjUwMCk7XG59XG5mdW5jdGlvbiBvbkZ1bGxTY3JlZW5DaGFuZ2UoKSB7XG4gICAgdmFyIGZ1bGxzY3JlZW5FbGVtZW50ID0gZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQubW96RnVsbFNjcmVlbkVsZW1lbnQgfHwgZG9jdW1lbnQud2Via2l0RnVsbHNjcmVlbkVsZW1lbnQ7XG4gICAgLy8gaWYgaW4gZnVsbHNjcmVlbiBtb2RlIGZ1bGxzY3JlZW5FbGVtZW50IHdvbid0IGJlIG51bGxcbiAgICB2YXIgY29udCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9wQnV0dG9uQ29udGFpbmVyXCIpO1xuICAgIHZhciBpY24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRvcEJ1dHRvblwiKTtcbiAgICBpZiAoZnVsbHNjcmVlbkVsZW1lbnQgIT0gbnVsbCkge1xuICAgICAgICBjb250LnN0eWxlLnRyYW5zaXRpb24gPSBcIm9wYWNpdHkgMC41cyBsaW5lYXIgMHNcIjtcbiAgICAgICAgY29udC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGljbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGljbltpXS5zdHlsZS5oZWlnaHQgPSBcIjVweFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udC5zdHlsZS5oZWlnaHQgPSBcIjVweFwiO1xuICAgICAgICAgICAgcmVzaXplKCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNrZXlib2FyZFByb21wdFwiKS5oaWRlKCk7XG4gICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNrZXlib2FyZENvbnRyb2xzSW1nXCIpLmhpZGUoKTtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2NvbnRyb2xsZXJTdXBwb3J0Q29udGFpbmVyXCIpLmhpZGUoKTtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2RlYnVnQnV0dG9uRWRpdFwiKS5lbXB0eSgpLmFwcGVuZChcIk9GRlwiKTtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2RlYnVnXCIpLmhpZGUoKTtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI3BsYXllcnNcIikuaGlkZSgpO1xuICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCJib2R5XCIpLmNzcyhcIm92ZXJmbG93XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICBzaG93SGVhZGVyID0gZmFsc2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGljbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWNuW2ldLnN0eWxlLmhlaWdodCA9IFwiMjVweFwiO1xuICAgICAgICB9XG4gICAgICAgIGNvbnQuc3R5bGUuaGVpZ2h0ID0gXCIzMXB4XCI7XG4gICAgICAgIGNvbnQuc3R5bGUudHJhbnNpdGlvbiA9IFwib3BhY2l0eSAwLjVzIGxpbmVhciAwc1wiO1xuICAgICAgICBjb250LnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgIGlmIChleHBvcnRzLmhvbGlkYXkgPT09IDEpIHtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2xheWVyQnV0dG9uXCIpLmFmdGVyKCc8ZGl2IGlkPVwic25vd0J1dHRvblwiIGNsYXNzPVwiZ2FtZUJ1dHRvblwiIHN0eWxlPVwid2lkdGg6OTBweFwiPjxpbWcgc3JjPVwiYXNzZXRzL2NocmlzdG1hcy9zbm93Zmxha2UucG5nXCIgaGVpZ2h0PTE3IHdpZHRoPTE3IHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2tcIi8+PHAgc3R5bGU9XCJ3aWR0aDozMHB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrXCI+PHNwYW4gaWQ9XCJzbm93QnV0dG9uRWRpdFwiPjE1MDwvc3Bhbj48L3A+PGRpdiBpZD1cInNub3dNaW51c1wiIGNsYXNzPVwic25vd0NvbnRyb2xcIiBzdHlsZT1cImRpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6M3B4XCI+PHAgc3R5bGU9XCJwYWRkaW5nOjA7Zm9udC1zaXplOjIwcHhcIj4tPC9wPjwvZGl2PjxkaXYgaWQ9XCJzbm93UGx1c1wiIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7cGFkZGluZzozcHhcIj48cCBzdHlsZT1cInBhZGRpbmc6MDtmb250LXNpemU6MTdweFwiPis8L3A+PC9kaXY+PC9kaXY+Jyk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgIGJ1aWxkUGxheWVyT2JqZWN0KGkpO1xuICAgICAgICBleHBvcnRzLnBsYXllcltpXS5waHlzLmZhY2UgPSAxO1xuICAgICAgICBleHBvcnRzLnBsYXllcltpXS5hY3Rpb25TdGF0ZSA9IFwiV0FJVFwiO1xuICAgIH1cbiAgICBjYWNoZURvbSgpO1xuICAgICgwLCBrZXlib2FyZG1lbnVfMS5nZXRLZXlib2FyZENvb2tpZSkoKTtcbiAgICBnaXZlTWVkYWxzKCk7XG4gICAgKDAsIGF1ZGlvbWVudV8xLmdldEF1ZGlvQ29va2llcykoKTtcbiAgICAoMCwgZ2FtZXBsYXltZW51XzEuZ2V0R2FtZXBsYXlDb29raWVzKSgpO1xuICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNrZXlib2FyZEJ1dHRvblwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNrZXlib2FyZENvbnRyb2xzSW1nXCIpLnRvZ2dsZSgpO1xuICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIja2V5Ym9hcmRQcm9tcHRcIikuaGlkZSgpO1xuICAgIH0pO1xuICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNjb250cm9sbGVyQnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2NvbnRyb2xsZXJTdXBwb3J0Q29udGFpbmVyXCIpLnRvZ2dsZSgpO1xuICAgIH0pO1xuICAgIGV4cG9ydHMubGF5ZXJzLkJHMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZDFDYW52YXNcIik7XG4gICAgZXhwb3J0cy5iZzEgPSBleHBvcnRzLmxheWVycy5CRzEuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGV4cG9ydHMubGF5ZXJzLkJHMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZDJDYW52YXNcIik7XG4gICAgZXhwb3J0cy5iZzIgPSBleHBvcnRzLmxheWVycy5CRzIuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGV4cG9ydHMubGF5ZXJzLkZHMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9yZWdyb3VuZDFDYW52YXNcIik7XG4gICAgZXhwb3J0cy5mZzEgPSBleHBvcnRzLmxheWVycy5GRzEuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGV4cG9ydHMubGF5ZXJzLkZHMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9yZWdyb3VuZDJDYW52YXNcIik7XG4gICAgZXhwb3J0cy5mZzIgPSBleHBvcnRzLmxheWVycy5GRzIuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGV4cG9ydHMubGF5ZXJzLlVJID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1aUNhbnZhc1wiKTtcbiAgICBleHBvcnRzLnVpID0gZXhwb3J0cy5sYXllcnMuVUkuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIGV4cG9ydHMuYmcxLmZpbGxTdHlsZSA9IFwicmdiKDAsIDAsIDApXCI7XG4gICAgZXhwb3J0cy5iZzEuZmlsbFJlY3QoMCwgMCwgZXhwb3J0cy5sYXllcnMuQkcxLndpZHRoLCBleHBvcnRzLmxheWVycy5CRzEuaGVpZ2h0KTtcbiAgICBsZXQgbnVsbElucHV0QnVmZmVycyA9IFsoMCwgaW5wdXRfMS5udWxsSW5wdXRzKSgpLCAoMCwgaW5wdXRfMS5udWxsSW5wdXRzKSgpLCAoMCwgaW5wdXRfMS5udWxsSW5wdXRzKSgpLCAoMCwgaW5wdXRfMS5udWxsSW5wdXRzKSgpXTtcbiAgICBnYW1lVGljayhudWxsSW5wdXRCdWZmZXJzKTtcbiAgICByZW5kZXJUaWNrKCk7XG4gICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2VmZmVjdHNCdXR0b25cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoKDAsIHZmeF8xLmlzU2hvd1NGWCkoKSkge1xuICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2VmZmVjdHNCdXR0b25FZGl0XCIpLmVtcHR5KCkuYXBwZW5kKFwiT0ZGXCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2VmZmVjdHNCdXR0b25FZGl0XCIpLmVtcHR5KCkuYXBwZW5kKFwiT05cIik7XG4gICAgICAgIH1cbiAgICAgICAgKDAsIHZmeF8xLnRvZ2dsZVNob3dTRlgpKCk7XG4gICAgfSk7XG4gICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2Zwc0J1dHRvblwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChmcHMzMCkge1xuICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2Zwc0J1dHRvbkVkaXRcIikuZW1wdHkoKS5hcHBlbmQoXCI2MFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNmcHNCdXR0b25FZGl0XCIpLmVtcHR5KCkuYXBwZW5kKFwiMzBcIik7XG4gICAgICAgIH1cbiAgICAgICAgZnBzMzAgXj0gdHJ1ZTtcbiAgICB9KTtcbiAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjYWxwaGFCdXR0b25cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoKDAsIHRyYW5zcGFyZW5jeV8xLmdldFRyYW5zcGFyZW5jeSkoKSkge1xuICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2FscGhhQnV0dG9uRWRpdFwiKS5lbXB0eSgpLmFwcGVuZChcIk9GRlwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNhbHBoYUJ1dHRvbkVkaXRcIikuZW1wdHkoKS5hcHBlbmQoXCJPTlwiKTtcbiAgICAgICAgfVxuICAgICAgICAoMCwgdHJhbnNwYXJlbmN5XzEudG9nZ2xlVHJhbnNwYXJlbmN5KSgpO1xuICAgIH0pO1xuICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNsYXllckJ1dHRvblwiKS5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNsYXllckRyb3Bkb3duXCIpLnRvZ2dsZSgpO1xuICAgIH0pO1xuICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIi5sYXllclwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpZCA9ICgwLCBqcXVlcnlfMS5kZWZhdWx0KSh0aGlzKS5hdHRyKFwiaWRcIik7XG4gICAgICAgIHN3aXRjaCAoaWQpIHtcbiAgICAgICAgICAgIGNhc2UgXCJsYXllcjFcIjpcbiAgICAgICAgICAgICAgICBleHBvcnRzLmxheWVyU3dpdGNoZXMuQkcxIF49IHRydWU7XG4gICAgICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2JhY2tncm91bmQxQ2FudmFzXCIpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImxheWVyMlwiOlxuICAgICAgICAgICAgICAgIGV4cG9ydHMubGF5ZXJTd2l0Y2hlcy5CRzIgXj0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjYmFja2dyb3VuZDJDYW52YXNcIikudG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwibGF5ZXIzXCI6XG4gICAgICAgICAgICAgICAgZXhwb3J0cy5sYXllclN3aXRjaGVzLkZHMSBePSB0cnVlO1xuICAgICAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNmb3JlZ3JvdW5kMUNhbnZhc1wiKS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJsYXllcjRcIjpcbiAgICAgICAgICAgICAgICBleHBvcnRzLmxheWVyU3dpdGNoZXMuRkcyIF49IHRydWU7XG4gICAgICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2ZvcmVncm91bmQyQ2FudmFzXCIpLnRvZ2dsZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImxheWVyNVwiOlxuICAgICAgICAgICAgICAgIGV4cG9ydHMubGF5ZXJTd2l0Y2hlcy5VSSBePSB0cnVlO1xuICAgICAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiN1aUNhbnZhc1wiKS50b2dnbGUoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKHRoaXMpLnRvZ2dsZUNsYXNzKFwibGF5ZXJPblwiKTtcbiAgICB9KTtcbiAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjZGVidWdCdXR0b25cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZXhwb3J0cy5zaG93RGVidWcpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnYW1lcGFkU1ZHXCIgKyBpKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjZGVidWdCdXR0b25FZGl0XCIpLmVtcHR5KCkuYXBwZW5kKFwiT0ZGXCIpO1xuICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2RlYnVnXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNwbGF5ZXJzXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcImJvZHlcIikuY3NzKFwib3ZlcmZsb3dcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgICAgICAvL3ZhciBtWSA9IE1hdGgubWF4KCgkKHdpbmRvdykuaGVpZ2h0KCktNzUwKS8yLDApO1xuICAgICAgICAgICAgLy8kKFwiI2Rpc3BsYXlcIikuY3NzKFwibWFyZ2luXCIsbVkrXCJweCAwcHggMHB4IFwiK21YK1wicHhcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChleHBvcnRzLnBsYXllclR5cGVbaV0gIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICgwLCBkcmF3R2FtZXBhZF8xLnVwZGF0ZUdhbWVwYWRTVkdDb2xvdXIpKGksIFwiZ2FtZXBhZFNWR1wiICsgaSk7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2FtZXBhZFNWR1wiICsgaSkuc3R5bGUuZGlzcGxheSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2RlYnVnQnV0dG9uRWRpdFwiKS5lbXB0eSgpLmFwcGVuZChcIk9OXCIpO1xuICAgICAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2RlYnVnXCIpLnNob3coKTtcbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNwbGF5ZXJzXCIpLnNob3coKTtcbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcImJvZHlcIikuY3NzKFwib3ZlcmZsb3dcIiwgXCJzY3JvbGxcIik7XG4gICAgICAgICAgICAvL3ZhciBtWSA9IE1hdGgubWF4KCgkKHdpbmRvdykuaGVpZ2h0KCktOTAwKS8yLDApO1xuICAgICAgICAgICAgLy8kKFwiI2Rpc3BsYXlcIikuY3NzKFwibWFyZ2luXCIsbVkrXCIgMHB4IDBweCBweCBcIittWCtcInB4XCIpO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydHMuc2hvd0RlYnVnIF49IHRydWU7XG4gICAgICAgIHJlc2l6ZSgpO1xuICAgIH0pO1xuICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNoaWRlQnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2hlYWRlclwiKS50b2dnbGUoKTtcbiAgICAgICAgc2hvd0hlYWRlciBePSB0cnVlO1xuICAgICAgICByZXNpemUoKTtcbiAgICB9KTtcbiAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjZnVsbHNjcmVlbkJ1dHRvblwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgoZG9jdW1lbnQuZnVsbFNjcmVlbkVsZW1lbnQgJiYgZG9jdW1lbnQuZnVsbFNjcmVlbkVsZW1lbnQgIT09IG51bGwpIHx8ICghZG9jdW1lbnQubW96RnVsbFNjcmVlbiAmJiAhZG9jdW1lbnQud2Via2l0SXNGdWxsU2NyZWVuKSkge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZXF1ZXN0RnVsbFNjcmVlbikge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZXF1ZXN0RnVsbFNjcmVlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm1velJlcXVlc3RGdWxsU2NyZWVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4pIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4oRWxlbWVudC5BTExPV19LRVlCT0FSRF9JTlBVVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQuY2FuY2VsRnVsbFNjcmVlbikge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNhbmNlbEZ1bGxTY3JlZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRvY3VtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW4pIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5tb3pDYW5jZWxGdWxsU2NyZWVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkb2N1bWVudC53ZWJraXRDYW5jZWxGdWxsU2NyZWVuKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQud2Via2l0Q2FuY2VsRnVsbFNjcmVlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHJlc2l6ZSgpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJmdWxsc2NyZWVuY2hhbmdlXCIsIG9uRnVsbFNjcmVlbkNoYW5nZSwgZmFsc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3ZWJraXRmdWxsc2NyZWVuY2hhbmdlXCIsIG9uRnVsbFNjcmVlbkNoYW5nZSwgZmFsc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3pmdWxsc2NyZWVuY2hhbmdlXCIsIG9uRnVsbFNjcmVlbkNoYW5nZSwgZmFsc2UpO1xuICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIi50b3BCdXR0b25cIikuaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkodGhpcykuY2hpbGRyZW4oXCIuYnV0dG9uRGV0YWlsc1wiKS50b2dnbGUoKTtcbiAgICB9KTtcbiAgICBpZiAobW9iaWxlID09PSBmYWxzZSkge1xuICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIuYnV0dG9uXCIpLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KSh0aGlzKS50b2dnbGVDbGFzcyhcImJ1dHRvbmhpZ2hsaWdodGVkXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiLnNvY2lhbG1lZGlhXCIpLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KSh0aGlzKS50b2dnbGVDbGFzcyhcInNvY2lhbG1lZGlhaGlnaGxpZ2h0XCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiLnN1Z2J0blwiKS5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkodGhpcykudG9nZ2xlQ2xhc3MoXCJzdWdidG5oaWdobGlnaHRcIik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjYXBwc0J1dHRvblwiKS5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNhcHBzRHJvcGRvd25cIikuc2hvdygpO1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKDAsIGpxdWVyeV8xLmRlZmF1bHQpKFwiI2FwcHNEcm9wZG93blwiKS5oaWRlKCk7XG4gICAgfSk7XG4gICAgaWYgKGV4cG9ydHMuaG9saWRheSA9PT0gMSkge1xuICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjc25vd01pbnVzXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGV4cG9ydHMuc25vd0NvdW50IC09IDIwO1xuICAgICAgICAgICAgaWYgKGV4cG9ydHMuc25vd0NvdW50IDwgMCkge1xuICAgICAgICAgICAgICAgIGV4cG9ydHMuc25vd0NvdW50ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNzbm93QnV0dG9uRWRpdFwiKS50ZXh0KGV4cG9ydHMuc25vd0NvdW50KTtcbiAgICAgICAgfSk7XG4gICAgICAgICgwLCBqcXVlcnlfMS5kZWZhdWx0KShcIiNzbm93UGx1c1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBleHBvcnRzLnNub3dDb3VudCArPSAyMDtcbiAgICAgICAgICAgIGlmIChleHBvcnRzLnNub3dDb3VudCA+IDEyMDApIHtcbiAgICAgICAgICAgICAgICBleHBvcnRzLnNub3dDb3VudCA9IDEyMDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjc25vd0J1dHRvbkVkaXRcIikudGV4dChleHBvcnRzLnNub3dDb3VudCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAoMCwganF1ZXJ5XzEuZGVmYXVsdCkoXCIjcmVwbGF5XCIpLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGdyYWIgdGhlIGZpcnN0IGltYWdlIGluIHRoZSBGaWxlTGlzdCBvYmplY3QgYW5kIHBhc3MgaXQgdG8gdGhlIGZ1bmN0aW9uXG4gICAgICAgICgwLCByZXBsYXlfMS5sb2FkUmVwbGF5KSh0aGlzLmZpbGVzWzBdKTtcbiAgICB9KTtcbiAgICByZXNpemUoKTtcbn1cbndpbmRvdy5zdGFydCA9IHN0YXJ0O1xuZnVuY3Rpb24gY3VzdG9tRGVhZHpvbmUoKSB7XG4gICAgdGhpcy5scyA9IG5ldyBWZWMyRF8xLlZlYzJEKDAsIDApO1xuICAgIHRoaXMuY3MgPSBuZXcgVmVjMkRfMS5WZWMyRCgwLCAwKTtcbiAgICB0aGlzLmwgPSAwO1xuICAgIHRoaXMuciA9IDA7XG59XG5mdW5jdGlvbiBhZGRTaGluZSh2YWwpIHtcbiAgICBleHBvcnRzLnNoaW5lICs9IHZhbDtcbn1cbmZ1bmN0aW9uIHNldFNoaW5lKHZhbCkge1xuICAgIGV4cG9ydHMuc2hpbmUgPSB2YWw7XG59XG5mdW5jdGlvbiBzZXRGaW5kaW5nUGxheWVycyh2YWwpIHtcbiAgICBleHBvcnRzLmZpbmRpbmdQbGF5ZXJzID0gdmFsO1xufVxuZnVuY3Rpb24gc2V0UGxheWluZyh2YWwpIHtcbiAgICBleHBvcnRzLnBsYXlpbmcgPSB2YWw7XG59XG5mdW5jdGlvbiBzZXRDcmVkaXRzUGxheWVyKHZhbCkge1xuICAgIGV4cG9ydHMuY3JlZGl0c1BsYXllciA9IHZhbDtcbn1cbmZ1bmN0aW9uIHNldENhbGlicmF0aW9uUGxheWVyKHZhbCkge1xuICAgIGV4cG9ydHMuY2FsaWJyYXRpb25QbGF5ZXIgPSB2YWw7XG59XG5jb25zdCBkb20gPSB7fTtcbmZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgIGNvbnN0IGVsZW1lbnRJZHMgPSBbXG4gICAgICAgIFwibWF0Y2hNaW51dGVzXCIsXG4gICAgICAgIFwibWF0Y2hTZWNvbmRzXCIsXG4gICAgICAgIFwiZ2FtZWxvZ2ljQXZnXCIsXG4gICAgICAgIFwiZ2FtZWxvZ2ljSGlnaFwiLFxuICAgICAgICBcImdhbWVsb2dpY0xvd1wiLFxuICAgICAgICBcImdhbWVsb2dpY1BlYWtcIixcbiAgICAgICAgXCJyZW5kZXJBdmdcIixcbiAgICAgICAgXCJyZW5kZXJIaWdoXCIsXG4gICAgICAgIFwicmVuZGVyTG93XCIsXG4gICAgICAgIFwicmVuZGVyUGVha1wiLFxuICAgIF07XG4gICAgZWxlbWVudElkcy5mb3JFYWNoKChpZCkgPT4ge1xuICAgICAgICBkb21baWRdID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgIH0pO1xufVxuO1xuZnVuY3Rpb24gc2V0Q1MoaW5kZXgsIHZhbCkge1xuICAgIGV4cG9ydHMuY2hhcmFjdGVyU2VsZWN0aW9uc1tpbmRleF0gPSB2YWw7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main/main.ts\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("d8b12aca11f35e361392")
/******/ })();
/******/ 
/******/ }
);